!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@flamelink/sdk-app")):"function"==typeof define&&define.amd?define(["@flamelink/sdk-app"],e):e((t=t||self).flamelink)}(this,function(t){"use strict";try{(function(){t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduceRight(function(t,e){return t.then(e)},Promise.resolve(t))}};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var n,i=r(function(t,e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var n=!1,i=function t(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};t.exports&&(e=t.exports=i),e.EXIF=i;var a=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},o=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},u=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},s=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function f(t){return!!t.exifdata}function l(t,e){function r(r){var n=d(r),i=function(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;var r=2,n=t.byteLength,i=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};for(;r<n;){if(i(e,r)){var a=e.getUint8(r+7);a%2!=0&&(a+=1),0===a&&(a=4);var o=r+8+a,u=e.getUint16(r+6+a);return p(t,o,u)}r++}}(r);t.exifdata=n||{},t.iptcdata=i||{},e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))r(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var r=atob(t),n=r.length,i=new ArrayBuffer(n),a=new Uint8Array(i),o=0;o<n;o++)a[o]=r.charCodeAt(o);return i}(t.src));else if(/^blob\:/i.test(t.src)){(i=new FileReader).onload=function(t){r(t.target.result)},function(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},r.send()}(t.src,function(t){i.readAsArrayBuffer(t)})}else{var n=new XMLHttpRequest;n.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(n.response),n=null},n.open("GET",t.src,!0),n.responseType="arraybuffer",n.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var i;(i=new FileReader).onload=function(t){r(t.target.result)},i.readAsArrayBuffer(t)}}function d(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;for(var r=2,n=t.byteLength;r<n;){if(255!=e.getUint8(r))return!1;if(225==e.getUint8(r+1))return b(e,r+4,e.getUint16(r+2));r+=2+e.getUint16(r+2)}}var h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function p(t,e,r){for(var n,i,a,o,u=new DataView(t),c={},s=e;s<e+r;)28===u.getUint8(s)&&2===u.getUint8(s+1)&&(o=u.getUint8(s+2))in h&&(a=u.getInt16(s+3),i=h[o],n=g(u,s+5,a),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(n):c[i]=[c[i],n]:c[i]=n),s++;return c}function v(t,e,r,i,a){var o,u,c,s=t.getUint16(r,!a),f={};for(c=0;c<s;c++)o=r+12*c+2,!(u=i[t.getUint16(o,!a)])&&n&&console.log("Unknown tag: "+t.getUint16(o,!a)),f[u]=y(t,o,e,r,a);return f}function y(t,e,r,n,i){var a,o,u,c,s,f,l=t.getUint16(e+2,!i),d=t.getUint32(e+4,!i),h=t.getUint32(e+8,!i)+r;switch(l){case 1:case 7:if(1==d)return t.getUint8(e+8,!i);for(a=d>4?h:e+8,o=[],c=0;c<d;c++)o[c]=t.getUint8(a+c);return o;case 2:return g(t,a=d>4?h:e+8,d-1);case 3:if(1==d)return t.getUint16(e+8,!i);for(a=d>2?h:e+8,o=[],c=0;c<d;c++)o[c]=t.getUint16(a+2*c,!i);return o;case 4:if(1==d)return t.getUint32(e+8,!i);for(o=[],c=0;c<d;c++)o[c]=t.getUint32(h+4*c,!i);return o;case 5:if(1==d)return s=t.getUint32(h,!i),f=t.getUint32(h+4,!i),(u=new Number(s/f)).numerator=s,u.denominator=f,u;for(o=[],c=0;c<d;c++)s=t.getUint32(h+8*c,!i),f=t.getUint32(h+4+8*c,!i),o[c]=new Number(s/f),o[c].numerator=s,o[c].denominator=f;return o;case 9:if(1==d)return t.getInt32(e+8,!i);for(o=[],c=0;c<d;c++)o[c]=t.getInt32(h+4*c,!i);return o;case 10:if(1==d)return t.getInt32(h,!i)/t.getInt32(h+4,!i);for(o=[],c=0;c<d;c++)o[c]=t.getInt32(h+8*c,!i)/t.getInt32(h+4+8*c,!i);return o}}function g(t,e,r){for(var n="",i=e;i<e+r;i++)n+=String.fromCharCode(t.getUint8(i));return n}function b(t,e){if("Exif"!=g(t,e,4))return!1;var r,n,i,f,l,d=e+6;if(18761==t.getUint16(d))r=!1;else{if(19789!=t.getUint16(d))return!1;r=!0}if(42!=t.getUint16(d+2,!r))return!1;var h=t.getUint32(d+4,!r);if(h<8)return!1;if((n=v(t,d,d+h,o,r)).ExifIFDPointer)for(i in f=v(t,d,d+n.ExifIFDPointer,a,r)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":f[i]=s[i][f[i]];break;case"ExifVersion":case"FlashpixVersion":f[i]=String.fromCharCode(f[i][0],f[i][1],f[i][2],f[i][3]);break;case"ComponentsConfiguration":f[i]=s.Components[f[i][0]]+s.Components[f[i][1]]+s.Components[f[i][2]]+s.Components[f[i][3]]}n[i]=f[i]}if(n.GPSInfoIFDPointer)for(i in l=v(t,d,d+n.GPSInfoIFDPointer,u,r)){switch(i){case"GPSVersionID":l[i]=l[i][0]+"."+l[i][1]+"."+l[i][2]+"."+l[i][3]}n[i]=l[i]}return n.thumbnail=function(t,e,r,n){var i=function(t,e,r){var n=t.getUint16(e,!r);return t.getUint32(e+2+12*n,!r)}(t,e+r,n);if(!i)return{};if(i>t.byteLength)return{};var a=v(t,e,e+i,c,n);if(a.Compression)switch(a.Compression){case 6:if(a.JpegIFOffset&&a.JpegIFByteCount){var o=e+a.JpegIFOffset,u=a.JpegIFByteCount;a.blob=new Blob([new Uint8Array(t.buffer,o,u)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",a.Compression)}else 2==a.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return a}(t,d,h,r),n}i.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete)&&(f(t)?e&&e.call(t):l(t,e),!0)},i.getTag=function(t,e){if(f(t))return t.exifdata[e]},i.getIptcTag=function(t,e){if(f(t))return t.iptcdata[e]},i.getAllTags=function(t){if(!f(t))return{};var e,r=t.exifdata,n={};for(e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n},i.getAllIptcTags=function(t){if(!f(t))return{};var e,r=t.iptcdata,n={};for(e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n},i.pretty=function(t){if(!f(t))return"";var e,n=t.exifdata,i="";for(e in n)n.hasOwnProperty(e)&&("object"==r(n[e])?n[e]instanceof Number?i+=e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":i+=e+" : ["+n[e].length+" values]\r\n":i+=e+" : "+n[e]+"\r\n");return i},i.readFromBinaryFile=function(t){return d(t)}}).call(void 0)}),a=(i.EXIF,r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return new Promise(function(r){var i=document.createElement("img"),u=new FileReader,c=Object.assign({},a,e);u.onload=function(t){i.src=t.target.result,i.onload=function(){c.autoRotate&&(c.debug&&console.log("browser-image-resizer: detecting image orientation..."),"function"==typeof n.default.getData&&"function"==typeof n.default.getTag?n.default.getData(i,function(){var t=n.default.getTag(this,"Orientation");c.debug&&console.log("browser-image-resizer: image orientation from EXIF tag = "+t),r(o(i,c,t))}):(console.error("browser-image-resizer: can't read EXIF data, the Exif.js library not found"),r(o(i,c))))}},u.readAsDataURL(t)})},e.scaleImage=o;var r,n=(r=i)&&r.__esModule?r:{default:r};var a={quality:.5,maxWidth:800,maxHeight:600,autoRotate:!0,debug:!1,mimeType:"image/jpeg"};function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=document.createElement("canvas");n.width=t.width,n.height=t.height;var i=n.getContext("2d");i.save(),function(t,e,r,n){var i=t.width,a=t.style.width,o=t.height,u=t.style.height;r>4&&(t.width=o,t.style.width=u,t.height=i,t.style.height=a);switch(r){case 2:e.translate(i,0),e.scale(-1,1);break;case 3:e.translate(i,o),e.rotate(Math.PI);break;case 4:e.translate(0,o),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-o);break;case 7:e.rotate(.5*Math.PI),e.translate(i,-o),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-i,0)}e.drawImage(n,0,0),e.restore()}(n,i,r,t);for(var a=function(t,e){var r=e.width/e.height,n=Math.min(e.width,t.maxWidth,r*t.maxHeight);t.maxSize>0&&t.maxSize<e.width*e.height/1e3&&(n=Math.min(n,Math.floor(1e3*t.maxSize/e.height)));t.scaleRatio&&(n=Math.min(n,Math.floor(t.scaleRatio*e.width)));t.debug&&(console.log("browser-image-resizer: original image size = "+e.width+" px (width) X "+e.height+" px (height)"),console.log("browser-image-resizer: scaled image size = "+n+" px (width) X "+Math.floor(n/r)+" px (height)"));n<=0&&(n=1,console.warning("browser-image-resizer: image size is too small"));return n}(e,n);n.width>=2*a;)n=u(n);n.width>a&&(n=function(t,e){var r=document.createElement("canvas"),n=e.outputWidth/t.width;r.width=t.width*n,r.height=t.height*n;var i=t.getContext("2d").getImageData(0,0,t.width,t.height),a=r.getContext("2d").createImageData(r.width,r.height);return function(t,e,r){function n(t,e,r,n,i,a){var o=1-i,u=1-a;return t*o*u+e*i*u+r*o*a+n*i*a}var i,a,o,u,c,s,f,l,d,h,p,v,y,g,b,m,_,w,j;for(i=0;i<e.height;++i)for(o=i/r,u=Math.floor(o),c=Math.ceil(o)>t.height-1?t.height-1:Math.ceil(o),a=0;a<e.width;++a)s=a/r,f=Math.floor(s),l=Math.ceil(s)>t.width-1?t.width-1:Math.ceil(s),d=4*(a+e.width*i),h=4*(f+t.width*u),p=4*(l+t.width*u),v=4*(f+t.width*c),y=4*(l+t.width*c),g=s-f,b=o-u,m=n(t.data[h],t.data[p],t.data[v],t.data[y],g,b),e.data[d]=m,_=n(t.data[h+1],t.data[p+1],t.data[v+1],t.data[y+1],g,b),e.data[d+1]=_,w=n(t.data[h+2],t.data[p+2],t.data[v+2],t.data[y+2],g,b),e.data[d+2]=w,j=n(t.data[h+3],t.data[p+3],t.data[v+3],t.data[y+3],g,b),e.data[d+3]=j}(i,a,n),r.getContext("2d").putImageData(a,0,0),r}(n,Object.assign(e,{outputWidth:a})));var o=n.toDataURL(e.mimeType,e.quality);return"function"==typeof e.onScale&&e.onScale(o),function(t){for(var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return new Blob([n],{type:r})}(o)}function u(t){var e=document.createElement("canvas");return e.width=t.width/2,e.height=t.height/2,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}})),o=(n=a)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,u=(a.scaleImage,function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)});function c(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var s=function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function f(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function u(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(o,u)}c((n=n.apply(t,e||[])).next())})}function l(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function h(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=d(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,i){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,i,(e=t[r](e)).done,e.value)})}}}var p=Array.isArray,v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(t,e){return t(e={exports:{}},e.exports),e.exports}var g="object"==typeof v&&v&&v.Object===Object&&v,b="object"==typeof self&&self&&self.Object===Object&&self,m=g||b||Function("return this")(),_=m.Symbol,w=Object.prototype,j=w.hasOwnProperty,A=w.toString,S=_?_.toStringTag:void 0;var I=function(t){var e=j.call(t,S),r=t[S];try{t[S]=void 0;var n=!0}catch(t){}var i=A.call(t);return n&&(e?t[S]=r:delete t[S]),i},O=Object.prototype.toString;var E=function(t){return O.call(t)},P="[object Null]",F="[object Undefined]",x=_?_.toStringTag:void 0;var D=function(t){return null==t?void 0===t?F:P:x&&x in Object(t)?I(t):E(t)};var T=function(t){return null!=t&&"object"==typeof t},R="[object Symbol]";var k=function(t){return"symbol"==typeof t||T(t)&&D(t)==R},C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/;var U=function(t,e){if(p(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!k(t))||M.test(t)||!C.test(t)||null!=e&&t in Object(e)};var z=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},L="[object AsyncFunction]",W="[object Function]",B="[object GeneratorFunction]",N="[object Proxy]";var G,V=function(t){if(!z(t))return!1;var e=D(t);return e==W||e==B||e==L||e==N},q=m["__core-js_shared__"],H=(G=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"";var $=function(t){return!!H&&H in t},K=Function.prototype.toString;var Z=function(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,X=Function.prototype,Y=Object.prototype,Q=X.toString,tt=Y.hasOwnProperty,et=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var rt=function(t){return!(!z(t)||$(t))&&(V(t)?et:J).test(Z(t))};var nt=function(t,e){return null==t?void 0:t[e]};var it=function(t,e){var r=nt(t,e);return rt(r)?r:void 0},at=it(Object,"create");var ot=function(){this.__data__=at?at(null):{},this.size=0};var ut=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ct="__lodash_hash_undefined__",st=Object.prototype.hasOwnProperty;var ft=function(t){var e=this.__data__;if(at){var r=e[t];return r===ct?void 0:r}return st.call(e,t)?e[t]:void 0},lt=Object.prototype.hasOwnProperty;var dt=function(t){var e=this.__data__;return at?void 0!==e[t]:lt.call(e,t)},ht="__lodash_hash_undefined__";var pt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=at&&void 0===e?ht:e,this};function vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}vt.prototype.clear=ot,vt.prototype.delete=ut,vt.prototype.get=ft,vt.prototype.has=dt,vt.prototype.set=pt;var yt=vt;var gt=function(){this.__data__=[],this.size=0};var bt=function(t,e){return t===e||t!=t&&e!=e};var mt=function(t,e){for(var r=t.length;r--;)if(bt(t[r][0],e))return r;return-1},_t=Array.prototype.splice;var wt=function(t){var e=this.__data__,r=mt(e,t);return!(r<0||(r==e.length-1?e.pop():_t.call(e,r,1),--this.size,0))};var jt=function(t){var e=this.__data__,r=mt(e,t);return r<0?void 0:e[r][1]};var At=function(t){return mt(this.__data__,t)>-1};var St=function(t,e){var r=this.__data__,n=mt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function It(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}It.prototype.clear=gt,It.prototype.delete=wt,It.prototype.get=jt,It.prototype.has=At,It.prototype.set=St;var Ot=It,Et=it(m,"Map");var Pt=function(){this.size=0,this.__data__={hash:new yt,map:new(Et||Ot),string:new yt}};var Ft=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var xt=function(t,e){var r=t.__data__;return Ft(e)?r["string"==typeof e?"string":"hash"]:r.map};var Dt=function(t){var e=xt(this,t).delete(t);return this.size-=e?1:0,e};var Tt=function(t){return xt(this,t).get(t)};var Rt=function(t){return xt(this,t).has(t)};var kt=function(t,e){var r=xt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ct.prototype.clear=Pt,Ct.prototype.delete=Dt,Ct.prototype.get=Tt,Ct.prototype.has=Rt,Ct.prototype.set=kt;var Mt=Ct,Ut="Expected a function";function zt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Ut);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(zt.Cache||Mt),r}zt.Cache=Mt;var Lt=zt,Wt=500;var Bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/\\(\\)?/g,Gt=function(t){var e=Lt(t,function(t){return r.size===Wt&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Bt,function(t,r,n,i){e.push(n?i.replace(Nt,"$1"):r||t)}),e});var Vt=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},qt=1/0,Ht=_?_.prototype:void 0,$t=Ht?Ht.toString:void 0;var Kt=function t(e){if("string"==typeof e)return e;if(p(e))return Vt(e,t)+"";if(k(e))return $t?$t.call(e):"";var r=e+"";return"0"==r&&1/e==-qt?"-0":r};var Zt=function(t){return null==t?"":Kt(t)};var Jt=function(t,e){return p(t)?t:U(t,e)?[t]:Gt(Zt(t))},Xt=1/0;var Yt=function(t){if("string"==typeof t||k(t))return t;var e=t+"";return"0"==e&&1/t==-Xt?"-0":e};var Qt=function(t,e){for(var r=0,n=(e=Jt(e,t)).length;null!=t&&r<n;)t=t[Yt(e[r++])];return r&&r==n?t:void 0};var te=function(t,e,r){var n=null==t?void 0:Qt(t,e);return void 0===n?r:n},ee=function(){try{var t=it(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var re=function(t,e,r){"__proto__"==e&&ee?ee(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},ne=Object.prototype.hasOwnProperty;var ie=function(t,e,r){var n=t[e];ne.call(t,e)&&bt(n,r)&&(void 0!==r||e in t)||re(t,e,r)},ae=9007199254740991,oe=/^(?:0|[1-9]\d*)$/;var ue=function(t,e){var r=typeof t;return!!(e=null==e?ae:e)&&("number"==r||"symbol"!=r&&oe.test(t))&&t>-1&&t%1==0&&t<e};var ce=function(t,e,r,n){if(!z(t))return t;for(var i=-1,a=(e=Jt(e,t)).length,o=a-1,u=t;null!=u&&++i<a;){var c=Yt(e[i]),s=r;if(i!=o){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=z(f)?f:ue(e[i+1])?[]:{})}ie(u,c,s),u=u[c]}return t};var se=function(t,e,r){return null==t?t:ce(t,e,r)};var fe=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},le="[object Arguments]";var de=function(t){return T(t)&&D(t)==le},he=Object.prototype,pe=he.hasOwnProperty,ve=he.propertyIsEnumerable,ye=de(function(){return arguments}())?de:function(t){return T(t)&&pe.call(t,"callee")&&!ve.call(t,"callee")};var ge=function(){return!1},be=y(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?m.Buffer:void 0,a=(i?i.isBuffer:void 0)||ge;t.exports=a}),me=9007199254740991;var _e=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=me},we={};we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object Boolean]"]=we["[object DataView]"]=we["[object Date]"]=we["[object Error]"]=we["[object Function]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object WeakMap]"]=!1;var je=function(t){return T(t)&&_e(t.length)&&!!we[D(t)]};var Ae=function(t){return function(e){return t(e)}},Se=y(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&g.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}),Ie=Se&&Se.isTypedArray,Oe=Ie?Ae(Ie):je,Ee=Object.prototype.hasOwnProperty;var Pe=function(t,e){var r=p(t),n=!r&&ye(t),i=!r&&!n&&be(t),a=!r&&!n&&!i&&Oe(t),o=r||n||i||a,u=o?fe(t.length,String):[],c=u.length;for(var s in t)!e&&!Ee.call(t,s)||o&&("length"==s||i&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ue(s,c))||u.push(s);return u},Fe=Object.prototype;var xe=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Fe)};var De=function(t,e){return function(r){return t(e(r))}},Te=De(Object.keys,Object),Re=Object.prototype.hasOwnProperty;var ke=function(t){if(!xe(t))return Te(t);var e=[];for(var r in Object(t))Re.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Ce=function(t){return null!=t&&_e(t.length)&&!V(t)};var Me=function(t){return Ce(t)?Pe(t):ke(t)};var Ue=function(){if(!arguments.length)return[];var t=arguments[0];return p(t)?t:[t]};var ze=function(t){return t},Le=it(m,"WeakMap"),We=Le&&new Le,Be=We?function(t,e){return We.set(t,e),t}:ze,Ne=Object.create,Ge=function(){function t(){}return function(e){if(!z(e))return{};if(Ne)return Ne(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Ve=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Ge(t.prototype),n=t.apply(r,e);return z(n)?n:r}},qe=1;var He=function(t,e,r){var n=e&qe,i=Ve(t);return function e(){return(this&&this!==m&&this instanceof e?i:t).apply(n?r:this,arguments)}};var $e=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},Ke=Math.max;var Ze=function(t,e,r,n){for(var i=-1,a=t.length,o=r.length,u=-1,c=e.length,s=Ke(a-o,0),f=Array(c+s),l=!n;++u<c;)f[u]=e[u];for(;++i<o;)(l||i<a)&&(f[r[i]]=t[i]);for(;s--;)f[u++]=t[i++];return f},Je=Math.max;var Xe=function(t,e,r,n){for(var i=-1,a=t.length,o=-1,u=r.length,c=-1,s=e.length,f=Je(a-u,0),l=Array(f+s),d=!n;++i<f;)l[i]=t[i];for(var h=i;++c<s;)l[h+c]=e[c];for(;++o<u;)(d||i<a)&&(l[h+r[o]]=t[i++]);return l};var Ye=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n};var Qe=function(){},tr=4294967295;function er(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tr,this.__views__=[]}er.prototype=Ge(Qe.prototype),er.prototype.constructor=er;var rr=er;var nr=We?function(t){return We.get(t)}:function(){},ir={},ar=Object.prototype.hasOwnProperty;var or=function(t){for(var e=t.name+"",r=ir[e],n=ar.call(ir,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e};function ur(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}ur.prototype=Ge(Qe.prototype),ur.prototype.constructor=ur;var cr=ur;var sr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var fr=function(t){if(t instanceof rr)return t.clone();var e=new cr(t.__wrapped__,t.__chain__);return e.__actions__=sr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},lr=Object.prototype.hasOwnProperty;function dr(t){if(T(t)&&!p(t)&&!(t instanceof rr)){if(t instanceof cr)return t;if(lr.call(t,"__wrapped__"))return fr(t)}return new cr(t)}dr.prototype=Qe.prototype,dr.prototype.constructor=dr;var hr=dr;var pr=function(t){var e=or(t),r=hr[e];if("function"!=typeof r||!(e in rr.prototype))return!1;if(t===r)return!0;var n=nr(r);return!!n&&t===n[0]},vr=800,yr=16,gr=Date.now;var br=function(t){var e=0,r=0;return function(){var n=gr(),i=yr-(n-r);if(r=n,i>0){if(++e>=vr)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},mr=br(Be),_r=/\{\n\/\* \[wrapped with (.+)\] \*/,wr=/,? & /;var jr=function(t){var e=t.match(_r);return e?e[1].split(wr):[]},Ar=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Sr=function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Ar,"{\n/* [wrapped with "+e+"] */\n")};var Ir=function(t){return function(){return t}},Or=br(ee?function(t,e){return ee(t,"toString",{configurable:!0,enumerable:!1,value:Ir(e),writable:!0})}:ze);var Er=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var Pr=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1};var Fr=function(t){return t!=t};var xr=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1};var Dr=function(t,e,r){return e==e?xr(t,e,r):Pr(t,Fr,r)};var Tr=function(t,e){return!(null==t||!t.length)&&Dr(t,e,0)>-1},Rr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var kr=function(t,e){return Er(Rr,function(r){var n="_."+r[0];e&r[1]&&!Tr(t,n)&&t.push(n)}),t.sort()};var Cr=function(t,e,r){var n=e+"";return Or(t,Sr(n,kr(jr(n),r)))},Mr=1,Ur=2,zr=4,Lr=8,Wr=32,Br=64;var Nr=function(t,e,r,n,i,a,o,u,c,s){var f=e&Lr;e|=f?Wr:Br,(e&=~(f?Br:Wr))&zr||(e&=~(Mr|Ur));var l=[t,e,i,f?a:void 0,f?o:void 0,f?void 0:a,f?void 0:o,u,c,s],d=r.apply(void 0,l);return pr(t)&&mr(d,l),d.placeholder=n,Cr(d,t,e)};var Gr=function(t){return t.placeholder},Vr=Math.min;var qr=function(t,e){for(var r=t.length,n=Vr(e.length,r),i=sr(t);n--;){var a=e[n];t[n]=ue(a,r)?i[a]:void 0}return t},Hr="__lodash_placeholder__";var $r=function(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==Hr||(t[r]=Hr,a[i++]=r)}return a},Kr=1,Zr=2,Jr=8,Xr=16,Yr=128,Qr=512;var tn=function t(e,r,n,i,a,o,u,c,s,f){var l=r&Yr,d=r&Kr,h=r&Zr,p=r&(Jr|Xr),v=r&Qr,y=h?void 0:Ve(e);return function g(){for(var b=arguments.length,_=Array(b),w=b;w--;)_[w]=arguments[w];if(p)var j=Gr(g),A=Ye(_,j);if(i&&(_=Ze(_,i,a,p)),o&&(_=Xe(_,o,u,p)),b-=A,p&&b<f){var S=$r(_,j);return Nr(e,r,t,g.placeholder,n,_,S,c,s,f-b)}var I=d?n:this,O=h?I[e]:e;return b=_.length,c?_=qr(_,c):v&&b>1&&_.reverse(),l&&s<b&&(_.length=s),this&&this!==m&&this instanceof g&&(O=y||Ve(O)),O.apply(I,_)}};var en=function(t,e,r){var n=Ve(t);return function i(){for(var a=arguments.length,o=Array(a),u=a,c=Gr(i);u--;)o[u]=arguments[u];var s=a<3&&o[0]!==c&&o[a-1]!==c?[]:$r(o,c);return(a-=s.length)<r?Nr(t,e,tn,i.placeholder,void 0,o,s,void 0,void 0,r-a):$e(this&&this!==m&&this instanceof i?n:t,this,o)}},rn=1;var nn=function(t,e,r,n){var i=e&rn,a=Ve(t);return function e(){for(var o=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==m&&this instanceof e?a:t;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++o];return $e(l,i?r:this,f)}},an="__lodash_placeholder__",on=1,un=2,cn=4,sn=8,fn=128,ln=256,dn=Math.min;var hn=function(t,e){var r=t[1],n=e[1],i=r|n,a=i<(on|un|fn),o=n==fn&&r==sn||n==fn&&r==ln&&t[7].length<=e[8]||n==(fn|ln)&&e[7].length<=e[8]&&r==sn;if(!a&&!o)return t;n&on&&(t[2]=e[2],i|=r&on?0:cn);var u=e[3];if(u){var c=t[3];t[3]=c?Ze(c,u,e[4]):u,t[4]=c?$r(t[3],an):e[4]}return(u=e[5])&&(c=t[5],t[5]=c?Xe(c,u,e[6]):u,t[6]=c?$r(t[5],an):e[6]),(u=e[7])&&(t[7]=u),n&fn&&(t[8]=null==t[8]?e[8]:dn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},pn=NaN,vn=/^\s+|\s+$/g,yn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,bn=/^0o[0-7]+$/i,mn=parseInt;var _n=function(t){if("number"==typeof t)return t;if(k(t))return pn;if(z(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=z(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(vn,"");var r=gn.test(t);return r||bn.test(t)?mn(t.slice(2),r?2:8):yn.test(t)?pn:+t},wn=1/0,jn=17976931348623157e292;var An=function(t){return t?(t=_n(t))===wn||t===-wn?(t<0?-1:1)*jn:t==t?t:0:0===t?t:0};var Sn=function(t){var e=An(t),r=e%1;return e==e?r?e-r:e:0},In="Expected a function",On=1,En=2,Pn=8,Fn=16,xn=32,Dn=64,Tn=Math.max;var Rn=function(t,e,r,n,i,a,o,u){var c=e&En;if(!c&&"function"!=typeof t)throw new TypeError(In);var s=n?n.length:0;if(s||(e&=~(xn|Dn),n=i=void 0),o=void 0===o?o:Tn(Sn(o),0),u=void 0===u?u:Sn(u),s-=i?i.length:0,e&Dn){var f=n,l=i;n=i=void 0}var d=c?void 0:nr(t),h=[t,e,r,n,i,f,l,a,o,u];if(d&&hn(h,d),t=h[0],e=h[1],r=h[2],n=h[3],i=h[4],!(u=h[9]=void 0===h[9]?c?0:t.length:Tn(h[9]-s,0))&&e&(Pn|Fn)&&(e&=~(Pn|Fn)),e&&e!=On)p=e==Pn||e==Fn?en(t,e,u):e!=xn&&e!=(On|xn)||i.length?tn.apply(void 0,h):nn(t,e,r,n);else var p=He(t,e,r);return Cr((d?Be:mr)(p,h),t,e)},kn=8;function Cn(t,e,r){var n=Rn(t,kn,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return n.placeholder=Cn.placeholder,n}Cn.placeholder={};var Mn=Cn;var Un=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r};var zn=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),u=o.length;u--;){var c=o[t?u:++i];if(!1===r(a[c],c,a))break}return e}}();var Ln=function(t,e){return function(r,n){if(null==r)return r;if(!Ce(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}(function(t,e){return t&&zn(t,e,Me)});var Wn=function(){this.__data__=new Ot,this.size=0};var Bn=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Nn=function(t){return this.__data__.get(t)};var Gn=function(t){return this.__data__.has(t)},Vn=200;var qn=function(t,e){var r=this.__data__;if(r instanceof Ot){var n=r.__data__;if(!Et||n.length<Vn-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Mt(n)}return r.set(t,e),this.size=r.size,this};function Hn(t){var e=this.__data__=new Ot(t);this.size=e.size}Hn.prototype.clear=Wn,Hn.prototype.delete=Bn,Hn.prototype.get=Nn,Hn.prototype.has=Gn,Hn.prototype.set=qn;var $n=Hn,Kn="__lodash_hash_undefined__";var Zn=function(t){return this.__data__.set(t,Kn),this};var Jn=function(t){return this.__data__.has(t)};function Xn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Mt;++e<r;)this.add(t[e])}Xn.prototype.add=Xn.prototype.push=Zn,Xn.prototype.has=Jn;var Yn=Xn;var Qn=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var ti=function(t,e){return t.has(e)},ei=1,ri=2;var ni=function(t,e,r,n,i,a){var o=r&ei,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;var s=a.get(t);if(s&&a.get(e))return s==e;var f=-1,l=!0,d=r&ri?new Yn:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var h=t[f],p=e[f];if(n)var v=o?n(p,h,f,e,t,a):n(h,p,f,t,e,a);if(void 0!==v){if(v)continue;l=!1;break}if(d){if(!Qn(e,function(t,e){if(!ti(d,e)&&(h===t||i(h,t,r,n,a)))return d.push(e)})){l=!1;break}}else if(h!==p&&!i(h,p,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l},ii=m.Uint8Array;var ai=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r};var oi=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r},ui=1,ci=2,si="[object Boolean]",fi="[object Date]",li="[object Error]",di="[object Map]",hi="[object Number]",pi="[object RegExp]",vi="[object Set]",yi="[object String]",gi="[object Symbol]",bi="[object ArrayBuffer]",mi="[object DataView]",_i=_?_.prototype:void 0,wi=_i?_i.valueOf:void 0;var ji=function(t,e,r,n,i,a,o){switch(r){case mi:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case bi:return!(t.byteLength!=e.byteLength||!a(new ii(t),new ii(e)));case si:case fi:case hi:return bt(+t,+e);case li:return t.name==e.name&&t.message==e.message;case pi:case yi:return t==e+"";case di:var u=ai;case vi:var c=n&ui;if(u||(u=oi),t.size!=e.size&&!c)return!1;var s=o.get(t);if(s)return s==e;n|=ci,o.set(t,e);var f=ni(u(t),u(e),n,i,a,o);return o.delete(t),f;case gi:if(wi)return wi.call(t)==wi.call(e)}return!1};var Ai=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t};var Si=function(t,e,r){var n=e(t);return p(t)?n:Ai(n,r(t))};var Ii=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a};var Oi=function(){return[]},Ei=Object.prototype.propertyIsEnumerable,Pi=Object.getOwnPropertySymbols,Fi=Pi?function(t){return null==t?[]:(t=Object(t),Ii(Pi(t),function(e){return Ei.call(t,e)}))}:Oi;var xi=function(t){return Si(t,Me,Fi)},Di=1,Ti=Object.prototype.hasOwnProperty;var Ri=function(t,e,r,n,i,a){var o=r&Di,u=xi(t),c=u.length;if(c!=xi(e).length&&!o)return!1;for(var s=c;s--;){var f=u[s];if(!(o?f in e:Ti.call(e,f)))return!1}var l=a.get(t);if(l&&a.get(e))return l==e;var d=!0;a.set(t,e),a.set(e,t);for(var h=o;++s<c;){var p=t[f=u[s]],v=e[f];if(n)var y=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(!(void 0===y?p===v||i(p,v,r,n,a):y)){d=!1;break}h||(h="constructor"==f)}if(d&&!h){var g=t.constructor,b=e.constructor;g!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(t),a.delete(e),d},ki=it(m,"DataView"),Ci=it(m,"Promise"),Mi=it(m,"Set"),Ui=Z(ki),zi=Z(Et),Li=Z(Ci),Wi=Z(Mi),Bi=Z(Le),Ni=D;(ki&&"[object DataView]"!=Ni(new ki(new ArrayBuffer(1)))||Et&&"[object Map]"!=Ni(new Et)||Ci&&"[object Promise]"!=Ni(Ci.resolve())||Mi&&"[object Set]"!=Ni(new Mi)||Le&&"[object WeakMap]"!=Ni(new Le))&&(Ni=function(t){var e=D(t),r="[object Object]"==e?t.constructor:void 0,n=r?Z(r):"";if(n)switch(n){case Ui:return"[object DataView]";case zi:return"[object Map]";case Li:return"[object Promise]";case Wi:return"[object Set]";case Bi:return"[object WeakMap]"}return e});var Gi=Ni,Vi=1,qi="[object Arguments]",Hi="[object Array]",$i="[object Object]",Ki=Object.prototype.hasOwnProperty;var Zi=function(t,e,r,n,i,a){var o=p(t),u=p(e),c=o?Hi:Gi(t),s=u?Hi:Gi(e),f=(c=c==qi?$i:c)==$i,l=(s=s==qi?$i:s)==$i,d=c==s;if(d&&be(t)){if(!be(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new $n),o||Oe(t)?ni(t,e,r,n,i,a):ji(t,e,c,r,n,i,a);if(!(r&Vi)){var h=f&&Ki.call(t,"__wrapped__"),v=l&&Ki.call(e,"__wrapped__");if(h||v){var y=h?t.value():t,g=v?e.value():e;return a||(a=new $n),i(y,g,r,n,a)}}return!!d&&(a||(a=new $n),Ri(t,e,r,n,i,a))};var Ji=function t(e,r,n,i,a){return e===r||(null==e||null==r||!T(e)&&!T(r)?e!=e&&r!=r:Zi(e,r,n,i,t,a))},Xi=1,Yi=2;var Qi=function(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var u=r[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=r[i])[0],s=t[c],f=u[1];if(o&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new $n;if(n)var d=n(s,f,c,t,e,l);if(!(void 0===d?Ji(f,s,Xi|Yi,n,l):d))return!1}}return!0};var ta=function(t){return t==t&&!z(t)};var ea=function(t){for(var e=Me(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,ta(i)]}return e};var ra=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}};var na=function(t){var e=ea(t);return 1==e.length&&e[0][2]?ra(e[0][0],e[0][1]):function(r){return r===t||Qi(r,t,e)}};var ia=function(t,e){return null!=t&&e in Object(t)};var aa=function(t,e,r){for(var n=-1,i=(e=Jt(e,t)).length,a=!1;++n<i;){var o=Yt(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&_e(i)&&ue(o,i)&&(p(t)||ye(t))};var oa=function(t,e){return null!=t&&aa(t,e,ia)},ua=1,ca=2;var sa=function(t,e){return U(t)&&ta(e)?ra(Yt(t),e):function(r){var n=te(r,t);return void 0===n&&n===e?oa(r,t):Ji(e,n,ua|ca)}};var fa=function(t){return function(e){return null==e?void 0:e[t]}};var la=function(t){return function(e){return Qt(e,t)}};var da=function(t){return U(t)?fa(Yt(t)):la(t)};var ha=function(t){return"function"==typeof t?t:null==t?ze:"object"==typeof t?p(t)?sa(t[0],t[1]):na(t):da(t)};var pa=function(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r};var va=function(t,e,r){var n=p(t)?Un:pa,i=arguments.length<3;return n(t,ha(e),r,i,Ln)};var ya=function(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var u=e[a],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),i?re(r,u,c):ie(r,u,c)}return r};var ga=function(t,e){return t&&ya(e,Me(e),t)};var ba=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ma=Object.prototype.hasOwnProperty;var _a=function(t){if(!z(t))return ba(t);var e=xe(t),r=[];for(var n in t)("constructor"!=n||!e&&ma.call(t,n))&&r.push(n);return r};var wa=function(t){return Ce(t)?Pe(t,!0):_a(t)};var ja=function(t,e){return t&&ya(e,wa(e),t)},Aa=y(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?m.Buffer:void 0,a=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}});var Sa=function(t,e){return ya(t,Fi(t),e)},Ia=De(Object.getPrototypeOf,Object),Oa=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ai(e,Fi(t)),t=Ia(t);return e}:Oi;var Ea=function(t,e){return ya(t,Oa(t),e)};var Pa=function(t){return Si(t,wa,Oa)},Fa=Object.prototype.hasOwnProperty;var xa=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Fa.call(t,"index")&&(r.index=t.index,r.input=t.input),r};var Da=function(t){var e=new t.constructor(t.byteLength);return new ii(e).set(new ii(t)),e};var Ta=function(t,e){var r=e?Da(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ra=/\w*$/;var ka=function(t){var e=new t.constructor(t.source,Ra.exec(t));return e.lastIndex=t.lastIndex,e},Ca=_?_.prototype:void 0,Ma=Ca?Ca.valueOf:void 0;var Ua=function(t){return Ma?Object(Ma.call(t)):{}};var za=function(t,e){var r=e?Da(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},La="[object Boolean]",Wa="[object Date]",Ba="[object Map]",Na="[object Number]",Ga="[object RegExp]",Va="[object Set]",qa="[object String]",Ha="[object Symbol]",$a="[object ArrayBuffer]",Ka="[object DataView]",Za="[object Float32Array]",Ja="[object Float64Array]",Xa="[object Int8Array]",Ya="[object Int16Array]",Qa="[object Int32Array]",to="[object Uint8Array]",eo="[object Uint8ClampedArray]",ro="[object Uint16Array]",no="[object Uint32Array]";var io=function(t,e,r){var n=t.constructor;switch(e){case $a:return Da(t);case La:case Wa:return new n(+t);case Ka:return Ta(t,r);case Za:case Ja:case Xa:case Ya:case Qa:case to:case eo:case ro:case no:return za(t,r);case Ba:return new n;case Na:case qa:return new n(t);case Ga:return ka(t);case Va:return new n;case Ha:return Ua(t)}};var ao=function(t){return"function"!=typeof t.constructor||xe(t)?{}:Ge(Ia(t))},oo="[object Map]";var uo=function(t){return T(t)&&Gi(t)==oo},co=Se&&Se.isMap,so=co?Ae(co):uo,fo="[object Set]";var lo=function(t){return T(t)&&Gi(t)==fo},ho=Se&&Se.isSet,po=ho?Ae(ho):lo,vo=1,yo=2,go=4,bo="[object Arguments]",mo="[object Function]",_o="[object GeneratorFunction]",wo="[object Object]",jo={};jo[bo]=jo["[object Array]"]=jo["[object ArrayBuffer]"]=jo["[object DataView]"]=jo["[object Boolean]"]=jo["[object Date]"]=jo["[object Float32Array]"]=jo["[object Float64Array]"]=jo["[object Int8Array]"]=jo["[object Int16Array]"]=jo["[object Int32Array]"]=jo["[object Map]"]=jo["[object Number]"]=jo[wo]=jo["[object RegExp]"]=jo["[object Set]"]=jo["[object String]"]=jo["[object Symbol]"]=jo["[object Uint8Array]"]=jo["[object Uint8ClampedArray]"]=jo["[object Uint16Array]"]=jo["[object Uint32Array]"]=!0,jo["[object Error]"]=jo[mo]=jo["[object WeakMap]"]=!1;var Ao=function t(e,r,n,i,a,o){var u,c=r&vo,s=r&yo,f=r&go;if(n&&(u=a?n(e,i,a,o):n(e)),void 0!==u)return u;if(!z(e))return e;var l=p(e);if(l){if(u=xa(e),!c)return sr(e,u)}else{var d=Gi(e),h=d==mo||d==_o;if(be(e))return Aa(e,c);if(d==wo||d==bo||h&&!a){if(u=s||h?{}:ao(e),!c)return s?Ea(e,ja(u,e)):Sa(e,ga(u,e))}else{if(!jo[d])return a?e:{};u=io(e,d,c)}}o||(o=new $n);var v=o.get(e);if(v)return v;o.set(e,u),po(e)?e.forEach(function(i){u.add(t(i,r,n,i,e,o))}):so(e)&&e.forEach(function(i,a){u.set(a,t(i,r,n,a,e,o))});var y=f?s?Pa:xi:s?keysIn:Me,g=l?void 0:y(e);return Er(g||e,function(i,a){g&&(i=e[a=i]),ie(u,a,t(i,r,n,a,e,o))}),u},So=1,Io=4;var Oo=function(t){return Ao(t,So|Io)},Eo="[object Object]",Po=Function.prototype,Fo=Object.prototype,xo=Po.toString,Do=Fo.hasOwnProperty,To=xo.call(Object);var Ro=function(t){if(!T(t)||D(t)!=Eo)return!1;var e=Ia(t);if(null===e)return!0;var r=Do.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xo.call(r)==To},ko=y(function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,r=e.aliasToReal,n={};for(var i in r){var a=r[i];t.call(n,a)?n[a].push(i):n[a]=[i]}return n}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}}),Co=(ko.aliasToReal,ko.aryMethod,ko.aryRearg,ko.iterateeAry,ko.iterateeRearg,ko.methodRearg,ko.methodSpread,ko.mutate,ko.realToAlias,ko.remap,ko.skipFixed,ko.skipRearg,{}),Mo=Array.prototype.push;function Uo(t,e){return 2==e?function(e,r){return t(e,r)}:function(e){return t(e)}}function zo(t){for(var e=t?t.length:0,r=Array(e);e--;)r[e]=t[e];return r}function Lo(t,e){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var i=n[0]=e.apply(void 0,n);return t.apply(void 0,n),i}}}var Wo=function t(e,r,n,i){var a="function"==typeof r,o=r===Object(r);if(o&&(i=n,n=r,r=void 0),null==n)throw new TypeError;i||(i={});var u={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg},c=a?n:Co,s="curry"in i&&i.curry,f="fixed"in i&&i.fixed,l="rearg"in i&&i.rearg,d=a?n.runInContext():void 0,h=a?n:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},p=h.ary,v=h.assign,y=h.clone,g=h.curry,b=h.forEach,m=h.isArray,_=h.isError,w=h.isFunction,j=h.isWeakMap,A=h.keys,S=h.rearg,I=h.toInteger,O=h.toPath,E=A(ko.aryMethod),P={castArray:function(t){return function(){var e=arguments[0];return m(e)?t(zo(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],r=arguments[1],n=t(e,r),i=n.length;return u.cap&&"number"==typeof r?(r=r>2?r-2:1,i&&i<=r?n:Uo(n,r)):n}},mixin:function(t){return function(e){var r=this;if(!w(r))return t(r,Object(e));var n=[];return b(A(e),function(t){w(e[t])&&n.push([t,r.prototype[t]])}),t(r,Object(e)),b(n,function(t){var e=t[1];w(e)?r.prototype[t[0]]=e:delete r.prototype[t[0]]}),r}},nthArg:function(t){return function(e){var r=e<0?1:I(e)+1;return g(t(e),r)}},rearg:function(t){return function(e,r){var n=r?r.length:0;return g(t(e,r),n)}},runInContext:function(r){return function(n){return t(e,r(n),i)}}};function F(t,e){if(u.cap){var r=ko.iterateeRearg[t];if(r)return function(t,e){return k(t,function(t){var r=e.length;return function(t,e){return 2==e?function(e,r){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(S(Uo(t,r),e),r)})}(e,r);var n=!a&&ko.iterateeAry[t];if(n)return function(t,e){return k(t,function(t){return"function"==typeof t?Uo(t,e):t})}(e,n)}return e}function x(t,e,r){if(u.fixed&&(f||!ko.skipFixed[t])){var n=ko.methodSpread[t],i=n&&n.start;return void 0===i?p(e,r):function(t,e){return function(){for(var r=arguments.length,n=r-1,i=Array(r);r--;)i[r]=arguments[r];var a=i[e],o=i.slice(0,e);return a&&Mo.apply(o,a),e!=n&&Mo.apply(o,i.slice(e+1)),t.apply(this,o)}}(e,i)}return e}function D(t,e,r){return u.rearg&&r>1&&(l||!ko.skipRearg[t])?S(e,ko.methodRearg[t]||ko.aryRearg[r]):e}function T(t,e){for(var r=-1,n=(e=O(e)).length,i=n-1,a=y(Object(t)),o=a;null!=o&&++r<n;){var u=e[r],c=o[u];null==c||w(c)||_(c)||j(c)||(o[u]=y(r==i?c:Object(c))),o=o[u]}return a}function R(e,r){var n=ko.aliasToReal[e]||e,o=ko.remap[n]||n,u=i;return function(e){var i=a?d:h,c=a?d[o]:r,s=v(v({},u),e);return t(i,n,c,s)}}function k(t,e){return function(){var r=arguments.length;if(!r)return t();for(var n=Array(r);r--;)n[r]=arguments[r];var i=u.rearg?0:r-1;return n[i]=e(n[i]),t.apply(void 0,n)}}function C(t,e,r){var n,i=ko.aliasToReal[t]||t,a=e,o=P[i];return o?a=o(e):u.immutable&&(ko.mutate.array[i]?a=Lo(e,zo):ko.mutate.object[i]?a=Lo(e,function(t){return function(e){return t({},e)}}(e)):ko.mutate.set[i]&&(a=Lo(e,T))),b(E,function(t){return b(ko.aryMethod[t],function(e){if(i==e){var r=ko.methodSpread[i],o=r&&r.afterRearg;return n=o?x(i,D(i,a,t),t):D(i,x(i,a,t),t),n=function(t,e,r){return s||u.curry&&r>1?g(e,r):e}(0,n=F(i,n),t),!1}}),!n}),n||(n=a),n==e&&(n=s?g(n,1):function(){return e.apply(this,arguments)}),n.convert=R(i,e),n.placeholder=e.placeholder=r,n}if(!o)return C(r,n,c);var M=n,U=[];return b(E,function(t){b(ko.aryMethod[t],function(t){var e=M[ko.remap[t]||t];e&&U.push([t,C(t,e,M)])})}),b(A(M),function(t){var e=M[t];if("function"==typeof e){for(var r=U.length;r--;)if(U[r][0]==t)return;e.convert=R(t,e),U.push([t,e])}}),b(U,function(t){M[t[0]]=t[1]}),M.convert=function(t){return M.runInContext.convert(t)(void 0)},M.placeholder=M,b(A(M),function(t){b(ko.realToAlias[t]||[],function(e){M[e]=M[t]})}),M},Bo=128;var No=function(t,e,r){return e=r?void 0:e,e=t&&null==e?t.length:e,Rn(t,Bo,void 0,void 0,void 0,void 0,e)},Go=4;var Vo=function(t){return Ao(t,Go)},qo="[object DOMException]",Ho="[object Error]";var $o=function(t){if(!T(t))return!1;var e=D(t);return e==Ho||e==qo||"string"==typeof t.message&&"string"==typeof t.name&&!Ro(t)},Ko="[object WeakMap]";var Zo=function(t){return T(t)&&Gi(t)==Ko},Jo=1;var Xo=function(t){return ha("function"==typeof t?t:Ao(t,Jo))},Yo=_?_.isConcatSpreadable:void 0;var Qo=function(t){return p(t)||ye(t)||!!(Yo&&t&&t[Yo])};var tu=function t(e,r,n,i,a){var o=-1,u=e.length;for(n||(n=Qo),a||(a=[]);++o<u;){var c=e[o];r>0&&n(c)?r>1?t(c,r-1,n,i,a):Ai(a,c):i||(a[a.length]=c)}return a};var eu=function(t){return null!=t&&t.length?tu(t,1):[]},ru=Math.max;var nu=function(t,e,r){return e=ru(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=ru(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=n[i];return u[e]=r(o),$e(t,this,u)}};var iu=function(t){return Or(nu(t,void 0,eu),t+"")},au=iu(function(t,e){return Rn(t,256,void 0,void 0,void 0,e)});var ou=function(t){return p(t)?Vt(t,Yt):k(t)?[t]:sr(Gt(Zt(t)))},uu={ary:No,assign:ga,clone:Vo,curry:Mn,forEach:Er,isArray:p,isError:$o,isFunction:V,isWeakMap:Zo,iteratee:Xo,keys:ke,rearg:au,toInteger:Sn,toPath:ou};var cu=function(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],u=Qt(t,o);r(u,o)&&ce(a,Jt(o,t),u)}return a};var su=function(t,e){return cu(t,e,function(e,r){return oa(t,r)})},fu=function(t,e,r){return Wo(uu,t,e,r)}("pick",iu(function(t,e){return null==t?{}:su(t,e)}));fu.placeholder=Co;var lu=fu;void 0===Symbol.asyncIterator&&(Symbol.asyncIterator=Symbol.for("asyncIterator"));var du={};function hu(t){console.warn("[FLAMELINK] "+t)}var pu=Mn(function(t,e){var r;return(r={})[t]=e,r}),vu=Mn(function(t,e){return e[t]}),yu=function(t){function e(e,r,n){void 0===r&&(r="generic-error"),void 0===n&&(n=!1);var i=t.call(this,"\n"+e+"\n")||this;return i.code=r,i.showStackTrace=n,i.name="FlamelinkError",i.showStackTrace||(i.stack=null),i}return c(e,t),e}(Error),gu=function(t){function e(e){var r=t.call(this)||this;if(r.callback=e,r.state="PENDING",r.internalValue=null,r.chain=[],"function"!=typeof e)throw new Error("The callback must be a function");var n=function(t){if("PENDING"!==r.state)return r.internalValue;r.state="REJECTED",r.internalValue=t,f(r,void 0,void 0,function(){var e,r,n,i,a,o;return l(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=h(this.chain),u.label=1;case 1:return[4,e.next()];case 2:if((r=u.sent()).done)return[3,4];if("function"==typeof(n=r.value.onRejected))return[2,n(t)];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i=u.sent(),a={error:i},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return[2]}})})},i=function(t){if("PENDING"!==r.state)return r.internalValue;var e=te(t,"then",null);if("function"==typeof e)return e(i,n);r.state="FULFILLED",r.internalValue=t,f(r,void 0,void 0,function(){var e,r,n,i,a,o;return l(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=h(this.chain),u.label=1;case 1:return[4,e.next()];case 2:if((r=u.sent()).done)return[3,4];if("function"==typeof(n=r.value.onFulfilled))return[2,n(t)];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i=u.sent(),a={error:i},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return[2]}})})};try{setTimeout(function(){return e(i,n,r)},0)}catch(t){n(t)}return r}return c(e,t),e.prototype.then=function(t,e){return f(this,void 0,void 0,function(){return l(this,function(r){return"FULFILLED"===this.state&&"function"==typeof t?[2,t(this.internalValue)]:"REJECTED"===this.state&&"function"==typeof e?[2,e(this.internalValue)]:(this.chain.push({onFulfilled:t,onRejected:e}),[2])})})},e.prototype.catch=function(t){return f(this,void 0,void 0,function(){return l(this,function(e){return"FULFILLED"===this.state?[2]:"REJECTED"===this.state&&"function"==typeof t?[2,t(this.internalValue)]:(this.chain.push({onFulfilled:void 0,onRejected:t}),[2])})})},e}(function(){function t(){this.events={"*":[]}}return t.prototype.on=function(t,e){var r=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),function(){return r.off(t,e)}},t.prototype.off=function(t,e){"object"==typeof this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))},t.prototype.offAll=function(){var t=this;Object.keys(this.events).forEach(function(e){return t.events[e]=[]})},t.prototype.emit=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];"object"==typeof this.events[t]&&this.events[t].slice().forEach(function(t){return t.apply(e,r)}),this.events["*"].slice().forEach(function(n){return n.apply(e,[t].concat(r))})},t.prototype.once=function(t,e){var r=this,n=this.on(t,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n(),e.apply(r,t)});return n},t}()),bu=function(t){return t.usesAdminApp?te(t,"firebaseApp.firebaseInternals_.firebase_.storage"):te(t,"firebaseApp.firebase_.storage")},mu=function(t){return"cf"===t.dbType?te(function(t){return t.usesAdminApp?te(t,"firebaseApp.firebaseInternals_.firebase_.firestore"):te(t,"firebaseApp.firebase_.firestore")}(t),"Timestamp.now",function(){return(new Date).toISOString()})():(new Date).toISOString()},_u=function(t){var e=function(t){if("undefined"==typeof process||"test"!==process.env.NODE_ENV)return t.usesAdminApp?te(t,"firebaseApp.firebaseInternals_.firebase_.auth"):te(t,"firebaseApp.firebase_.auth")}(t);return"function"!=typeof e?"UNKNOWN":te(e(),"currentUser.uid","UNKNOWN")},wu=["startAt","startAfter","endAt","endBefore"],ju=function(t,e){if(!Me(e).length)return t;if(e.orderBy){if("string"==typeof e.orderBy)return t.orderBy?t.orderBy(e.orderBy,"asc"):t;if(Ro(e.orderBy)&&e.orderBy.field)return t.orderBy?t.orderBy(e.orderBy.field,e.orderBy.order||"asc"):t;if(Array.isArray(e.orderBy))return e.orderBy.reduce(function(t,e){return ju(t,{orderBy:e})},t);hu('Ignored invalid "orderBy" parameters supplied.')}return t},Au=Mn(function(t,e){if(!e||!p(t))return e;var r=lu(t);return p(e)?va(e,function(t,e){return t.concat(r(e))},[]):Ro(e)?va(e,function(t,e,n){var i;return Object.assign(t,((i={})[n]=r(e),i))},{}):e}),Su=function(t){return"object"==typeof t&&"function"==typeof te(t,"get")},Iu=Mn(function(t,e,r){var n=e||{},i=n.idProperty,a=void 0===i?"id":i,o=n.parentProperty,u=void 0===o?"parentId":o,c=p(r)?r:Me(r).map(function(t){return r[t]});if(!p(c))throw new yu('"formatStructure" should be called with an array of items');if("nested"===t||"tree"===t){var f=function(t,e){return void 0===e&&(e=0),t.map(function(t){return s({},t,{children:c.filter(function(e){return te(e,u)===te(t,a)})})}).filter(function(t){return te(t,u,0)===e}).map(function(t){return 0===t.children.length?t:s({},t,{children:f(t.children,te(t,a))})})};return f(c,0)}return c}),Ou=function(t,e){var r=function(t,e){return Me(e).length&&Array.isArray(e.filters)?e.filters.reduce(function(t,e){return Array.isArray(e)?t.where?t.where.apply(t,e):t:(hu('The following invalid "filter" clause has been ignored: '+JSON.stringify(e)),t)},t):t}(t,e);return function(t,e){if(!Me(e).length)return t;var r=wu.reduce(function(t,r){return void 0!==e[r]&&t[r]?t[r].apply(t,Ue(e[r])):t},t);return te(e,"limit")&&(r=t.limit?t.limit(e.limit):t),r}(ju(r,e),e)},Eu=function(t){return void 0===du.prepPopulateFields&&(du.prepPopulateFields=Lt(function(t){return t&&p(t)?t.map(function(t){return"string"==typeof t?{field:t}:t}):[]},function(t){return JSON.stringify(t)})),du.prepPopulateFields(t)},Pu=Mn(function(t,e,r){return f(void 0,void 0,void 0,function(){var n,i,a,o=this;return l(this,function(u){return Ro(r)?(n=te(t,"modules.storage"),i=function(t){return f(o,void 0,void 0,function(){var r;return l(this,function(i){switch(i.label){case 0:return n?[4,n.getURL({fileId:t.id,size:e.size})]:(hu('The Flamelink "storage" module is not available. Please make sure it is imported and try again.'),[2,t]);case 1:return r=i.sent(),[2,se(t,"url",r)]}})})},[2,(a=function(t){return f(o,void 0,void 0,function(){var e=this;return l(this,function(r){switch(r.label){case 0:return Array.isArray(t)?[2,Promise.all(t.map(function(t){return f(e,void 0,void 0,function(){return l(this,function(e){return[2,a(t)]})})}))]:Ro(t)?(n=t).hasOwnProperty("file")&&n.hasOwnProperty("id")&&n.hasOwnProperty("contentType")&&n.hasOwnProperty("folderId")?[2,i(t)]:[4,Promise.all(Me(t).map(function(r){return f(e,void 0,void 0,function(){var e;return l(this,function(n){switch(n.label){case 0:return e={propKey:r},[4,a(t[r])];case 1:return[2,(e.propValue=n.sent(),e)]}})})}))]:[3,2];case 1:return[2,r.sent().reduce(function(t,e){return se(t,e.propKey,e.propValue)},s({},t))];case 2:return[2,t]}var n})})})(r)]):[2,r]})})}),Fu=Mn(function(t,r,n){return f(void 0,void 0,void 0,function(){var i,a,o,u=this;return l(this,function(c){switch(c.label){case 0:return Ro(n)&&te(r,"populate")&&(i=te(t,"services.firestore"))?(a=!0===r.populate,o=[],p(r.populate)?o=Eu(r.populate):a&&(o=Eu(Object.keys(n))),[4,Promise.all(o.map(function(r){return f(u,void 0,void 0,function(){var o,u,c,s,d,h,p,v,y=this;return l(this,function(g){switch(g.label){case 0:return o=r.field,u=r.populate,c=r.subFields,s=te(n,o),d=Pu(t,r),h=Fu(t,{populate:!!a||(Array.isArray(c)?c:u)}),p=function(t){return f(y,void 0,void 0,function(){var r,n,a=this;return l(this,function(o){switch(o.label){case 0:return[4,i.doc(t.path).get()];case 1:return"function"==typeof(r=o.sent()).forEach?(n=[],r.forEach(function(t){return f(a,void 0,void 0,function(){return l(this,function(e){return[2,n.push(h(t.data()))]})})}),[2,Promise.all(n)]):[4,e(h,d)(r.data())];case 2:return[2,o.sent()]}})})},v=s,Array.isArray(s)?[4,Promise.all(s.map(function(t){return f(y,void 0,void 0,function(){return l(this,function(e){return Su(t)?[2,p(t)]:[2,h(t)]})})}))]:[3,2];case 1:return v=g.sent(),[3,6];case 2:return Ro(s)?[4,h(s)]:[3,4];case 3:return v=g.sent(),[3,6];case 4:return Su(s)?[4,p(s)]:[3,6];case 5:v=g.sent(),g.label=6;case 6:return[2,{fieldKey:o,fieldValue:v}]}})})}))]):[2,n];case 1:return[2,c.sent().reduce(function(t,e){return se(t,e.fieldKey,e.fieldValue)},s({},n))]}})})}),xu=(Mn(function(t,e,r){return f(void 0,void 0,void 0,function(){var n=this;return l(this,function(i){switch(i.label){case 0:return Array.isArray(r)?[2,Promise.all(r.map(function(r){return f(n,void 0,void 0,function(){return l(this,function(n){return[2,Fu(t,e,r)]})})}))]:Ro(r)?[4,Promise.all(Me(r).map(function(i){return f(n,void 0,void 0,function(){return l(this,function(n){return[2,Fu(t,e,r[i])]})})}))]:[3,2];case 1:return[2,i.sent().reduce(function(t,e){return t.then(function(t){return f(n,void 0,void 0,function(){var r;return l(this,function(n){return[2,Object.assign(t,(r={},r[te(e,"_fl_meta_.fl_id",e.id)]=e,r))]})})})},Promise.resolve({}))];case 2:return[2,r]}})})}),Mn(function(t,e){return{start:function(){return e.reduce(function(e,r,n){return e.then(function(e){return f(void 0,void 0,void 0,function(){var i;return l(this,function(a){switch(a.label){case 0:return[4,t(r,n)];case 1:return i=a.sent(),[2,e.concat([i])]}})})})},Promise.resolve([]))}}}),function(t,e){return f(void 0,void 0,void 0,function(){var r=this;return l(this,function(n){return[2,e.reduce(function(e,n){return f(r,void 0,void 0,function(){var r=this;return l(this,function(i){switch(n.type){case"media":return[2,e.then(function(t){return t.concat({field:n.key})})];case"select-relational":case"tree-relational":return[2,e.then(function(e){return f(r,void 0,void 0,function(){var r,i,a,o,u;return l(this,function(c){switch(c.label){case 0:return i=(r=e).concat,a={field:n.key},o=xu,u=[t],[4,t.getFields({schemaKey:n.relation})];case 1:return[4,o.apply(void 0,u.concat([c.sent()]))];case 2:return[2,i.apply(r,[(a.populate=c.sent(),a)])]}})})})];case"fieldset":case"repeater":return[2,e.then(function(e){return f(r,void 0,void 0,function(){var r,i,a;return l(this,function(o){switch(o.label){case 0:return i=(r=e).concat,a={field:n.key},[4,xu(t,n.options)];case 1:return[2,i.apply(r,[(a.subFields=o.sent(),a)])]}})})})];default:return[2,e]}return[2]})})},Promise.resolve([]))]})})}),Du=Mn(function(t,r,n,i){return f(void 0,void 0,void 0,function(){var a,o,u,c,d,h,v,y,g=this;return l(this,function(b){switch(b.label){case 0:if(!i)return[2,i];if(0===(a=Me(i)).length)throw new yu('"populateEntry" should be called with an object of objects');return o=t.modules.content,u=t.modules.schemas,c=t.modules.storage,d=Mn(function(r,n,i,a){return f(g,void 0,void 0,function(){var u,h,v=this;return l(this,function(y){switch(y.label){case 0:return i[0]&&(u=function(t,e){return t.reduce(function(t,r){var n=e&&e.find(function(t){return t.key===r.field});return n?n.relation?t.concat([s({},r,{contentType:n.relation,populateType:"relational"})]):"media"===n.type?t.concat([s({},r,{populateType:"media"})]):"repeater"===n.type&&p(r.subFields)?t.concat([s({},r,{populateType:"repeater"})]):"fieldset"===n.type&&p(r.subFields)?t.concat([s({},r,{populateType:"fieldset"})]):t:t},[])}(i,n))[0]?[4,Promise.all(u.map(function(i){return f(v,void 0,void 0,function(){var u,h,v,y,g,b,m,_,w,j,A=this;return l(this,function(S){switch(S.label){case 0:switch(u=i.field,h=i.subFields,v=i.contentType,y=i.populateType,y){case"media":return[3,1];case"relational":return[3,2];case"repeater":return[3,3];case"fieldset":return[3,4]}return[3,7];case 1:if(r[a]&&r[a].hasOwnProperty(u)){if(g=r[a][u]||[],!p(g))throw new yu('The "'+u+'" field does not seem to be a valid media property.');return[2,Promise.all(g.map(function(r){return f(A,void 0,void 0,function(){var n,a,o,u,f;return l(this,function(l){switch(l.label){case 0:return n=Au(i.fields),a=Du(t,v,i.populate),[4,Promise.all([c.getFile(s({},i,{fileId:r})),c.getURL(s({},i,{fileId:r}))])];case 1:return o=l.sent(),u=o[0],f=o[1],[4,e(vu(r),a,n,pu(r))(s({},u,{url:f}))];case 2:return[2,l.sent()]}})})}))]}return[2,null];case 2:return r[a]&&r[a].hasOwnProperty(u)?(b=r[a][u],b=Ue(b),[2,Promise.all(b.map(function(t){return f(A,void 0,void 0,function(){return l(this,function(e){return[2,o.get(s({},i,{schemaKey:v,entryId:t}))]})})}))]):[2,null];case 3:if(r[a]&&r[a].hasOwnProperty(u)){if(m=r[a][u]||[],!p(m))throw new yu('The "'+u+'" field does not seem to be a valid repeater field.');return _=n&&n.find(function(t){return t.key===u}),[2,Promise.all(m.map(function(t,e){return f(A,void 0,void 0,function(){var r,n;return l(this,function(i){switch(i.label){case 0:return r=e.toString(),[4,d(pu(r,t),_.options||[],Eu(h),r)];case 1:return n=i.sent(),[2,vu(r,n)]}})})}))]}return[2,null];case 4:if(!r[a]||!r[a].hasOwnProperty(u))return[3,6];if(w=r[a][u],!Ro(w))throw new yu('The "'+u+'" field does not seem to be a valid fieldset field.');return j=n&&n.find(function(t){return t.key===u}),[4,Promise.all(Me(w).map(function(t,e){return f(A,void 0,void 0,function(){var r,n,i;return l(this,function(a){switch(a.label){case 0:return r=e.toString(),[4,d(pu(r,(i={},i[t]=w[t],i)),j.options||[],Eu(h),r)];case 1:return n=a.sent(),[2,vu(r,n)]}})})}))];case 5:return[2,S.sent().reduce(function(t,e){return Object.assign(t,e)},{})];case 6:return[2,null];case 7:return[2,r[a][u]]}})})}))]:[2,r];case 1:return h=y.sent(),[2,u.reduce(function(t,e,r){var n=e.field;return t[a]&&t[a].hasOwnProperty(n)&&(t[a][n]=h[r]),t},Oo(r))]}})})}),[4,u.getFields({schemaKey:r})];case 1:return h=b.sent(),!0!==n?[3,3]:[4,xu(u,h)];case 2:n=b.sent(),b.label=3;case 3:return v=Eu(n),[4,Promise.all(a.map(d(i,h,v)))];case 4:return y=b.sent(),[2,a.reduce(function(t,e,r){var n;return Object.assign(t,((n={})[e]=y[r][e],n))},{})]}})})}),Tu=(Mn(function(t,e,r,n){return f(void 0,void 0,void 0,function(){var i=this;return l(this,function(a){return Array.isArray(n)?[2,Promise.all(n.map(function(n){return f(i,void 0,void 0,function(){return l(this,function(i){return[2,Du(t,e,r,n)]})})}))]:[2,[]]})})}),function(){return(Tu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)});function Ru(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function ku(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function u(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(o,u)}c((n=n.apply(t,e||[])).next())})}function Cu(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var Mu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Uu(t,e){return t(e={exports:{}},e.exports),e.exports}var zu="object"==typeof Mu&&Mu&&Mu.Object===Object&&Mu,Lu="object"==typeof self&&self&&self.Object===Object&&self,Wu=zu||Lu||Function("return this")(),Bu=Wu.Symbol,Nu=Object.prototype,Gu=Nu.hasOwnProperty,Vu=Nu.toString,qu=Bu?Bu.toStringTag:void 0;var Hu=function(t){var e=Gu.call(t,qu),r=t[qu];try{t[qu]=void 0;var n=!0}catch(t){}var i=Vu.call(t);return n&&(e?t[qu]=r:delete t[qu]),i},$u=Object.prototype.toString;var Ku=function(t){return $u.call(t)},Zu="[object Null]",Ju="[object Undefined]",Xu=Bu?Bu.toStringTag:void 0;var Yu=function(t){return null==t?void 0===t?Ju:Zu:Xu&&Xu in Object(t)?Hu(t):Ku(t)};var Qu=function(t,e){return function(r){return t(e(r))}},tc=Qu(Object.getPrototypeOf,Object);var ec=function(t){return null!=t&&"object"==typeof t},rc="[object Object]",nc=Function.prototype,ic=Object.prototype,ac=nc.toString,oc=ic.hasOwnProperty,uc=ac.call(Object);var cc=function(t){if(!ec(t)||Yu(t)!=rc)return!1;var e=tc(t);if(null===e)return!0;var r=oc.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&ac.call(r)==uc};var sc=function(){this.__data__=[],this.size=0};var fc=function(t,e){return t===e||t!=t&&e!=e};var lc=function(t,e){for(var r=t.length;r--;)if(fc(t[r][0],e))return r;return-1},dc=Array.prototype.splice;var hc=function(t){var e=this.__data__,r=lc(e,t);return!(r<0||(r==e.length-1?e.pop():dc.call(e,r,1),--this.size,0))};var pc=function(t){var e=this.__data__,r=lc(e,t);return r<0?void 0:e[r][1]};var vc=function(t){return lc(this.__data__,t)>-1};var yc=function(t,e){var r=this.__data__,n=lc(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function gc(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}gc.prototype.clear=sc,gc.prototype.delete=hc,gc.prototype.get=pc,gc.prototype.has=vc,gc.prototype.set=yc;var bc=gc;var mc=function(){this.__data__=new bc,this.size=0};var _c=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var wc=function(t){return this.__data__.get(t)};var jc=function(t){return this.__data__.has(t)};var Ac=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Sc="[object AsyncFunction]",Ic="[object Function]",Oc="[object GeneratorFunction]",Ec="[object Proxy]";var Pc=function(t){if(!Ac(t))return!1;var e=Yu(t);return e==Ic||e==Oc||e==Sc||e==Ec},Fc=Wu["__core-js_shared__"],xc=function(){var t=/[^.]+$/.exec(Fc&&Fc.keys&&Fc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var Dc=function(t){return!!xc&&xc in t},Tc=Function.prototype.toString;var Rc=function(t){if(null!=t){try{return Tc.call(t)}catch(t){}try{return t+""}catch(t){}}return""},kc=/^\[object .+?Constructor\]$/,Cc=Function.prototype,Mc=Object.prototype,Uc=Cc.toString,zc=Mc.hasOwnProperty,Lc=RegExp("^"+Uc.call(zc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Wc=function(t){return!(!Ac(t)||Dc(t))&&(Pc(t)?Lc:kc).test(Rc(t))};var Bc=function(t,e){return null==t?void 0:t[e]};var Nc=function(t,e){var r=Bc(t,e);return Wc(r)?r:void 0},Gc=Nc(Wu,"Map"),Vc=Nc(Object,"create");var qc=function(){this.__data__=Vc?Vc(null):{},this.size=0};var Hc=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$c="__lodash_hash_undefined__",Kc=Object.prototype.hasOwnProperty;var Zc=function(t){var e=this.__data__;if(Vc){var r=e[t];return r===$c?void 0:r}return Kc.call(e,t)?e[t]:void 0},Jc=Object.prototype.hasOwnProperty;var Xc=function(t){var e=this.__data__;return Vc?void 0!==e[t]:Jc.call(e,t)},Yc="__lodash_hash_undefined__";var Qc=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Vc&&void 0===e?Yc:e,this};function ts(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ts.prototype.clear=qc,ts.prototype.delete=Hc,ts.prototype.get=Zc,ts.prototype.has=Xc,ts.prototype.set=Qc;var es=ts;var rs=function(){this.size=0,this.__data__={hash:new es,map:new(Gc||bc),string:new es}};var ns=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var is=function(t,e){var r=t.__data__;return ns(e)?r["string"==typeof e?"string":"hash"]:r.map};var as=function(t){var e=is(this,t).delete(t);return this.size-=e?1:0,e};var os=function(t){return is(this,t).get(t)};var us=function(t){return is(this,t).has(t)};var cs=function(t,e){var r=is(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ss(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ss.prototype.clear=rs,ss.prototype.delete=as,ss.prototype.get=os,ss.prototype.has=us,ss.prototype.set=cs;var fs=ss,ls=200;var ds=function(t,e){var r=this.__data__;if(r instanceof bc){var n=r.__data__;if(!Gc||n.length<ls-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new fs(n)}return r.set(t,e),this.size=r.size,this};function hs(t){var e=this.__data__=new bc(t);this.size=e.size}hs.prototype.clear=mc,hs.prototype.delete=_c,hs.prototype.get=wc,hs.prototype.has=jc,hs.prototype.set=ds;var ps=hs,vs="__lodash_hash_undefined__";var ys=function(t){return this.__data__.set(t,vs),this};var gs=function(t){return this.__data__.has(t)};function bs(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new fs;++e<r;)this.add(t[e])}bs.prototype.add=bs.prototype.push=ys,bs.prototype.has=gs;var ms=bs;var _s=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var ws=function(t,e){return t.has(e)},js=1,As=2;var Ss=function(t,e,r,n,i,a){var o=r&js,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;var s=a.get(t);if(s&&a.get(e))return s==e;var f=-1,l=!0,d=r&As?new ms:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var h=t[f],p=e[f];if(n)var v=o?n(p,h,f,e,t,a):n(h,p,f,t,e,a);if(void 0!==v){if(v)continue;l=!1;break}if(d){if(!_s(e,function(t,e){if(!ws(d,e)&&(h===t||i(h,t,r,n,a)))return d.push(e)})){l=!1;break}}else if(h!==p&&!i(h,p,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l},Is=Wu.Uint8Array;var Os=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r};var Es=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r},Ps=1,Fs=2,xs="[object Boolean]",Ds="[object Date]",Ts="[object Error]",Rs="[object Map]",ks="[object Number]",Cs="[object RegExp]",Ms="[object Set]",Us="[object String]",zs="[object Symbol]",Ls="[object ArrayBuffer]",Ws="[object DataView]",Bs=Bu?Bu.prototype:void 0,Ns=Bs?Bs.valueOf:void 0;var Gs=function(t,e,r,n,i,a,o){switch(r){case Ws:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ls:return!(t.byteLength!=e.byteLength||!a(new Is(t),new Is(e)));case xs:case Ds:case ks:return fc(+t,+e);case Ts:return t.name==e.name&&t.message==e.message;case Cs:case Us:return t==e+"";case Rs:var u=Os;case Ms:var c=n&Ps;if(u||(u=Es),t.size!=e.size&&!c)return!1;var s=o.get(t);if(s)return s==e;n|=Fs,o.set(t,e);var f=Ss(u(t),u(e),n,i,a,o);return o.delete(t),f;case zs:if(Ns)return Ns.call(t)==Ns.call(e)}return!1};var Vs=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},qs=Array.isArray;var Hs=function(t,e,r){var n=e(t);return qs(t)?n:Vs(n,r(t))};var $s=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a};var Ks=function(){return[]},Zs=Object.prototype.propertyIsEnumerable,Js=Object.getOwnPropertySymbols,Xs=Js?function(t){return null==t?[]:(t=Object(t),$s(Js(t),function(e){return Zs.call(t,e)}))}:Ks;var Ys=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},Qs="[object Arguments]";var tf=function(t){return ec(t)&&Yu(t)==Qs},ef=Object.prototype,rf=ef.hasOwnProperty,nf=ef.propertyIsEnumerable,af=tf(function(){return arguments}())?tf:function(t){return ec(t)&&rf.call(t,"callee")&&!nf.call(t,"callee")};var of=function(){return!1},uf=Uu(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?Wu.Buffer:void 0,a=(i?i.isBuffer:void 0)||of;t.exports=a}),cf=9007199254740991,sf=/^(?:0|[1-9]\d*)$/;var ff=function(t,e){var r=typeof t;return!!(e=null==e?cf:e)&&("number"==r||"symbol"!=r&&sf.test(t))&&t>-1&&t%1==0&&t<e},lf=9007199254740991;var df=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=lf},hf={};hf["[object Float32Array]"]=hf["[object Float64Array]"]=hf["[object Int8Array]"]=hf["[object Int16Array]"]=hf["[object Int32Array]"]=hf["[object Uint8Array]"]=hf["[object Uint8ClampedArray]"]=hf["[object Uint16Array]"]=hf["[object Uint32Array]"]=!0,hf["[object Arguments]"]=hf["[object Array]"]=hf["[object ArrayBuffer]"]=hf["[object Boolean]"]=hf["[object DataView]"]=hf["[object Date]"]=hf["[object Error]"]=hf["[object Function]"]=hf["[object Map]"]=hf["[object Number]"]=hf["[object Object]"]=hf["[object RegExp]"]=hf["[object Set]"]=hf["[object String]"]=hf["[object WeakMap]"]=!1;var pf=function(t){return ec(t)&&df(t.length)&&!!hf[Yu(t)]};var vf=function(t){return function(e){return t(e)}},yf=Uu(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&zu.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}),gf=yf&&yf.isTypedArray,bf=gf?vf(gf):pf,mf=Object.prototype.hasOwnProperty;var _f=function(t,e){var r=qs(t),n=!r&&af(t),i=!r&&!n&&uf(t),a=!r&&!n&&!i&&bf(t),o=r||n||i||a,u=o?Ys(t.length,String):[],c=u.length;for(var s in t)!e&&!mf.call(t,s)||o&&("length"==s||i&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ff(s,c))||u.push(s);return u},wf=Object.prototype;var jf=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wf)},Af=Qu(Object.keys,Object),Sf=Object.prototype.hasOwnProperty;var If=function(t){if(!jf(t))return Af(t);var e=[];for(var r in Object(t))Sf.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Of=function(t){return null!=t&&df(t.length)&&!Pc(t)};var Ef=function(t){return Of(t)?_f(t):If(t)};var Pf=function(t){return Hs(t,Ef,Xs)},Ff=1,xf=Object.prototype.hasOwnProperty;var Df=function(t,e,r,n,i,a){var o=r&Ff,u=Pf(t),c=u.length;if(c!=Pf(e).length&&!o)return!1;for(var s=c;s--;){var f=u[s];if(!(o?f in e:xf.call(e,f)))return!1}var l=a.get(t);if(l&&a.get(e))return l==e;var d=!0;a.set(t,e),a.set(e,t);for(var h=o;++s<c;){var p=t[f=u[s]],v=e[f];if(n)var y=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(!(void 0===y?p===v||i(p,v,r,n,a):y)){d=!1;break}h||(h="constructor"==f)}if(d&&!h){var g=t.constructor,b=e.constructor;g!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(d=!1)}return a.delete(t),a.delete(e),d},Tf=Nc(Wu,"DataView"),Rf=Nc(Wu,"Promise"),kf=Nc(Wu,"Set"),Cf=Nc(Wu,"WeakMap"),Mf=Rc(Tf),Uf=Rc(Gc),zf=Rc(Rf),Lf=Rc(kf),Wf=Rc(Cf),Bf=Yu;(Tf&&"[object DataView]"!=Bf(new Tf(new ArrayBuffer(1)))||Gc&&"[object Map]"!=Bf(new Gc)||Rf&&"[object Promise]"!=Bf(Rf.resolve())||kf&&"[object Set]"!=Bf(new kf)||Cf&&"[object WeakMap]"!=Bf(new Cf))&&(Bf=function(t){var e=Yu(t),r="[object Object]"==e?t.constructor:void 0,n=r?Rc(r):"";if(n)switch(n){case Mf:return"[object DataView]";case Uf:return"[object Map]";case zf:return"[object Promise]";case Lf:return"[object Set]";case Wf:return"[object WeakMap]"}return e});var Nf=Bf,Gf=1,Vf="[object Arguments]",qf="[object Array]",Hf="[object Object]",$f=Object.prototype.hasOwnProperty;var Kf=function(t,e,r,n,i,a){var o=qs(t),u=qs(e),c=o?qf:Nf(t),s=u?qf:Nf(e),f=(c=c==Vf?Hf:c)==Hf,l=(s=s==Vf?Hf:s)==Hf,d=c==s;if(d&&uf(t)){if(!uf(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new ps),o||bf(t)?Ss(t,e,r,n,i,a):Gs(t,e,c,r,n,i,a);if(!(r&Gf)){var h=f&&$f.call(t,"__wrapped__"),p=l&&$f.call(e,"__wrapped__");if(h||p){var v=h?t.value():t,y=p?e.value():e;return a||(a=new ps),i(v,y,r,n,a)}}return!!d&&(a||(a=new ps),Df(t,e,r,n,i,a))};var Zf=function t(e,r,n,i,a){return e===r||(null==e||null==r||!ec(e)&&!ec(r)?e!=e&&r!=r:Kf(e,r,n,i,t,a))},Jf=1,Xf=2;var Yf=function(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var u=r[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=r[i])[0],s=t[c],f=u[1];if(o&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new ps;if(n)var d=n(s,f,c,t,e,l);if(!(void 0===d?Zf(f,s,Jf|Xf,n,l):d))return!1}}return!0};var Qf=function(t){return t==t&&!Ac(t)};var tl=function(t){for(var e=Ef(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Qf(i)]}return e};var el=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}};var rl=function(t){var e=tl(t);return 1==e.length&&e[0][2]?el(e[0][0],e[0][1]):function(r){return r===t||Yf(r,t,e)}},nl="[object Symbol]";var il=function(t){return"symbol"==typeof t||ec(t)&&Yu(t)==nl},al=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ol=/^\w*$/;var ul=function(t,e){if(qs(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!il(t))||ol.test(t)||!al.test(t)||null!=e&&t in Object(e)},cl="Expected a function";function sl(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(cl);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(sl.Cache||fs),r}sl.Cache=fs;var fl=sl,ll=500;var dl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hl=/\\(\\)?/g,pl=function(t){var e=fl(t,function(t){return r.size===ll&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(dl,function(t,r,n,i){e.push(n?i.replace(hl,"$1"):r||t)}),e});var vl=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},yl=1/0,gl=Bu?Bu.prototype:void 0,bl=gl?gl.toString:void 0;var ml=function t(e){if("string"==typeof e)return e;if(qs(e))return vl(e,t)+"";if(il(e))return bl?bl.call(e):"";var r=e+"";return"0"==r&&1/e==-yl?"-0":r};var _l=function(t){return null==t?"":ml(t)};var wl=function(t,e){return qs(t)?t:ul(t,e)?[t]:pl(_l(t))},jl=1/0;var Al=function(t){if("string"==typeof t||il(t))return t;var e=t+"";return"0"==e&&1/t==-jl?"-0":e};var Sl=function(t,e){for(var r=0,n=(e=wl(e,t)).length;null!=t&&r<n;)t=t[Al(e[r++])];return r&&r==n?t:void 0};var Il=function(t,e,r){var n=null==t?void 0:Sl(t,e);return void 0===n?r:n};var Ol=function(t,e){return null!=t&&e in Object(t)};var El=function(t,e,r){for(var n=-1,i=(e=wl(e,t)).length,a=!1;++n<i;){var o=Al(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&df(i)&&ff(o,i)&&(qs(t)||af(t))};var Pl=function(t,e){return null!=t&&El(t,e,Ol)},Fl=1,xl=2;var Dl=function(t,e){return ul(t)&&Qf(e)?el(Al(t),e):function(r){var n=Il(r,t);return void 0===n&&n===e?Pl(r,t):Zf(e,n,Fl|xl)}};var Tl=function(t){return t};var Rl=function(t){return function(e){return null==e?void 0:e[t]}};var kl=function(t){return function(e){return Sl(e,t)}};var Cl=function(t){return ul(t)?Rl(Al(t)):kl(t)};var Ml=function(t){return"function"==typeof t?t:null==t?Tl:"object"==typeof t?qs(t)?Dl(t[0],t[1]):rl(t):Cl(t)};var Ul=function(t){return function(e,r,n){var i=Object(e);if(!Of(e)){var a=Ml(r);e=Ef(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}};var zl=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1},Ll=NaN,Wl=/^\s+|\s+$/g,Bl=/^[-+]0x[0-9a-f]+$/i,Nl=/^0b[01]+$/i,Gl=/^0o[0-7]+$/i,Vl=parseInt;var ql=function(t){if("number"==typeof t)return t;if(il(t))return Ll;if(Ac(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ac(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Wl,"");var r=Nl.test(t);return r||Gl.test(t)?Vl(t.slice(2),r?2:8):Bl.test(t)?Ll:+t},Hl=1/0,$l=17976931348623157e292;var Kl=function(t){return t?(t=ql(t))===Hl||t===-Hl?(t<0?-1:1)*$l:t==t?t:0:0===t?t:0};var Zl=function(t){var e=Kl(t),r=e%1;return e==e?r?e-r:e:0},Jl=Math.max;var Xl=Ul(function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Zl(r);return i<0&&(i=Jl(n+i,0)),zl(t,Ml(e),i)}),Yl=function(){try{var t=Nc(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Ql=function(t,e,r){"__proto__"==e&&Yl?Yl(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},td=Object.prototype.hasOwnProperty;var ed=function(t,e,r){var n=t[e];td.call(t,e)&&fc(n,r)&&(void 0!==r||e in t)||Ql(t,e,r)};var rd=function(t,e,r,n){if(!Ac(t))return t;for(var i=-1,a=(e=wl(e,t)).length,o=a-1,u=t;null!=u&&++i<a;){var c=Al(e[i]),s=r;if(i!=o){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=Ac(f)?f:ff(e[i+1])?[]:{})}ed(u,c,s),u=u[c]}return t};var nd=function(t,e,r){return null==t?t:rd(t,e,r)};var id=function(t,e){return vl(e,function(e){return t[e]})};var ad=function(t){return null==t?[]:id(t,Ef(t))},od=Cf&&new Cf,ud=od?function(t,e){return od.set(t,e),t}:Tl,cd=Object.create,sd=function(){function t(){}return function(e){if(!Ac(e))return{};if(cd)return cd(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var fd=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=sd(t.prototype),n=t.apply(r,e);return Ac(n)?n:r}},ld=1;var dd=function(t,e,r){var n=e&ld,i=fd(t);return function e(){return(this&&this!==Wu&&this instanceof e?i:t).apply(n?r:this,arguments)}};var hd=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},pd=Math.max;var vd=function(t,e,r,n){for(var i=-1,a=t.length,o=r.length,u=-1,c=e.length,s=pd(a-o,0),f=Array(c+s),l=!n;++u<c;)f[u]=e[u];for(;++i<o;)(l||i<a)&&(f[r[i]]=t[i]);for(;s--;)f[u++]=t[i++];return f},yd=Math.max;var gd=function(t,e,r,n){for(var i=-1,a=t.length,o=-1,u=r.length,c=-1,s=e.length,f=yd(a-u,0),l=Array(f+s),d=!n;++i<f;)l[i]=t[i];for(var h=i;++c<s;)l[h+c]=e[c];for(;++o<u;)(d||i<a)&&(l[h+r[o]]=t[i++]);return l};var bd=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n};var md=function(){},_d=4294967295;function wd(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_d,this.__views__=[]}wd.prototype=sd(md.prototype),wd.prototype.constructor=wd;var jd=wd;var Ad=od?function(t){return od.get(t)}:function(){},Sd={},Id=Object.prototype.hasOwnProperty;var Od=function(t){for(var e=t.name+"",r=Sd[e],n=Id.call(Sd,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e};function Ed(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Ed.prototype=sd(md.prototype),Ed.prototype.constructor=Ed;var Pd=Ed;var Fd=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var xd=function(t){if(t instanceof jd)return t.clone();var e=new Pd(t.__wrapped__,t.__chain__);return e.__actions__=Fd(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},Dd=Object.prototype.hasOwnProperty;function Td(t){if(ec(t)&&!qs(t)&&!(t instanceof jd)){if(t instanceof Pd)return t;if(Dd.call(t,"__wrapped__"))return xd(t)}return new Pd(t)}Td.prototype=md.prototype,Td.prototype.constructor=Td;var Rd=Td;var kd=function(t){var e=Od(t),r=Rd[e];if("function"!=typeof r||!(e in jd.prototype))return!1;if(t===r)return!0;var n=Ad(r);return!!n&&t===n[0]},Cd=800,Md=16,Ud=Date.now;var zd=function(t){var e=0,r=0;return function(){var n=Ud(),i=Md-(n-r);if(r=n,i>0){if(++e>=Cd)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Ld=zd(ud),Wd=/\{\n\/\* \[wrapped with (.+)\] \*/,Bd=/,? & /;var Nd=function(t){var e=t.match(Wd);return e?e[1].split(Bd):[]},Gd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Vd=function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Gd,"{\n/* [wrapped with "+e+"] */\n")};var qd=function(t){return function(){return t}},Hd=zd(Yl?function(t,e){return Yl(t,"toString",{configurable:!0,enumerable:!1,value:qd(e),writable:!0})}:Tl);var $d=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var Kd=function(t){return t!=t};var Zd=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1};var Jd=function(t,e,r){return e==e?Zd(t,e,r):zl(t,Kd,r)};var Xd=function(t,e){return!(null==t||!t.length)&&Jd(t,e,0)>-1},Yd=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Qd=function(t,e){return $d(Yd,function(r){var n="_."+r[0];e&r[1]&&!Xd(t,n)&&t.push(n)}),t.sort()};var th=function(t,e,r){var n=e+"";return Hd(t,Vd(n,Qd(Nd(n),r)))},eh=1,rh=2,nh=4,ih=8,ah=32,oh=64;var uh=function(t,e,r,n,i,a,o,u,c,s){var f=e&ih;e|=f?ah:oh,(e&=~(f?oh:ah))&nh||(e&=~(eh|rh));var l=[t,e,i,f?a:void 0,f?o:void 0,f?void 0:a,f?void 0:o,u,c,s],d=r.apply(void 0,l);return kd(t)&&Ld(d,l),d.placeholder=n,th(d,t,e)};var ch=function(t){return t.placeholder},sh=Math.min;var fh=function(t,e){for(var r=t.length,n=sh(e.length,r),i=Fd(t);n--;){var a=e[n];t[n]=ff(a,r)?i[a]:void 0}return t},lh="__lodash_placeholder__";var dh=function(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==lh||(t[r]=lh,a[i++]=r)}return a},hh=1,ph=2,vh=8,yh=16,gh=128,bh=512;var mh=function t(e,r,n,i,a,o,u,c,s,f){var l=r&gh,d=r&hh,h=r&ph,p=r&(vh|yh),v=r&bh,y=h?void 0:fd(e);return function g(){for(var b=arguments.length,m=Array(b),_=b;_--;)m[_]=arguments[_];if(p)var w=ch(g),j=bd(m,w);if(i&&(m=vd(m,i,a,p)),o&&(m=gd(m,o,u,p)),b-=j,p&&b<f){var A=dh(m,w);return uh(e,r,t,g.placeholder,n,m,A,c,s,f-b)}var S=d?n:this,I=h?S[e]:e;return b=m.length,c?m=fh(m,c):v&&b>1&&m.reverse(),l&&s<b&&(m.length=s),this&&this!==Wu&&this instanceof g&&(I=y||fd(I)),I.apply(S,m)}};var _h=function(t,e,r){var n=fd(t);return function i(){for(var a=arguments.length,o=Array(a),u=a,c=ch(i);u--;)o[u]=arguments[u];var s=a<3&&o[0]!==c&&o[a-1]!==c?[]:dh(o,c);return(a-=s.length)<r?uh(t,e,mh,i.placeholder,void 0,o,s,void 0,void 0,r-a):hd(this&&this!==Wu&&this instanceof i?n:t,this,o)}},wh=1;var jh=function(t,e,r,n){var i=e&wh,a=fd(t);return function e(){for(var o=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==Wu&&this instanceof e?a:t;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++o];return hd(l,i?r:this,f)}},Ah="__lodash_placeholder__",Sh=1,Ih=2,Oh=4,Eh=8,Ph=128,Fh=256,xh=Math.min;var Dh=function(t,e){var r=t[1],n=e[1],i=r|n,a=i<(Sh|Ih|Ph),o=n==Ph&&r==Eh||n==Ph&&r==Fh&&t[7].length<=e[8]||n==(Ph|Fh)&&e[7].length<=e[8]&&r==Eh;if(!a&&!o)return t;n&Sh&&(t[2]=e[2],i|=r&Sh?0:Oh);var u=e[3];if(u){var c=t[3];t[3]=c?vd(c,u,e[4]):u,t[4]=c?dh(t[3],Ah):e[4]}return(u=e[5])&&(c=t[5],t[5]=c?gd(c,u,e[6]):u,t[6]=c?dh(t[5],Ah):e[6]),(u=e[7])&&(t[7]=u),n&Ph&&(t[8]=null==t[8]?e[8]:xh(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},Th="Expected a function",Rh=1,kh=2,Ch=8,Mh=16,Uh=32,zh=64,Lh=Math.max;var Wh=function(t,e,r,n,i,a,o,u){var c=e&kh;if(!c&&"function"!=typeof t)throw new TypeError(Th);var s=n?n.length:0;if(s||(e&=~(Uh|zh),n=i=void 0),o=void 0===o?o:Lh(Zl(o),0),u=void 0===u?u:Zl(u),s-=i?i.length:0,e&zh){var f=n,l=i;n=i=void 0}var d=c?void 0:Ad(t),h=[t,e,r,n,i,f,l,a,o,u];if(d&&Dh(h,d),t=h[0],e=h[1],r=h[2],n=h[3],i=h[4],!(u=h[9]=void 0===h[9]?c?0:t.length:Lh(h[9]-s,0))&&e&(Ch|Mh)&&(e&=~(Ch|Mh)),e&&e!=Rh)p=e==Ch||e==Mh?_h(t,e,u):e!=Uh&&e!=(Rh|Uh)||i.length?mh.apply(void 0,h):jh(t,e,r,n);else var p=dd(t,e,r);return th((d?ud:Ld)(p,h),t,e)},Bh=8;function Nh(t,e,r){var n=Wh(t,Bh,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return n.placeholder=Nh.placeholder,n}Nh.placeholder={};var Gh=Nh;var Vh=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r};var qh=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),u=o.length;u--;){var c=o[t?u:++i];if(!1===r(a[c],c,a))break}return e}}();var Hh=function(t,e){return function(r,n){if(null==r)return r;if(!Of(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}(function(t,e){return t&&qh(t,e,Ef)});var $h=function(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r};var Kh=function(t,e,r){var n=qs(t)?Vh:$h,i=arguments.length<3;return n(t,Ml(e),r,i,Hh)},Zh="[object String]";var Jh=function(t){return"string"==typeof t||!qs(t)&&ec(t)&&Yu(t)==Zh},Xh=Gh(function(t,e){return t?Kh(e,function(e,r,n){var i,a=Il(r,"folderId.path",Il(r,"folderId.id")),o=Jh(a)?a.split("/").pop():r.folderId;return String(o)===String(t)?Object.assign(e,((i={})[n]=r,i)):e},{}):e}),Yh=function(t,e){var r=void 0===e?{}:e,n=r.width,i=r.path;return i?"/flamelink/media/sized/"+i+"/"+t:"/flamelink/media/"+(n?"sized/"+n+"/":"")+t},Qh=function(t,e,r){var n=e.map(function(t){return Object.assign({},t,{width:parseInt(t.width||t.maxWidth,10)})},[]).sort(function(t,e){return t.width-e.width}).find(function(t){return t.width>=r});n?t.options=Object.assign(t.options,n):hu("The provided size ("+r+") has been ignored because it did not match any of the given file's available sizes.\nAvailable sizes: "+e.map(function(t){return t.width}).join(", "))},tp=["id","parentId","children","order"],ep=function(r){var n={_getFolderId:function(t){var e=t.folderName;return ku(this,void 0,void 0,function(){var t,r,i;return Cu(this,function(a){switch(a.label){case 0:return e?[4,n.folderRef().where("name","==",e).get()]:[2,null];case 1:return t=a.sent(),r=[],t.forEach(function(t){return r.push(t.data())}),(i=Xl(r,{name:e}))?[2,i.id]:[2,null]}})})},_getFolderIdFromOptions:function(t){var e=void 0===t?{folderId:"",folderName:""}:t,r=e.folderId,i=e.folderName;return ku(this,void 0,void 0,function(){return Cu(this,function(t){return r?[2,r]:[2,n._getFolderId({folderName:i})]})})},_setFile:function(t){return ku(this,void 0,void 0,function(){var e;return Cu(this,function(i){return e=Tu({},t,{_fl_meta_:{createdBy:_u(r),createdDate:mu(r),docId:t.id}}),[2,n.fileRef(t.id).set(e)]})})},_createSizedImage:function(t,e,i){var a=this;return void 0===i&&(i={}),new gu(function(u,c,s){return ku(a,void 0,void 0,function(){var a,f,l,d,h,p,v;return Cu(this,function(y){switch(y.label){case 0:return i&&(i.path||i.width||i.maxWidth)?(a=bu(r),s.emit(n.UploadEvents.RESIZE_IMAGE_STARTED,e,i),[4,o(t,i)]):[3,3];case 1:return f=y.sent(),s.emit(n.UploadEvents.RESIZE_IMAGE_FINISHED,e,i),l=n.ref(e,{path:i.path,width:i.width||i.maxWidth}),s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_STARTED,e,i),d=r.usesAdminApp?"upload":"put",h=l[d](f),p=void 0,Il(a,"TaskEvent")&&(p=h.on(a.TaskEvent.STATE_CHANGED,function(t){s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_STATE_CHANGED,t,i)})),[4,h];case 2:return v=y.sent(),"function"==typeof p&&p(),s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_FINISHED,e,i),[2,u(v)];case 3:return c(new yu("Invalid size object supplied - please refer to https://flamelink.github.io/flamelink-js-sdk/#/storage?id=upload for more details on upload options.\nImage upload for supplied size skipped for file: "+e)),[2]}})})})},ref:function(e,n){void 0===n&&(n={});var i=Ru(n,[]);if(r.isNodeEnvironment&&!r.usesAdminApp)throw new yu("\nThe Firebase client-side SDK cannot access the Storage Bucket server-side.\nPlease use the admin SDK instead - https://www.npmjs.com/package/firebase-admin\n\nInstructions here: https://flamelink.github.io/flamelink-js-sdk/#/getting-started?id=usage","service-unavailable");var a=t._ensureService("storage",r);if(/:\/\//.test(e)){if(r.usesAdminApp)throw new yu("Retrieving files from URL is not supported for the admin SDK","service-unavailable");return a.refFromURL(e)}return r.usesAdminApp?a.bucket().file(Yh(e,i)):a.ref(Yh(e,i))},folderRef:function(e){var n=t._ensureService("firestore",r);return e?n.collection("fl_folders").doc(e):n.collection("fl_folders")},fileRef:function(e){var n=t._ensureService("firestore",r);return e?n.collection("fl_files").doc(e):n.collection("fl_files")},getFoldersRaw:function(t){var e=Ru(t,[]);return ku(this,void 0,void 0,function(){return Cu(this,function(t){return[2,Ou(n.folderRef(),e).get({source:e.source||"default"})]})})},getFolders:function(t){var i=t.fields,a=t.structure,o=Ru(t,["fields","structure"]);return ku(this,void 0,void 0,function(){var t,u,c,s,f,l,d,h,p=this;return Cu(this,function(v){switch(v.label){case 0:return t=Array.isArray(i)?Array.from(new Set(tp.concat(i))):i,u=Au(t),[4,n.getFoldersRaw(o)];case 1:return(c=v.sent()).empty?[2,null]:"nested"===a||"tree"===a?[3,3]:(s=[],c.forEach(function(t){return s.push(t.data())}),[4,s.reduce(function(t,e){return t.then(function(t){return ku(p,void 0,void 0,function(){var r;return Cu(this,function(n){return[2,Object.assign(t,u((r={},r[e.id]=e,r)))]})})})},Promise.resolve({}))]);case 2:return[2,v.sent()];case 3:return f=Fu(r,o),l=Iu(a,{idProperty:"id",parentProperty:"parentId.id"}),d=[],c.forEach(function(t){return ku(p,void 0,void 0,function(){return Cu(this,function(e){return[2,d.push(f(t.data()))]})})}),[4,d.reduce(function(t,e){return t.then(function(t){return ku(p,void 0,void 0,function(){var r,n;return Cu(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),[2,Object.assign(t,u((n={},n[r.id]=r,n)))]}})})})},Promise.resolve({}))];case 4:return h=v.sent(),[2,e(l,ad)(h)]}})})},getFileRaw:function(t){var e=t.fileId,r=Ru(t,["fileId"]);return ku(this,void 0,void 0,function(){return Cu(this,function(t){if(!e)throw new yu('"storage.getFileRaw()" should be called with at least the file ID',"incorrect-arguments");return[2,Ou(n.fileRef(e),r).get({source:r.source||"default"})]})})},getFile:function(t){var e=t.fileId,i=Ru(t,["fileId"]);return ku(this,void 0,void 0,function(){var t,a,o,u,c,s;return Cu(this,function(f){switch(f.label){case 0:if(!e)throw new yu('"storage.getFile()" should be called with at least the file ID',"incorrect-arguments");return t=Au(i.fields),a=Fu(r,i),[4,n.getFileRaw(Tu({fileId:e},i))];case 1:return o=f.sent(),u=t,s={},c=e,[4,a(o.data())];case 2:return[4,u.apply(void 0,[(s[c]=f.sent(),s)])];case 3:return[2,f.sent()[e]]}})})},getFilesRaw:function(t){void 0===t&&(t={});var e=Ru(t,[]);return ku(this,void 0,void 0,function(){return Cu(this,function(t){return[2,Ou(n.fileRef(),e).get({source:e.source||"default"})]})})},getFiles:function(t){void 0===t&&(t={});var i=Ru(t,[]);return ku(this,void 0,void 0,function(){var t,a,o,u,c,s,f,l,d,h=this;return Cu(this,function(p){switch(p.label){case 0:return t={},a=Object.assign(t,i,i.mediaType?{orderByChild:"type",equalTo:i.mediaType}:{}),[4,n._getFolderIdFromOptions(a)];case 1:return o=p.sent(),u=Xh(o),c=Au(a.fields),s=Fu(r,i),[4,n.getFilesRaw(a)];case 2:return(f=p.sent()).empty?[2,null]:(l=[],f.forEach(function(t){return ku(h,void 0,void 0,function(){return Cu(this,function(e){return[2,l.push(s(t.data()))]})})}),[4,l.reduce(function(t,e){return t.then(function(t){return ku(h,void 0,void 0,function(){var r,n;return Cu(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),[2,Object.assign(t,(n={},n[r.id]=r,n))]}})})})},Promise.resolve({}))]);case 3:return d=p.sent(),[2,e(c,u)(d)]}})})},getURL:function(t){var e=t.fileId,i=Ru(t,["fileId"]);return ku(this,void 0,void 0,function(){var t,a,o,u,c,s,f,l,d,h,p,v;return Cu(this,function(y){switch(y.label){case 0:if(!e)throw new yu('"storage.getURL()" should be called with at least the file ID',"incorrect-arguments");return t=i.size,[4,n.getFile(Tu({fileId:e},i))];case 1:return(a=y.sent())?(o=a.file,u=a.sizes,c={filename:o,options:{}},cc(t)?(f=(s=t).width,l=s.height,d=s.quality,f&&l&&d&&(t.path=f+"_"+l+"_"+Math.round(100*parseFloat(d.toString()))),t.path&&Il(u,"[0].path")?u.find(function(e){return e.path===t.path})?c.options=Object.assign(c.options,{path:t.path}):hu("The provided path ("+t.path+") has been ignored because it did not match any of the given file's available paths.\nAvailable paths: "+u.map(function(t){return t.path}).join(", ")):f&&u&&u.length&&Qh(c,u,parseInt(f.toString(),10))):"string"==typeof t&&u&&u.length&&(h="device"===t?function(){if("undefined"==typeof window)throw new yu("The device's screen resolution can only be retrieved from a browser environment.","incompatibility");var t="devicePixelRatio"in window?window.devicePixelRatio:1;return Math.max(window.screen.width,window.screen.height)*t}():t,Qh(c,u,Number(h))),[4,n.ref(c.filename,c.options)]):[2,a];case 2:return p=y.sent(),r.usesAdminApp?[4,p.getSignedUrl({action:"read",expires:"01-01-2500"})]:[3,4];case 3:return v=y.sent(),[2,Il(v,"[0]","")];case 4:return[2,p.getDownloadURL()]}})})},getMetadata:function(t){var e=t.fileId,r=Ru(t,["fileId"]);return ku(this,void 0,void 0,function(){var t,i;return Cu(this,function(a){switch(a.label){case 0:if(!e)throw new yu('"storage.getMetadata()" should be called with at least the file ID');return[4,n.getFile(Tu({fileId:e},r))];case 1:if(!(t=a.sent()))throw new yu('There is no file for File ID: "'+e+'"');return i=t.file,[2,n.ref(i).getMetadata()]}})})},updateMetadata:function(t){var e=t.fileId,r=t.data;return ku(this,void 0,void 0,function(){var t,i;return Cu(this,function(a){switch(a.label){case 0:if(!e||!r)throw new yu('"storage.updateMetadata()" should be called with the "fileID" and the "data" object');return[4,n.getFile({fileId:e})];case 1:if(!(t=a.sent()))throw new yu('There is no file for File ID: "'+e+'"');return i=t.file,[2,n.ref(i).updateMetadata(r)]}})})},deleteFile:function(t){var e=t.fileId,i=Ru(t,["fileId"]);return ku(this,void 0,void 0,function(){var t,a,o,u=this;return Cu(this,function(c){switch(c.label){case 0:if(r.usesAdminApp)throw new yu('"storage.deleteFile()" is not currently supported for server-side use.');if(!e)throw new yu('"storage.deleteFile()" should be called with at least the file ID');return[4,n.getFile(Tu({fileId:e},i))];case 1:return(t=c.sent())?(a=t.file,o=t.sizes,[4,n.ref(a).delete()]):[2,t];case 2:return c.sent(),Array.isArray(o)?[4,Promise.all(o.map(function(t){return ku(u,void 0,void 0,function(){var e,r;return Cu(this,function(i){return e=t.width||t.maxWidth,r=t.path,e||r?[2,n.ref(a,{width:e,path:r}).delete()]:[2,Promise.resolve()]})})}))]:[3,4];case 3:c.sent(),c.label=4;case 4:return[2,n.fileRef(e).delete()]}})})},upload:function(t,e){var i=this;return void 0===e&&(e={}),new gu(function(a,o,u){return ku(i,void 0,void 0,function(){var i,c,s,f,l,d,h,p,v,y,g,b,m,_,w,j,A,S=this;return Cu(this,function(I){switch(I.label){case 0:return I.trys.push([0,7,,8]),i=bu(r),u.emit(n.UploadEvents.START),c=e.sizes,s=e.overwriteSizes,[4,Il(r,"modules.settings",{getImageSizes:function(){}}).getImageSizes()];case 1:return(f=I.sent())&&(c||s?c&&c.length&&!s&&nd(e,"sizes",f.concat(c)||[]):nd(e,"sizes",f||[])),(!e.sizes||e.sizes&&0===e.sizes.length||Array.isArray(e.sizes)&&0===e.sizes.filter(function(t){return!(240!==t.width&&240!==t.maxWidth||t.height||t.quality)}).length)&&(Array.isArray(e.sizes)?e.sizes.push({width:240}):nd(e,"sizes",[{width:240}])),l=n.fileRef().doc().id,d=Il(e,"metadata",{}),h="object"==typeof t&&t.name||"string"==typeof d.name?l+"_"+(d.name||t.name):l,p=n.ref(h,e),v=r.usesAdminApp?"upload":"string"==typeof t?"putString":"put",y=[t],[4,n._getFolderIdFromOptions(e)];case 2:return"number"==typeof(g=I.sent())&&(g=g.toString()),nd(e,"metadata.customMetadata.flamelinkFileId",l),nd(e,"metadata.customMetadata.flamelinkFolderId",g),y.push(e.metadata),"putString"===v&&e.stringEncoding&&y.splice(1,0,e.stringEncoding),b=p[v].apply(p,y),u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_STARTED),m=void 0,Il(i,"TaskEvent")&&(m=b.on(i.TaskEvent.STATE_CHANGED,function(t){u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_STATE_CHANGED,t)})),[4,b];case 3:return _=I.sent(),"function"==typeof m&&m(),u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_FINISHED),w=/^image\//.test(Il(_,"metadata.contentType"))?"images":"files",j={id:l,file:Il(_,"metadata.name",""),folderId:n.folderRef(g||"root"),type:w,contentType:Il(_,"metadata.contentType","")},"images"===w&&"put"===v&&Array.isArray(e.sizes)?(u.emit(n.UploadEvents.SIZED_FILES_UPLOAD_STARTED),j.sizes=e.sizes.map(function(t){var e=t.width,r=t.height,n=t.quality;return e&&r&&n?Object.assign({},t,{path:e+"_"+r+"_"+Math.round(100*parseFloat(n.toString()))}):t}),[4,Promise.all(j.sizes.map(function(e){return ku(S,void 0,void 0,function(){var r,i;return Cu(this,function(a){switch(a.label){case 0:return r=n._createSizedImage(t,h,e),i=r.on("*",function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.emit.apply(u,[t].concat(e))}),[4,r];case 1:return a.sent(),i(),[2]}})})}))]):[3,5];case 4:I.sent(),u.emit(n.UploadEvents.SIZED_FILES_UPLOAD_FINISHED),I.label=5;case 5:return u.emit(n.UploadEvents.DB_PERSIST_STARTED),[4,n._setFile(j)];case 6:return I.sent(),u.emit(n.UploadEvents.DB_PERSIST_FINISHED),u.emit(n.UploadEvents.SUCCESS,j),[2,a(j)];case 7:return A=I.sent(),u.emit(n.UploadEvents.FAILURE,A),o(A),[3,8];case 8:return[2]}})})})},get UploadEvents(){return t=bu(r),Tu({ALL:"*",START:"upload_start",SUCCESS:"upload_success",FAILURE:"upload_failure",DB_PERSIST_STARTED:"file_db_persist_started",DB_PERSIST_FINISHED:"file_db_persist_finished",MAIN_FILE_UPLOAD_STARTED:"main_file_upload_started",MAIN_FILE_UPLOAD_FINISHED:"main_file_upload_finished",SIZED_FILES_UPLOAD_STARTED:"sized_files_upload_started",SIZED_FILES_UPLOAD_FINISHED:"sized_files_upload_finished",SIZED_FILE_UPLOAD_STARTED:"sized_file_upload_started",SIZED_FILE_UPLOAD_FINISHED:"sized_file_upload_finished",RESIZE_IMAGE_STARTED:"resize_image_start",RESIZE_IMAGE_FINISHED:"resize_image_finished"},Il(t,"TaskEvent.STATE_CHANGED")?{MAIN_FILE_UPLOAD_STATE_CHANGED:"main_file_upload_"+t.TaskEvent.STATE_CHANGED,SIZED_FILE_UPLOAD_STATE_CHANGED:"sized_file_upload_"+t.TaskEvent.STATE_CHANGED}:{});var t}};return n};t._registerModule("storage",function(t){return"cf"===t.dbType?ep(t):null})}).apply(this,arguments)}catch(t){throw console.error(t),new Error('Cannot instantiate "flamelink-storage.js" - be sure to load flamelink-app.js first.')}});
//# sourceMappingURL=flamelink-storage-cf.js.map
