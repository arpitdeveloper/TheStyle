!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@flamelink/sdk-app")):"function"==typeof define&&define.amd?define(["@flamelink/sdk-app"],e):e((t=t||self).flamelink)}(this,function(t){"use strict";try{(function(){t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduceRight(function(t,e){return t.then(e)},Promise.resolve(t))}};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var n,i=r(function(t,e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var n=!1,i=function t(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};t.exports&&(e=t.exports=i),e.EXIF=i;var a=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},o=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},u=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},s=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function f(t){return!!t.exifdata}function l(t,e){function r(r){var n=d(r),i=function(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;var r=2,n=t.byteLength,i=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};for(;r<n;){if(i(e,r)){var a=e.getUint8(r+7);a%2!=0&&(a+=1),0===a&&(a=4);var o=r+8+a,u=e.getUint16(r+6+a);return h(t,o,u)}r++}}(r);t.exifdata=n||{},t.iptcdata=i||{},e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))r(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var r=atob(t),n=r.length,i=new ArrayBuffer(n),a=new Uint8Array(i),o=0;o<n;o++)a[o]=r.charCodeAt(o);return i}(t.src));else if(/^blob\:/i.test(t.src)){(i=new FileReader).onload=function(t){r(t.target.result)},function(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},r.send()}(t.src,function(t){i.readAsArrayBuffer(t)})}else{var n=new XMLHttpRequest;n.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(n.response),n=null},n.open("GET",t.src,!0),n.responseType="arraybuffer",n.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var i;(i=new FileReader).onload=function(t){r(t.target.result)},i.readAsArrayBuffer(t)}}function d(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;for(var r=2,n=t.byteLength;r<n;){if(255!=e.getUint8(r))return!1;if(225==e.getUint8(r+1))return _(e,r+4,e.getUint16(r+2));r+=2+e.getUint16(r+2)}}var v={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function h(t,e,r){for(var n,i,a,o,u=new DataView(t),c={},s=e;s<e+r;)28===u.getUint8(s)&&2===u.getUint8(s+1)&&(o=u.getUint8(s+2))in v&&(a=u.getInt16(s+3),i=v[o],n=g(u,s+5,a),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(n):c[i]=[c[i],n]:c[i]=n),s++;return c}function p(t,e,r,i,a){var o,u,c,s=t.getUint16(r,!a),f={};for(c=0;c<s;c++)o=r+12*c+2,!(u=i[t.getUint16(o,!a)])&&n&&console.log("Unknown tag: "+t.getUint16(o,!a)),f[u]=y(t,o,e,r,a);return f}function y(t,e,r,n,i){var a,o,u,c,s,f,l=t.getUint16(e+2,!i),d=t.getUint32(e+4,!i),v=t.getUint32(e+8,!i)+r;switch(l){case 1:case 7:if(1==d)return t.getUint8(e+8,!i);for(a=d>4?v:e+8,o=[],c=0;c<d;c++)o[c]=t.getUint8(a+c);return o;case 2:return g(t,a=d>4?v:e+8,d-1);case 3:if(1==d)return t.getUint16(e+8,!i);for(a=d>2?v:e+8,o=[],c=0;c<d;c++)o[c]=t.getUint16(a+2*c,!i);return o;case 4:if(1==d)return t.getUint32(e+8,!i);for(o=[],c=0;c<d;c++)o[c]=t.getUint32(v+4*c,!i);return o;case 5:if(1==d)return s=t.getUint32(v,!i),f=t.getUint32(v+4,!i),(u=new Number(s/f)).numerator=s,u.denominator=f,u;for(o=[],c=0;c<d;c++)s=t.getUint32(v+8*c,!i),f=t.getUint32(v+4+8*c,!i),o[c]=new Number(s/f),o[c].numerator=s,o[c].denominator=f;return o;case 9:if(1==d)return t.getInt32(e+8,!i);for(o=[],c=0;c<d;c++)o[c]=t.getInt32(v+4*c,!i);return o;case 10:if(1==d)return t.getInt32(v,!i)/t.getInt32(v+4,!i);for(o=[],c=0;c<d;c++)o[c]=t.getInt32(v+8*c,!i)/t.getInt32(v+4+8*c,!i);return o}}function g(t,e,r){for(var n="",i=e;i<e+r;i++)n+=String.fromCharCode(t.getUint8(i));return n}function _(t,e){if("Exif"!=g(t,e,4))return!1;var r,n,i,f,l,d=e+6;if(18761==t.getUint16(d))r=!1;else{if(19789!=t.getUint16(d))return!1;r=!0}if(42!=t.getUint16(d+2,!r))return!1;var v=t.getUint32(d+4,!r);if(v<8)return!1;if((n=p(t,d,d+v,o,r)).ExifIFDPointer)for(i in f=p(t,d,d+n.ExifIFDPointer,a,r)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":f[i]=s[i][f[i]];break;case"ExifVersion":case"FlashpixVersion":f[i]=String.fromCharCode(f[i][0],f[i][1],f[i][2],f[i][3]);break;case"ComponentsConfiguration":f[i]=s.Components[f[i][0]]+s.Components[f[i][1]]+s.Components[f[i][2]]+s.Components[f[i][3]]}n[i]=f[i]}if(n.GPSInfoIFDPointer)for(i in l=p(t,d,d+n.GPSInfoIFDPointer,u,r)){switch(i){case"GPSVersionID":l[i]=l[i][0]+"."+l[i][1]+"."+l[i][2]+"."+l[i][3]}n[i]=l[i]}return n.thumbnail=function(t,e,r,n){var i=function(t,e,r){var n=t.getUint16(e,!r);return t.getUint32(e+2+12*n,!r)}(t,e+r,n);if(!i)return{};if(i>t.byteLength)return{};var a=p(t,e,e+i,c,n);if(a.Compression)switch(a.Compression){case 6:if(a.JpegIFOffset&&a.JpegIFByteCount){var o=e+a.JpegIFOffset,u=a.JpegIFByteCount;a.blob=new Blob([new Uint8Array(t.buffer,o,u)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",a.Compression)}else 2==a.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return a}(t,d,v,r),n}i.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete)&&(f(t)?e&&e.call(t):l(t,e),!0)},i.getTag=function(t,e){if(f(t))return t.exifdata[e]},i.getIptcTag=function(t,e){if(f(t))return t.iptcdata[e]},i.getAllTags=function(t){if(!f(t))return{};var e,r=t.exifdata,n={};for(e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n},i.getAllIptcTags=function(t){if(!f(t))return{};var e,r=t.iptcdata,n={};for(e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n},i.pretty=function(t){if(!f(t))return"";var e,n=t.exifdata,i="";for(e in n)n.hasOwnProperty(e)&&("object"==r(n[e])?n[e]instanceof Number?i+=e+" : "+n[e]+" ["+n[e].numerator+"/"+n[e].denominator+"]\r\n":i+=e+" : ["+n[e].length+" values]\r\n":i+=e+" : "+n[e]+"\r\n");return i},i.readFromBinaryFile=function(t){return d(t)}}).call(void 0)}),a=(i.EXIF,r(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return new Promise(function(r){var i=document.createElement("img"),u=new FileReader,c=Object.assign({},a,e);u.onload=function(t){i.src=t.target.result,i.onload=function(){c.autoRotate&&(c.debug&&console.log("browser-image-resizer: detecting image orientation..."),"function"==typeof n.default.getData&&"function"==typeof n.default.getTag?n.default.getData(i,function(){var t=n.default.getTag(this,"Orientation");c.debug&&console.log("browser-image-resizer: image orientation from EXIF tag = "+t),r(o(i,c,t))}):(console.error("browser-image-resizer: can't read EXIF data, the Exif.js library not found"),r(o(i,c))))}},u.readAsDataURL(t)})},e.scaleImage=o;var r,n=(r=i)&&r.__esModule?r:{default:r};var a={quality:.5,maxWidth:800,maxHeight:600,autoRotate:!0,debug:!1,mimeType:"image/jpeg"};function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=document.createElement("canvas");n.width=t.width,n.height=t.height;var i=n.getContext("2d");i.save(),function(t,e,r,n){var i=t.width,a=t.style.width,o=t.height,u=t.style.height;r>4&&(t.width=o,t.style.width=u,t.height=i,t.style.height=a);switch(r){case 2:e.translate(i,0),e.scale(-1,1);break;case 3:e.translate(i,o),e.rotate(Math.PI);break;case 4:e.translate(0,o),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-o);break;case 7:e.rotate(.5*Math.PI),e.translate(i,-o),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-i,0)}e.drawImage(n,0,0),e.restore()}(n,i,r,t);for(var a=function(t,e){var r=e.width/e.height,n=Math.min(e.width,t.maxWidth,r*t.maxHeight);t.maxSize>0&&t.maxSize<e.width*e.height/1e3&&(n=Math.min(n,Math.floor(1e3*t.maxSize/e.height)));t.scaleRatio&&(n=Math.min(n,Math.floor(t.scaleRatio*e.width)));t.debug&&(console.log("browser-image-resizer: original image size = "+e.width+" px (width) X "+e.height+" px (height)"),console.log("browser-image-resizer: scaled image size = "+n+" px (width) X "+Math.floor(n/r)+" px (height)"));n<=0&&(n=1,console.warning("browser-image-resizer: image size is too small"));return n}(e,n);n.width>=2*a;)n=u(n);n.width>a&&(n=function(t,e){var r=document.createElement("canvas"),n=e.outputWidth/t.width;r.width=t.width*n,r.height=t.height*n;var i=t.getContext("2d").getImageData(0,0,t.width,t.height),a=r.getContext("2d").createImageData(r.width,r.height);return function(t,e,r){function n(t,e,r,n,i,a){var o=1-i,u=1-a;return t*o*u+e*i*u+r*o*a+n*i*a}var i,a,o,u,c,s,f,l,d,v,h,p,y,g,_,b,m,w,j;for(i=0;i<e.height;++i)for(o=i/r,u=Math.floor(o),c=Math.ceil(o)>t.height-1?t.height-1:Math.ceil(o),a=0;a<e.width;++a)s=a/r,f=Math.floor(s),l=Math.ceil(s)>t.width-1?t.width-1:Math.ceil(s),d=4*(a+e.width*i),v=4*(f+t.width*u),h=4*(l+t.width*u),p=4*(f+t.width*c),y=4*(l+t.width*c),g=s-f,_=o-u,b=n(t.data[v],t.data[h],t.data[p],t.data[y],g,_),e.data[d]=b,m=n(t.data[v+1],t.data[h+1],t.data[p+1],t.data[y+1],g,_),e.data[d+1]=m,w=n(t.data[v+2],t.data[h+2],t.data[p+2],t.data[y+2],g,_),e.data[d+2]=w,j=n(t.data[v+3],t.data[h+3],t.data[p+3],t.data[y+3],g,_),e.data[d+3]=j}(i,a,n),r.getContext("2d").putImageData(a,0,0),r}(n,Object.assign(e,{outputWidth:a})));var o=n.toDataURL(e.mimeType,e.quality);return"function"==typeof e.onScale&&e.onScale(o),function(t){for(var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return new Blob([n],{type:r})}(o)}function u(t){var e=document.createElement("canvas");return e.width=t.width/2,e.height=t.height/2,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}})),o=(n=a)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,u=(a.scaleImage,function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)});function c(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var s=function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function f(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function u(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(o,u)}c((n=n.apply(t,e||[])).next())})}function l(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function v(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=d(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,i){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,i,(e=t[r](e)).done,e.value)})}}}var h=Array.isArray,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(t,e){return t(e={exports:{}},e.exports),e.exports}var g="object"==typeof p&&p&&p.Object===Object&&p,_="object"==typeof self&&self&&self.Object===Object&&self,b=g||_||Function("return this")(),m=b.Symbol,w=Object.prototype,j=w.hasOwnProperty,A=w.toString,S=m?m.toStringTag:void 0;var I=function(t){var e=j.call(t,S),r=t[S];try{t[S]=void 0;var n=!0}catch(t){}var i=A.call(t);return n&&(e?t[S]=r:delete t[S]),i},O=Object.prototype.toString;var E=function(t){return O.call(t)},F="[object Null]",P="[object Undefined]",D=m?m.toStringTag:void 0;var T=function(t){return null==t?void 0===t?P:F:D&&D in Object(t)?I(t):E(t)};var x=function(t){return null!=t&&"object"==typeof t},R="[object Symbol]";var k=function(t){return"symbol"==typeof t||x(t)&&T(t)==R},z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/;var M=function(t,e){if(h(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!k(t))||U.test(t)||!z.test(t)||null!=e&&t in Object(e)};var L=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},C="[object AsyncFunction]",B="[object Function]",W="[object GeneratorFunction]",N="[object Proxy]";var G,H=function(t){if(!L(t))return!1;var e=T(t);return e==B||e==W||e==C||e==N},V=b["__core-js_shared__"],$=(G=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"";var q=function(t){return!!$&&$ in t},K=Function.prototype.toString;var Z=function(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,X=Function.prototype,Y=Object.prototype,Q=X.toString,tt=Y.hasOwnProperty,et=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var rt=function(t){return!(!L(t)||q(t))&&(H(t)?et:J).test(Z(t))};var nt=function(t,e){return null==t?void 0:t[e]};var it=function(t,e){var r=nt(t,e);return rt(r)?r:void 0},at=it(Object,"create");var ot=function(){this.__data__=at?at(null):{},this.size=0};var ut=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ct="__lodash_hash_undefined__",st=Object.prototype.hasOwnProperty;var ft=function(t){var e=this.__data__;if(at){var r=e[t];return r===ct?void 0:r}return st.call(e,t)?e[t]:void 0},lt=Object.prototype.hasOwnProperty;var dt=function(t){var e=this.__data__;return at?void 0!==e[t]:lt.call(e,t)},vt="__lodash_hash_undefined__";var ht=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=at&&void 0===e?vt:e,this};function pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pt.prototype.clear=ot,pt.prototype.delete=ut,pt.prototype.get=ft,pt.prototype.has=dt,pt.prototype.set=ht;var yt=pt;var gt=function(){this.__data__=[],this.size=0};var _t=function(t,e){return t===e||t!=t&&e!=e};var bt=function(t,e){for(var r=t.length;r--;)if(_t(t[r][0],e))return r;return-1},mt=Array.prototype.splice;var wt=function(t){var e=this.__data__,r=bt(e,t);return!(r<0||(r==e.length-1?e.pop():mt.call(e,r,1),--this.size,0))};var jt=function(t){var e=this.__data__,r=bt(e,t);return r<0?void 0:e[r][1]};var At=function(t){return bt(this.__data__,t)>-1};var St=function(t,e){var r=this.__data__,n=bt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function It(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}It.prototype.clear=gt,It.prototype.delete=wt,It.prototype.get=jt,It.prototype.has=At,It.prototype.set=St;var Ot=It,Et=it(b,"Map");var Ft=function(){this.size=0,this.__data__={hash:new yt,map:new(Et||Ot),string:new yt}};var Pt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Dt=function(t,e){var r=t.__data__;return Pt(e)?r["string"==typeof e?"string":"hash"]:r.map};var Tt=function(t){var e=Dt(this,t).delete(t);return this.size-=e?1:0,e};var xt=function(t){return Dt(this,t).get(t)};var Rt=function(t){return Dt(this,t).has(t)};var kt=function(t,e){var r=Dt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function zt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}zt.prototype.clear=Ft,zt.prototype.delete=Tt,zt.prototype.get=xt,zt.prototype.has=Rt,zt.prototype.set=kt;var Ut=zt,Mt="Expected a function";function Lt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Mt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Lt.Cache||Ut),r}Lt.Cache=Ut;var Ct=Lt,Bt=500;var Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/\\(\\)?/g,Gt=function(t){var e=Ct(t,function(t){return r.size===Bt&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Wt,function(t,r,n,i){e.push(n?i.replace(Nt,"$1"):r||t)}),e});var Ht=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},Vt=1/0,$t=m?m.prototype:void 0,qt=$t?$t.toString:void 0;var Kt=function t(e){if("string"==typeof e)return e;if(h(e))return Ht(e,t)+"";if(k(e))return qt?qt.call(e):"";var r=e+"";return"0"==r&&1/e==-Vt?"-0":r};var Zt=function(t){return null==t?"":Kt(t)};var Jt=function(t,e){return h(t)?t:M(t,e)?[t]:Gt(Zt(t))},Xt=1/0;var Yt=function(t){if("string"==typeof t||k(t))return t;var e=t+"";return"0"==e&&1/t==-Xt?"-0":e};var Qt=function(t,e){for(var r=0,n=(e=Jt(e,t)).length;null!=t&&r<n;)t=t[Yt(e[r++])];return r&&r==n?t:void 0};var te=function(t,e,r){var n=null==t?void 0:Qt(t,e);return void 0===n?r:n},ee=function(){try{var t=it(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var re=function(t,e,r){"__proto__"==e&&ee?ee(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},ne=Object.prototype.hasOwnProperty;var ie=function(t,e,r){var n=t[e];ne.call(t,e)&&_t(n,r)&&(void 0!==r||e in t)||re(t,e,r)},ae=9007199254740991,oe=/^(?:0|[1-9]\d*)$/;var ue=function(t,e){var r=typeof t;return!!(e=null==e?ae:e)&&("number"==r||"symbol"!=r&&oe.test(t))&&t>-1&&t%1==0&&t<e};var ce=function(t,e,r,n){if(!L(t))return t;for(var i=-1,a=(e=Jt(e,t)).length,o=a-1,u=t;null!=u&&++i<a;){var c=Yt(e[i]),s=r;if(i!=o){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=L(f)?f:ue(e[i+1])?[]:{})}ie(u,c,s),u=u[c]}return t};var se=function(t,e,r){return null==t?t:ce(t,e,r)};var fe=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},le="[object Arguments]";var de=function(t){return x(t)&&T(t)==le},ve=Object.prototype,he=ve.hasOwnProperty,pe=ve.propertyIsEnumerable,ye=de(function(){return arguments}())?de:function(t){return x(t)&&he.call(t,"callee")&&!pe.call(t,"callee")};var ge=function(){return!1},_e=y(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?b.Buffer:void 0,a=(i?i.isBuffer:void 0)||ge;t.exports=a}),be=9007199254740991;var me=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=be},we={};we["[object Float32Array]"]=we["[object Float64Array]"]=we["[object Int8Array]"]=we["[object Int16Array]"]=we["[object Int32Array]"]=we["[object Uint8Array]"]=we["[object Uint8ClampedArray]"]=we["[object Uint16Array]"]=we["[object Uint32Array]"]=!0,we["[object Arguments]"]=we["[object Array]"]=we["[object ArrayBuffer]"]=we["[object Boolean]"]=we["[object DataView]"]=we["[object Date]"]=we["[object Error]"]=we["[object Function]"]=we["[object Map]"]=we["[object Number]"]=we["[object Object]"]=we["[object RegExp]"]=we["[object Set]"]=we["[object String]"]=we["[object WeakMap]"]=!1;var je=function(t){return x(t)&&me(t.length)&&!!we[T(t)]};var Ae=function(t){return function(e){return t(e)}},Se=y(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&g.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}),Ie=Se&&Se.isTypedArray,Oe=Ie?Ae(Ie):je,Ee=Object.prototype.hasOwnProperty;var Fe=function(t,e){var r=h(t),n=!r&&ye(t),i=!r&&!n&&_e(t),a=!r&&!n&&!i&&Oe(t),o=r||n||i||a,u=o?fe(t.length,String):[],c=u.length;for(var s in t)!e&&!Ee.call(t,s)||o&&("length"==s||i&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ue(s,c))||u.push(s);return u},Pe=Object.prototype;var De=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Pe)};var Te=function(t,e){return function(r){return t(e(r))}},xe=Te(Object.keys,Object),Re=Object.prototype.hasOwnProperty;var ke=function(t){if(!De(t))return xe(t);var e=[];for(var r in Object(t))Re.call(t,r)&&"constructor"!=r&&e.push(r);return e};var ze=function(t){return null!=t&&me(t.length)&&!H(t)};var Ue=function(t){return ze(t)?Fe(t):ke(t)};var Me=function(){if(!arguments.length)return[];var t=arguments[0];return h(t)?t:[t]};var Le=function(t){return t},Ce=it(b,"WeakMap"),Be=Ce&&new Ce,We=Be?function(t,e){return Be.set(t,e),t}:Le,Ne=Object.create,Ge=function(){function t(){}return function(e){if(!L(e))return{};if(Ne)return Ne(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var He=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Ge(t.prototype),n=t.apply(r,e);return L(n)?n:r}},Ve=1;var $e=function(t,e,r){var n=e&Ve,i=He(t);return function e(){return(this&&this!==b&&this instanceof e?i:t).apply(n?r:this,arguments)}};var qe=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},Ke=Math.max;var Ze=function(t,e,r,n){for(var i=-1,a=t.length,o=r.length,u=-1,c=e.length,s=Ke(a-o,0),f=Array(c+s),l=!n;++u<c;)f[u]=e[u];for(;++i<o;)(l||i<a)&&(f[r[i]]=t[i]);for(;s--;)f[u++]=t[i++];return f},Je=Math.max;var Xe=function(t,e,r,n){for(var i=-1,a=t.length,o=-1,u=r.length,c=-1,s=e.length,f=Je(a-u,0),l=Array(f+s),d=!n;++i<f;)l[i]=t[i];for(var v=i;++c<s;)l[v+c]=e[c];for(;++o<u;)(d||i<a)&&(l[v+r[o]]=t[i++]);return l};var Ye=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n};var Qe=function(){},tr=4294967295;function er(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tr,this.__views__=[]}er.prototype=Ge(Qe.prototype),er.prototype.constructor=er;var rr=er;var nr=Be?function(t){return Be.get(t)}:function(){},ir={},ar=Object.prototype.hasOwnProperty;var or=function(t){for(var e=t.name+"",r=ir[e],n=ar.call(ir,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e};function ur(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}ur.prototype=Ge(Qe.prototype),ur.prototype.constructor=ur;var cr=ur;var sr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var fr=function(t){if(t instanceof rr)return t.clone();var e=new cr(t.__wrapped__,t.__chain__);return e.__actions__=sr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},lr=Object.prototype.hasOwnProperty;function dr(t){if(x(t)&&!h(t)&&!(t instanceof rr)){if(t instanceof cr)return t;if(lr.call(t,"__wrapped__"))return fr(t)}return new cr(t)}dr.prototype=Qe.prototype,dr.prototype.constructor=dr;var vr=dr;var hr=function(t){var e=or(t),r=vr[e];if("function"!=typeof r||!(e in rr.prototype))return!1;if(t===r)return!0;var n=nr(r);return!!n&&t===n[0]},pr=800,yr=16,gr=Date.now;var _r=function(t){var e=0,r=0;return function(){var n=gr(),i=yr-(n-r);if(r=n,i>0){if(++e>=pr)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},br=_r(We),mr=/\{\n\/\* \[wrapped with (.+)\] \*/,wr=/,? & /;var jr=function(t){var e=t.match(mr);return e?e[1].split(wr):[]},Ar=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Sr=function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Ar,"{\n/* [wrapped with "+e+"] */\n")};var Ir=function(t){return function(){return t}},Or=_r(ee?function(t,e){return ee(t,"toString",{configurable:!0,enumerable:!1,value:Ir(e),writable:!0})}:Le);var Er=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var Fr=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1};var Pr=function(t){return t!=t};var Dr=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1};var Tr=function(t,e,r){return e==e?Dr(t,e,r):Fr(t,Pr,r)};var xr=function(t,e){return!(null==t||!t.length)&&Tr(t,e,0)>-1},Rr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var kr=function(t,e){return Er(Rr,function(r){var n="_."+r[0];e&r[1]&&!xr(t,n)&&t.push(n)}),t.sort()};var zr=function(t,e,r){var n=e+"";return Or(t,Sr(n,kr(jr(n),r)))},Ur=1,Mr=2,Lr=4,Cr=8,Br=32,Wr=64;var Nr=function(t,e,r,n,i,a,o,u,c,s){var f=e&Cr;e|=f?Br:Wr,(e&=~(f?Wr:Br))&Lr||(e&=~(Ur|Mr));var l=[t,e,i,f?a:void 0,f?o:void 0,f?void 0:a,f?void 0:o,u,c,s],d=r.apply(void 0,l);return hr(t)&&br(d,l),d.placeholder=n,zr(d,t,e)};var Gr=function(t){return t.placeholder},Hr=Math.min;var Vr=function(t,e){for(var r=t.length,n=Hr(e.length,r),i=sr(t);n--;){var a=e[n];t[n]=ue(a,r)?i[a]:void 0}return t},$r="__lodash_placeholder__";var qr=function(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==$r||(t[r]=$r,a[i++]=r)}return a},Kr=1,Zr=2,Jr=8,Xr=16,Yr=128,Qr=512;var tn=function t(e,r,n,i,a,o,u,c,s,f){var l=r&Yr,d=r&Kr,v=r&Zr,h=r&(Jr|Xr),p=r&Qr,y=v?void 0:He(e);return function g(){for(var _=arguments.length,m=Array(_),w=_;w--;)m[w]=arguments[w];if(h)var j=Gr(g),A=Ye(m,j);if(i&&(m=Ze(m,i,a,h)),o&&(m=Xe(m,o,u,h)),_-=A,h&&_<f){var S=qr(m,j);return Nr(e,r,t,g.placeholder,n,m,S,c,s,f-_)}var I=d?n:this,O=v?I[e]:e;return _=m.length,c?m=Vr(m,c):p&&_>1&&m.reverse(),l&&s<_&&(m.length=s),this&&this!==b&&this instanceof g&&(O=y||He(O)),O.apply(I,m)}};var en=function(t,e,r){var n=He(t);return function i(){for(var a=arguments.length,o=Array(a),u=a,c=Gr(i);u--;)o[u]=arguments[u];var s=a<3&&o[0]!==c&&o[a-1]!==c?[]:qr(o,c);return(a-=s.length)<r?Nr(t,e,tn,i.placeholder,void 0,o,s,void 0,void 0,r-a):qe(this&&this!==b&&this instanceof i?n:t,this,o)}},rn=1;var nn=function(t,e,r,n){var i=e&rn,a=He(t);return function e(){for(var o=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==b&&this instanceof e?a:t;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++o];return qe(l,i?r:this,f)}},an="__lodash_placeholder__",on=1,un=2,cn=4,sn=8,fn=128,ln=256,dn=Math.min;var vn=function(t,e){var r=t[1],n=e[1],i=r|n,a=i<(on|un|fn),o=n==fn&&r==sn||n==fn&&r==ln&&t[7].length<=e[8]||n==(fn|ln)&&e[7].length<=e[8]&&r==sn;if(!a&&!o)return t;n&on&&(t[2]=e[2],i|=r&on?0:cn);var u=e[3];if(u){var c=t[3];t[3]=c?Ze(c,u,e[4]):u,t[4]=c?qr(t[3],an):e[4]}return(u=e[5])&&(c=t[5],t[5]=c?Xe(c,u,e[6]):u,t[6]=c?qr(t[5],an):e[6]),(u=e[7])&&(t[7]=u),n&fn&&(t[8]=null==t[8]?e[8]:dn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},hn=NaN,pn=/^\s+|\s+$/g,yn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,_n=/^0o[0-7]+$/i,bn=parseInt;var mn=function(t){if("number"==typeof t)return t;if(k(t))return hn;if(L(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=L(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(pn,"");var r=gn.test(t);return r||_n.test(t)?bn(t.slice(2),r?2:8):yn.test(t)?hn:+t},wn=1/0,jn=17976931348623157e292;var An=function(t){return t?(t=mn(t))===wn||t===-wn?(t<0?-1:1)*jn:t==t?t:0:0===t?t:0};var Sn=function(t){var e=An(t),r=e%1;return e==e?r?e-r:e:0},In="Expected a function",On=1,En=2,Fn=8,Pn=16,Dn=32,Tn=64,xn=Math.max;var Rn=function(t,e,r,n,i,a,o,u){var c=e&En;if(!c&&"function"!=typeof t)throw new TypeError(In);var s=n?n.length:0;if(s||(e&=~(Dn|Tn),n=i=void 0),o=void 0===o?o:xn(Sn(o),0),u=void 0===u?u:Sn(u),s-=i?i.length:0,e&Tn){var f=n,l=i;n=i=void 0}var d=c?void 0:nr(t),v=[t,e,r,n,i,f,l,a,o,u];if(d&&vn(v,d),t=v[0],e=v[1],r=v[2],n=v[3],i=v[4],!(u=v[9]=void 0===v[9]?c?0:t.length:xn(v[9]-s,0))&&e&(Fn|Pn)&&(e&=~(Fn|Pn)),e&&e!=On)h=e==Fn||e==Pn?en(t,e,u):e!=Dn&&e!=(On|Dn)||i.length?tn.apply(void 0,v):nn(t,e,r,n);else var h=$e(t,e,r);return zr((d?We:br)(h,v),t,e)},kn=8;function zn(t,e,r){var n=Rn(t,kn,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return n.placeholder=zn.placeholder,n}zn.placeholder={};var Un=zn;var Mn=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r};var Ln=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),u=o.length;u--;){var c=o[t?u:++i];if(!1===r(a[c],c,a))break}return e}}();var Cn=function(t,e){return function(r,n){if(null==r)return r;if(!ze(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}(function(t,e){return t&&Ln(t,e,Ue)});var Bn=function(){this.__data__=new Ot,this.size=0};var Wn=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Nn=function(t){return this.__data__.get(t)};var Gn=function(t){return this.__data__.has(t)},Hn=200;var Vn=function(t,e){var r=this.__data__;if(r instanceof Ot){var n=r.__data__;if(!Et||n.length<Hn-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ut(n)}return r.set(t,e),this.size=r.size,this};function $n(t){var e=this.__data__=new Ot(t);this.size=e.size}$n.prototype.clear=Bn,$n.prototype.delete=Wn,$n.prototype.get=Nn,$n.prototype.has=Gn,$n.prototype.set=Vn;var qn=$n,Kn="__lodash_hash_undefined__";var Zn=function(t){return this.__data__.set(t,Kn),this};var Jn=function(t){return this.__data__.has(t)};function Xn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ut;++e<r;)this.add(t[e])}Xn.prototype.add=Xn.prototype.push=Zn,Xn.prototype.has=Jn;var Yn=Xn;var Qn=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var ti=function(t,e){return t.has(e)},ei=1,ri=2;var ni=function(t,e,r,n,i,a){var o=r&ei,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;var s=a.get(t);if(s&&a.get(e))return s==e;var f=-1,l=!0,d=r&ri?new Yn:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],h=e[f];if(n)var p=o?n(h,v,f,e,t,a):n(v,h,f,t,e,a);if(void 0!==p){if(p)continue;l=!1;break}if(d){if(!Qn(e,function(t,e){if(!ti(d,e)&&(v===t||i(v,t,r,n,a)))return d.push(e)})){l=!1;break}}else if(v!==h&&!i(v,h,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l},ii=b.Uint8Array;var ai=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r};var oi=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r},ui=1,ci=2,si="[object Boolean]",fi="[object Date]",li="[object Error]",di="[object Map]",vi="[object Number]",hi="[object RegExp]",pi="[object Set]",yi="[object String]",gi="[object Symbol]",_i="[object ArrayBuffer]",bi="[object DataView]",mi=m?m.prototype:void 0,wi=mi?mi.valueOf:void 0;var ji=function(t,e,r,n,i,a,o){switch(r){case bi:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _i:return!(t.byteLength!=e.byteLength||!a(new ii(t),new ii(e)));case si:case fi:case vi:return _t(+t,+e);case li:return t.name==e.name&&t.message==e.message;case hi:case yi:return t==e+"";case di:var u=ai;case pi:var c=n&ui;if(u||(u=oi),t.size!=e.size&&!c)return!1;var s=o.get(t);if(s)return s==e;n|=ci,o.set(t,e);var f=ni(u(t),u(e),n,i,a,o);return o.delete(t),f;case gi:if(wi)return wi.call(t)==wi.call(e)}return!1};var Ai=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t};var Si=function(t,e,r){var n=e(t);return h(t)?n:Ai(n,r(t))};var Ii=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a};var Oi=function(){return[]},Ei=Object.prototype.propertyIsEnumerable,Fi=Object.getOwnPropertySymbols,Pi=Fi?function(t){return null==t?[]:(t=Object(t),Ii(Fi(t),function(e){return Ei.call(t,e)}))}:Oi;var Di=function(t){return Si(t,Ue,Pi)},Ti=1,xi=Object.prototype.hasOwnProperty;var Ri=function(t,e,r,n,i,a){var o=r&Ti,u=Di(t),c=u.length;if(c!=Di(e).length&&!o)return!1;for(var s=c;s--;){var f=u[s];if(!(o?f in e:xi.call(e,f)))return!1}var l=a.get(t);if(l&&a.get(e))return l==e;var d=!0;a.set(t,e),a.set(e,t);for(var v=o;++s<c;){var h=t[f=u[s]],p=e[f];if(n)var y=o?n(p,h,f,e,t,a):n(h,p,f,t,e,a);if(!(void 0===y?h===p||i(h,p,r,n,a):y)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var g=t.constructor,_=e.constructor;g!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d},ki=it(b,"DataView"),zi=it(b,"Promise"),Ui=it(b,"Set"),Mi=Z(ki),Li=Z(Et),Ci=Z(zi),Bi=Z(Ui),Wi=Z(Ce),Ni=T;(ki&&"[object DataView]"!=Ni(new ki(new ArrayBuffer(1)))||Et&&"[object Map]"!=Ni(new Et)||zi&&"[object Promise]"!=Ni(zi.resolve())||Ui&&"[object Set]"!=Ni(new Ui)||Ce&&"[object WeakMap]"!=Ni(new Ce))&&(Ni=function(t){var e=T(t),r="[object Object]"==e?t.constructor:void 0,n=r?Z(r):"";if(n)switch(n){case Mi:return"[object DataView]";case Li:return"[object Map]";case Ci:return"[object Promise]";case Bi:return"[object Set]";case Wi:return"[object WeakMap]"}return e});var Gi=Ni,Hi=1,Vi="[object Arguments]",$i="[object Array]",qi="[object Object]",Ki=Object.prototype.hasOwnProperty;var Zi=function(t,e,r,n,i,a){var o=h(t),u=h(e),c=o?$i:Gi(t),s=u?$i:Gi(e),f=(c=c==Vi?qi:c)==qi,l=(s=s==Vi?qi:s)==qi,d=c==s;if(d&&_e(t)){if(!_e(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new qn),o||Oe(t)?ni(t,e,r,n,i,a):ji(t,e,c,r,n,i,a);if(!(r&Hi)){var v=f&&Ki.call(t,"__wrapped__"),p=l&&Ki.call(e,"__wrapped__");if(v||p){var y=v?t.value():t,g=p?e.value():e;return a||(a=new qn),i(y,g,r,n,a)}}return!!d&&(a||(a=new qn),Ri(t,e,r,n,i,a))};var Ji=function t(e,r,n,i,a){return e===r||(null==e||null==r||!x(e)&&!x(r)?e!=e&&r!=r:Zi(e,r,n,i,t,a))},Xi=1,Yi=2;var Qi=function(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var u=r[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=r[i])[0],s=t[c],f=u[1];if(o&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new qn;if(n)var d=n(s,f,c,t,e,l);if(!(void 0===d?Ji(f,s,Xi|Yi,n,l):d))return!1}}return!0};var ta=function(t){return t==t&&!L(t)};var ea=function(t){for(var e=Ue(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,ta(i)]}return e};var ra=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}};var na=function(t){var e=ea(t);return 1==e.length&&e[0][2]?ra(e[0][0],e[0][1]):function(r){return r===t||Qi(r,t,e)}};var ia=function(t,e){return null!=t&&e in Object(t)};var aa=function(t,e,r){for(var n=-1,i=(e=Jt(e,t)).length,a=!1;++n<i;){var o=Yt(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&me(i)&&ue(o,i)&&(h(t)||ye(t))};var oa=function(t,e){return null!=t&&aa(t,e,ia)},ua=1,ca=2;var sa=function(t,e){return M(t)&&ta(e)?ra(Yt(t),e):function(r){var n=te(r,t);return void 0===n&&n===e?oa(r,t):Ji(e,n,ua|ca)}};var fa=function(t){return function(e){return null==e?void 0:e[t]}};var la=function(t){return function(e){return Qt(e,t)}};var da=function(t){return M(t)?fa(Yt(t)):la(t)};var va=function(t){return"function"==typeof t?t:null==t?Le:"object"==typeof t?h(t)?sa(t[0],t[1]):na(t):da(t)};var ha=function(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r};var pa=function(t,e,r){var n=h(t)?Mn:ha,i=arguments.length<3;return n(t,va(e),r,i,Cn)};var ya=function(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var u=e[a],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),i?re(r,u,c):ie(r,u,c)}return r};var ga=function(t,e){return t&&ya(e,Ue(e),t)};var _a=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ba=Object.prototype.hasOwnProperty;var ma=function(t){if(!L(t))return _a(t);var e=De(t),r=[];for(var n in t)("constructor"!=n||!e&&ba.call(t,n))&&r.push(n);return r};var wa=function(t){return ze(t)?Fe(t,!0):ma(t)};var ja=function(t,e){return t&&ya(e,wa(e),t)},Aa=y(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?b.Buffer:void 0,a=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}});var Sa=function(t,e){return ya(t,Pi(t),e)},Ia=Te(Object.getPrototypeOf,Object),Oa=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ai(e,Pi(t)),t=Ia(t);return e}:Oi;var Ea=function(t,e){return ya(t,Oa(t),e)};var Fa=function(t){return Si(t,wa,Oa)},Pa=Object.prototype.hasOwnProperty;var Da=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Pa.call(t,"index")&&(r.index=t.index,r.input=t.input),r};var Ta=function(t){var e=new t.constructor(t.byteLength);return new ii(e).set(new ii(t)),e};var xa=function(t,e){var r=e?Ta(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ra=/\w*$/;var ka=function(t){var e=new t.constructor(t.source,Ra.exec(t));return e.lastIndex=t.lastIndex,e},za=m?m.prototype:void 0,Ua=za?za.valueOf:void 0;var Ma=function(t){return Ua?Object(Ua.call(t)):{}};var La=function(t,e){var r=e?Ta(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},Ca="[object Boolean]",Ba="[object Date]",Wa="[object Map]",Na="[object Number]",Ga="[object RegExp]",Ha="[object Set]",Va="[object String]",$a="[object Symbol]",qa="[object ArrayBuffer]",Ka="[object DataView]",Za="[object Float32Array]",Ja="[object Float64Array]",Xa="[object Int8Array]",Ya="[object Int16Array]",Qa="[object Int32Array]",to="[object Uint8Array]",eo="[object Uint8ClampedArray]",ro="[object Uint16Array]",no="[object Uint32Array]";var io=function(t,e,r){var n=t.constructor;switch(e){case qa:return Ta(t);case Ca:case Ba:return new n(+t);case Ka:return xa(t,r);case Za:case Ja:case Xa:case Ya:case Qa:case to:case eo:case ro:case no:return La(t,r);case Wa:return new n;case Na:case Va:return new n(t);case Ga:return ka(t);case Ha:return new n;case $a:return Ma(t)}};var ao=function(t){return"function"!=typeof t.constructor||De(t)?{}:Ge(Ia(t))},oo="[object Map]";var uo=function(t){return x(t)&&Gi(t)==oo},co=Se&&Se.isMap,so=co?Ae(co):uo,fo="[object Set]";var lo=function(t){return x(t)&&Gi(t)==fo},vo=Se&&Se.isSet,ho=vo?Ae(vo):lo,po=1,yo=2,go=4,_o="[object Arguments]",bo="[object Function]",mo="[object GeneratorFunction]",wo="[object Object]",jo={};jo[_o]=jo["[object Array]"]=jo["[object ArrayBuffer]"]=jo["[object DataView]"]=jo["[object Boolean]"]=jo["[object Date]"]=jo["[object Float32Array]"]=jo["[object Float64Array]"]=jo["[object Int8Array]"]=jo["[object Int16Array]"]=jo["[object Int32Array]"]=jo["[object Map]"]=jo["[object Number]"]=jo[wo]=jo["[object RegExp]"]=jo["[object Set]"]=jo["[object String]"]=jo["[object Symbol]"]=jo["[object Uint8Array]"]=jo["[object Uint8ClampedArray]"]=jo["[object Uint16Array]"]=jo["[object Uint32Array]"]=!0,jo["[object Error]"]=jo[bo]=jo["[object WeakMap]"]=!1;var Ao=function t(e,r,n,i,a,o){var u,c=r&po,s=r&yo,f=r&go;if(n&&(u=a?n(e,i,a,o):n(e)),void 0!==u)return u;if(!L(e))return e;var l=h(e);if(l){if(u=Da(e),!c)return sr(e,u)}else{var d=Gi(e),v=d==bo||d==mo;if(_e(e))return Aa(e,c);if(d==wo||d==_o||v&&!a){if(u=s||v?{}:ao(e),!c)return s?Ea(e,ja(u,e)):Sa(e,ga(u,e))}else{if(!jo[d])return a?e:{};u=io(e,d,c)}}o||(o=new qn);var p=o.get(e);if(p)return p;o.set(e,u),ho(e)?e.forEach(function(i){u.add(t(i,r,n,i,e,o))}):so(e)&&e.forEach(function(i,a){u.set(a,t(i,r,n,a,e,o))});var y=f?s?Fa:Di:s?keysIn:Ue,g=l?void 0:y(e);return Er(g||e,function(i,a){g&&(i=e[a=i]),ie(u,a,t(i,r,n,a,e,o))}),u},So=1,Io=4;var Oo=function(t){return Ao(t,So|Io)},Eo="[object Object]",Fo=Function.prototype,Po=Object.prototype,Do=Fo.toString,To=Po.hasOwnProperty,xo=Do.call(Object);var Ro=function(t){if(!x(t)||T(t)!=Eo)return!1;var e=Ia(t);if(null===e)return!0;var r=To.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Do.call(r)==xo},ko=y(function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,r=e.aliasToReal,n={};for(var i in r){var a=r[i];t.call(n,a)?n[a].push(i):n[a]=[i]}return n}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}}),zo=(ko.aliasToReal,ko.aryMethod,ko.aryRearg,ko.iterateeAry,ko.iterateeRearg,ko.methodRearg,ko.methodSpread,ko.mutate,ko.realToAlias,ko.remap,ko.skipFixed,ko.skipRearg,{}),Uo=Array.prototype.push;function Mo(t,e){return 2==e?function(e,r){return t(e,r)}:function(e){return t(e)}}function Lo(t){for(var e=t?t.length:0,r=Array(e);e--;)r[e]=t[e];return r}function Co(t,e){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var i=n[0]=e.apply(void 0,n);return t.apply(void 0,n),i}}}var Bo=function t(e,r,n,i){var a="function"==typeof r,o=r===Object(r);if(o&&(i=n,n=r,r=void 0),null==n)throw new TypeError;i||(i={});var u={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg},c=a?n:zo,s="curry"in i&&i.curry,f="fixed"in i&&i.fixed,l="rearg"in i&&i.rearg,d=a?n.runInContext():void 0,v=a?n:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},h=v.ary,p=v.assign,y=v.clone,g=v.curry,_=v.forEach,b=v.isArray,m=v.isError,w=v.isFunction,j=v.isWeakMap,A=v.keys,S=v.rearg,I=v.toInteger,O=v.toPath,E=A(ko.aryMethod),F={castArray:function(t){return function(){var e=arguments[0];return b(e)?t(Lo(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],r=arguments[1],n=t(e,r),i=n.length;return u.cap&&"number"==typeof r?(r=r>2?r-2:1,i&&i<=r?n:Mo(n,r)):n}},mixin:function(t){return function(e){var r=this;if(!w(r))return t(r,Object(e));var n=[];return _(A(e),function(t){w(e[t])&&n.push([t,r.prototype[t]])}),t(r,Object(e)),_(n,function(t){var e=t[1];w(e)?r.prototype[t[0]]=e:delete r.prototype[t[0]]}),r}},nthArg:function(t){return function(e){var r=e<0?1:I(e)+1;return g(t(e),r)}},rearg:function(t){return function(e,r){var n=r?r.length:0;return g(t(e,r),n)}},runInContext:function(r){return function(n){return t(e,r(n),i)}}};function P(t,e){if(u.cap){var r=ko.iterateeRearg[t];if(r)return function(t,e){return k(t,function(t){var r=e.length;return function(t,e){return 2==e?function(e,r){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(S(Mo(t,r),e),r)})}(e,r);var n=!a&&ko.iterateeAry[t];if(n)return function(t,e){return k(t,function(t){return"function"==typeof t?Mo(t,e):t})}(e,n)}return e}function D(t,e,r){if(u.fixed&&(f||!ko.skipFixed[t])){var n=ko.methodSpread[t],i=n&&n.start;return void 0===i?h(e,r):function(t,e){return function(){for(var r=arguments.length,n=r-1,i=Array(r);r--;)i[r]=arguments[r];var a=i[e],o=i.slice(0,e);return a&&Uo.apply(o,a),e!=n&&Uo.apply(o,i.slice(e+1)),t.apply(this,o)}}(e,i)}return e}function T(t,e,r){return u.rearg&&r>1&&(l||!ko.skipRearg[t])?S(e,ko.methodRearg[t]||ko.aryRearg[r]):e}function x(t,e){for(var r=-1,n=(e=O(e)).length,i=n-1,a=y(Object(t)),o=a;null!=o&&++r<n;){var u=e[r],c=o[u];null==c||w(c)||m(c)||j(c)||(o[u]=y(r==i?c:Object(c))),o=o[u]}return a}function R(e,r){var n=ko.aliasToReal[e]||e,o=ko.remap[n]||n,u=i;return function(e){var i=a?d:v,c=a?d[o]:r,s=p(p({},u),e);return t(i,n,c,s)}}function k(t,e){return function(){var r=arguments.length;if(!r)return t();for(var n=Array(r);r--;)n[r]=arguments[r];var i=u.rearg?0:r-1;return n[i]=e(n[i]),t.apply(void 0,n)}}function z(t,e,r){var n,i=ko.aliasToReal[t]||t,a=e,o=F[i];return o?a=o(e):u.immutable&&(ko.mutate.array[i]?a=Co(e,Lo):ko.mutate.object[i]?a=Co(e,function(t){return function(e){return t({},e)}}(e)):ko.mutate.set[i]&&(a=Co(e,x))),_(E,function(t){return _(ko.aryMethod[t],function(e){if(i==e){var r=ko.methodSpread[i],o=r&&r.afterRearg;return n=o?D(i,T(i,a,t),t):T(i,D(i,a,t),t),n=function(t,e,r){return s||u.curry&&r>1?g(e,r):e}(0,n=P(i,n),t),!1}}),!n}),n||(n=a),n==e&&(n=s?g(n,1):function(){return e.apply(this,arguments)}),n.convert=R(i,e),n.placeholder=e.placeholder=r,n}if(!o)return z(r,n,c);var U=n,M=[];return _(E,function(t){_(ko.aryMethod[t],function(t){var e=U[ko.remap[t]||t];e&&M.push([t,z(t,e,U)])})}),_(A(U),function(t){var e=U[t];if("function"==typeof e){for(var r=M.length;r--;)if(M[r][0]==t)return;e.convert=R(t,e),M.push([t,e])}}),_(M,function(t){U[t[0]]=t[1]}),U.convert=function(t){return U.runInContext.convert(t)(void 0)},U.placeholder=U,_(A(U),function(t){_(ko.realToAlias[t]||[],function(e){U[e]=U[t]})}),U},Wo=128;var No=function(t,e,r){return e=r?void 0:e,e=t&&null==e?t.length:e,Rn(t,Wo,void 0,void 0,void 0,void 0,e)},Go=4;var Ho=function(t){return Ao(t,Go)},Vo="[object DOMException]",$o="[object Error]";var qo=function(t){if(!x(t))return!1;var e=T(t);return e==$o||e==Vo||"string"==typeof t.message&&"string"==typeof t.name&&!Ro(t)},Ko="[object WeakMap]";var Zo=function(t){return x(t)&&Gi(t)==Ko},Jo=1;var Xo=function(t){return va("function"==typeof t?t:Ao(t,Jo))},Yo=m?m.isConcatSpreadable:void 0;var Qo=function(t){return h(t)||ye(t)||!!(Yo&&t&&t[Yo])};var tu=function t(e,r,n,i,a){var o=-1,u=e.length;for(n||(n=Qo),a||(a=[]);++o<u;){var c=e[o];r>0&&n(c)?r>1?t(c,r-1,n,i,a):Ai(a,c):i||(a[a.length]=c)}return a};var eu=function(t){return null!=t&&t.length?tu(t,1):[]},ru=Math.max;var nu=function(t,e,r){return e=ru(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=ru(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=n[i];return u[e]=r(o),qe(t,this,u)}};var iu=function(t){return Or(nu(t,void 0,eu),t+"")},au=iu(function(t,e){return Rn(t,256,void 0,void 0,void 0,e)});var ou=function(t){return h(t)?Ht(t,Yt):k(t)?[t]:sr(Gt(Zt(t)))},uu={ary:No,assign:ga,clone:Ho,curry:Un,forEach:Er,isArray:h,isError:qo,isFunction:H,isWeakMap:Zo,iteratee:Xo,keys:ke,rearg:au,toInteger:Sn,toPath:ou};var cu=function(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],u=Qt(t,o);r(u,o)&&ce(a,Jt(o,t),u)}return a};var su=function(t,e){return cu(t,e,function(e,r){return oa(t,r)})},fu=function(t,e,r){return Bo(uu,t,e,r)}("pick",iu(function(t,e){return null==t?{}:su(t,e)}));fu.placeholder=zo;var lu=fu;void 0===Symbol.asyncIterator&&(Symbol.asyncIterator=Symbol.for("asyncIterator"));var du={};function vu(t){console.warn("[FLAMELINK] "+t)}var hu=Un(function(t,e){var r;return(r={})[t]=e,r}),pu=Un(function(t,e){return e[t]}),yu=function(t){function e(e,r,n){void 0===r&&(r="generic-error"),void 0===n&&(n=!1);var i=t.call(this,"\n"+e+"\n")||this;return i.code=r,i.showStackTrace=n,i.name="FlamelinkError",i.showStackTrace||(i.stack=null),i}return c(e,t),e}(Error),gu=function(t){function e(e){var r=t.call(this)||this;if(r.callback=e,r.state="PENDING",r.internalValue=null,r.chain=[],"function"!=typeof e)throw new Error("The callback must be a function");var n=function(t){if("PENDING"!==r.state)return r.internalValue;r.state="REJECTED",r.internalValue=t,f(r,void 0,void 0,function(){var e,r,n,i,a,o;return l(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=v(this.chain),u.label=1;case 1:return[4,e.next()];case 2:if((r=u.sent()).done)return[3,4];if("function"==typeof(n=r.value.onRejected))return[2,n(t)];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i=u.sent(),a={error:i},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return[2]}})})},i=function(t){if("PENDING"!==r.state)return r.internalValue;var e=te(t,"then",null);if("function"==typeof e)return e(i,n);r.state="FULFILLED",r.internalValue=t,f(r,void 0,void 0,function(){var e,r,n,i,a,o;return l(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=v(this.chain),u.label=1;case 1:return[4,e.next()];case 2:if((r=u.sent()).done)return[3,4];if("function"==typeof(n=r.value.onFulfilled))return[2,n(t)];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i=u.sent(),a={error:i},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return[2]}})})};try{setTimeout(function(){return e(i,n,r)},0)}catch(t){n(t)}return r}return c(e,t),e.prototype.then=function(t,e){return f(this,void 0,void 0,function(){return l(this,function(r){return"FULFILLED"===this.state&&"function"==typeof t?[2,t(this.internalValue)]:"REJECTED"===this.state&&"function"==typeof e?[2,e(this.internalValue)]:(this.chain.push({onFulfilled:t,onRejected:e}),[2])})})},e.prototype.catch=function(t){return f(this,void 0,void 0,function(){return l(this,function(e){return"FULFILLED"===this.state?[2]:"REJECTED"===this.state&&"function"==typeof t?[2,t(this.internalValue)]:(this.chain.push({onFulfilled:void 0,onRejected:t}),[2])})})},e}(function(){function t(){this.events={"*":[]}}return t.prototype.on=function(t,e){var r=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),function(){return r.off(t,e)}},t.prototype.off=function(t,e){"object"==typeof this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}))},t.prototype.offAll=function(){var t=this;Object.keys(this.events).forEach(function(e){return t.events[e]=[]})},t.prototype.emit=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];"object"==typeof this.events[t]&&this.events[t].slice().forEach(function(t){return t.apply(e,r)}),this.events["*"].slice().forEach(function(n){return n.apply(e,[t].concat(r))})},t.prototype.once=function(t,e){var r=this,n=this.on(t,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n(),e.apply(r,t)});return n},t}()),_u=function(t){return t.usesAdminApp?te(t,"firebaseApp.firebaseInternals_.firebase_.storage"):te(t,"firebaseApp.firebase_.storage")},bu=function(t){return"cf"===t.dbType?te(function(t){return t.usesAdminApp?te(t,"firebaseApp.firebaseInternals_.firebase_.firestore"):te(t,"firebaseApp.firebase_.firestore")}(t),"Timestamp.now",function(){return(new Date).toISOString()})():(new Date).toISOString()},mu=function(t){var e=function(t){if("undefined"==typeof process||"test"!==process.env.NODE_ENV)return t.usesAdminApp?te(t,"firebaseApp.firebaseInternals_.firebase_.auth"):te(t,"firebaseApp.firebase_.auth")}(t);return"function"!=typeof e?"UNKNOWN":te(e(),"currentUser.uid","UNKNOWN")},wu=["limitToFirst","limitToLast","startAt","endAt","equalTo"],ju=["startAt","startAfter","endAt","endBefore"],Au=function(t,e){return function(t,e){return void 0===e&&(e={}),Ue(e).length?wu.reduce(function(t,r){var n=e[r];return void 0===n?t:t[r].apply(t,Me(n))},t):t}(function(t,e){if(e.orderByChild){if("string"!=typeof e.orderByChild||""===e.orderByChild)throw new yu('"orderByChild" should specify the child key to order by');return t.orderByChild(e.orderByChild)}return e.orderByValue?t.orderByValue():e.orderByKey?t.orderByKey():t}(t,e),e)},Su=function(t,e){if(!Ue(e).length)return t;if(e.orderBy){if("string"==typeof e.orderBy)return t.orderBy?t.orderBy(e.orderBy,"asc"):t;if(Ro(e.orderBy)&&e.orderBy.field)return t.orderBy?t.orderBy(e.orderBy.field,e.orderBy.order||"asc"):t;if(Array.isArray(e.orderBy))return e.orderBy.reduce(function(t,e){return Su(t,{orderBy:e})},t);vu('Ignored invalid "orderBy" parameters supplied.')}return t},Iu=Un(function(t,e){if(!e||!h(t))return e;var r=lu(t);return h(e)?pa(e,function(t,e){return t.concat(r(e))},[]):Ro(e)?pa(e,function(t,e,n){var i;return Object.assign(t,((i={})[n]=r(e),i))},{}):e}),Ou=function(t){return"object"==typeof t&&"function"==typeof te(t,"get")},Eu=Un(function(t,e,r){var n=e||{},i=n.idProperty,a=void 0===i?"id":i,o=n.parentProperty,u=void 0===o?"parentId":o,c=h(r)?r:Ue(r).map(function(t){return r[t]});if(!h(c))throw new yu('"formatStructure" should be called with an array of items');if("nested"===t||"tree"===t){var f=function(t,e){return void 0===e&&(e=0),t.map(function(t){return s({},t,{children:c.filter(function(e){return te(e,u)===te(t,a)})})}).filter(function(t){return te(t,u,0)===e}).map(function(t){return 0===t.children.length?t:s({},t,{children:f(t.children,te(t,a))})})};return f(c,0)}return c}),Fu=function(t,e){var r=function(t,e){return Ue(e).length&&Array.isArray(e.filters)?e.filters.reduce(function(t,e){return Array.isArray(e)?t.where?t.where.apply(t,e):t:(vu('The following invalid "filter" clause has been ignored: '+JSON.stringify(e)),t)},t):t}(t,e);return function(t,e){if(!Ue(e).length)return t;var r=ju.reduce(function(t,r){return void 0!==e[r]&&t[r]?t[r].apply(t,Me(e[r])):t},t);return te(e,"limit")&&(r=t.limit?t.limit(e.limit):t),r}(Su(r,e),e)},Pu=function(t){return void 0===du.prepPopulateFields&&(du.prepPopulateFields=Ct(function(t){return t&&h(t)?t.map(function(t){return"string"==typeof t?{field:t}:t}):[]},function(t){return JSON.stringify(t)})),du.prepPopulateFields(t)},Du=Un(function(t,e,r){return f(void 0,void 0,void 0,function(){var n,i,a,o=this;return l(this,function(u){return Ro(r)?(n=te(t,"modules.storage"),i=function(t){return f(o,void 0,void 0,function(){var r;return l(this,function(i){switch(i.label){case 0:return n?[4,n.getURL({fileId:t.id,size:e.size})]:(vu('The Flamelink "storage" module is not available. Please make sure it is imported and try again.'),[2,t]);case 1:return r=i.sent(),[2,se(t,"url",r)]}})})},[2,(a=function(t){return f(o,void 0,void 0,function(){var e=this;return l(this,function(r){switch(r.label){case 0:return Array.isArray(t)?[2,Promise.all(t.map(function(t){return f(e,void 0,void 0,function(){return l(this,function(e){return[2,a(t)]})})}))]:Ro(t)?(n=t).hasOwnProperty("file")&&n.hasOwnProperty("id")&&n.hasOwnProperty("contentType")&&n.hasOwnProperty("folderId")?[2,i(t)]:[4,Promise.all(Ue(t).map(function(r){return f(e,void 0,void 0,function(){var e;return l(this,function(n){switch(n.label){case 0:return e={propKey:r},[4,a(t[r])];case 1:return[2,(e.propValue=n.sent(),e)]}})})}))]:[3,2];case 1:return[2,r.sent().reduce(function(t,e){return se(t,e.propKey,e.propValue)},s({},t))];case 2:return[2,t]}var n})})})(r)]):[2,r]})})}),Tu=Un(function(t,r,n){return f(void 0,void 0,void 0,function(){var i,a,o,u=this;return l(this,function(c){switch(c.label){case 0:return Ro(n)&&te(r,"populate")&&(i=te(t,"services.firestore"))?(a=!0===r.populate,o=[],h(r.populate)?o=Pu(r.populate):a&&(o=Pu(Object.keys(n))),[4,Promise.all(o.map(function(r){return f(u,void 0,void 0,function(){var o,u,c,s,d,v,h,p,y=this;return l(this,function(g){switch(g.label){case 0:return o=r.field,u=r.populate,c=r.subFields,s=te(n,o),d=Du(t,r),v=Tu(t,{populate:!!a||(Array.isArray(c)?c:u)}),h=function(t){return f(y,void 0,void 0,function(){var r,n,a=this;return l(this,function(o){switch(o.label){case 0:return[4,i.doc(t.path).get()];case 1:return"function"==typeof(r=o.sent()).forEach?(n=[],r.forEach(function(t){return f(a,void 0,void 0,function(){return l(this,function(e){return[2,n.push(v(t.data()))]})})}),[2,Promise.all(n)]):[4,e(v,d)(r.data())];case 2:return[2,o.sent()]}})})},p=s,Array.isArray(s)?[4,Promise.all(s.map(function(t){return f(y,void 0,void 0,function(){return l(this,function(e){return Ou(t)?[2,h(t)]:[2,v(t)]})})}))]:[3,2];case 1:return p=g.sent(),[3,6];case 2:return Ro(s)?[4,v(s)]:[3,4];case 3:return p=g.sent(),[3,6];case 4:return Ou(s)?[4,h(s)]:[3,6];case 5:p=g.sent(),g.label=6;case 6:return[2,{fieldKey:o,fieldValue:p}]}})})}))]):[2,n];case 1:return[2,c.sent().reduce(function(t,e){return se(t,e.fieldKey,e.fieldValue)},s({},n))]}})})}),xu=(Un(function(t,e,r){return f(void 0,void 0,void 0,function(){var n=this;return l(this,function(i){switch(i.label){case 0:return Array.isArray(r)?[2,Promise.all(r.map(function(r){return f(n,void 0,void 0,function(){return l(this,function(n){return[2,Tu(t,e,r)]})})}))]:Ro(r)?[4,Promise.all(Ue(r).map(function(i){return f(n,void 0,void 0,function(){return l(this,function(n){return[2,Tu(t,e,r[i])]})})}))]:[3,2];case 1:return[2,i.sent().reduce(function(t,e){return t.then(function(t){return f(n,void 0,void 0,function(){var r;return l(this,function(n){return[2,Object.assign(t,(r={},r[te(e,"_fl_meta_.fl_id",e.id)]=e,r))]})})})},Promise.resolve({}))];case 2:return[2,r]}})})}),Un(function(t,e){return{start:function(){return e.reduce(function(e,r,n){return e.then(function(e){return f(void 0,void 0,void 0,function(){var i;return l(this,function(a){switch(a.label){case 0:return[4,t(r,n)];case 1:return i=a.sent(),[2,e.concat([i])]}})})})},Promise.resolve([]))}}}),function(t,e){return f(void 0,void 0,void 0,function(){var r=this;return l(this,function(n){return[2,e.reduce(function(e,n){return f(r,void 0,void 0,function(){var r=this;return l(this,function(i){switch(n.type){case"media":return[2,e.then(function(t){return t.concat({field:n.key})})];case"select-relational":case"tree-relational":return[2,e.then(function(e){return f(r,void 0,void 0,function(){var r,i,a,o,u;return l(this,function(c){switch(c.label){case 0:return i=(r=e).concat,a={field:n.key},o=xu,u=[t],[4,t.getFields({schemaKey:n.relation})];case 1:return[4,o.apply(void 0,u.concat([c.sent()]))];case 2:return[2,i.apply(r,[(a.populate=c.sent(),a)])]}})})})];case"fieldset":case"repeater":return[2,e.then(function(e){return f(r,void 0,void 0,function(){var r,i,a;return l(this,function(o){switch(o.label){case 0:return i=(r=e).concat,a={field:n.key},[4,xu(t,n.options)];case 1:return[2,i.apply(r,[(a.subFields=o.sent(),a)])]}})})})];default:return[2,e]}return[2]})})},Promise.resolve([]))]})})}),Ru=Un(function(t,r,n,i){return f(void 0,void 0,void 0,function(){var a,o,u,c,d,v,p,y,g=this;return l(this,function(_){switch(_.label){case 0:if(!i)return[2,i];if(0===(a=Ue(i)).length)throw new yu('"populateEntry" should be called with an object of objects');return o=t.modules.content,u=t.modules.schemas,c=t.modules.storage,d=Un(function(r,n,i,a){return f(g,void 0,void 0,function(){var u,v,p=this;return l(this,function(y){switch(y.label){case 0:return i[0]&&(u=function(t,e){return t.reduce(function(t,r){var n=e&&e.find(function(t){return t.key===r.field});return n?n.relation?t.concat([s({},r,{contentType:n.relation,populateType:"relational"})]):"media"===n.type?t.concat([s({},r,{populateType:"media"})]):"repeater"===n.type&&h(r.subFields)?t.concat([s({},r,{populateType:"repeater"})]):"fieldset"===n.type&&h(r.subFields)?t.concat([s({},r,{populateType:"fieldset"})]):t:t},[])}(i,n))[0]?[4,Promise.all(u.map(function(i){return f(p,void 0,void 0,function(){var u,v,p,y,g,_,b,m,w,j,A=this;return l(this,function(S){switch(S.label){case 0:switch(u=i.field,v=i.subFields,p=i.contentType,y=i.populateType,y){case"media":return[3,1];case"relational":return[3,2];case"repeater":return[3,3];case"fieldset":return[3,4]}return[3,7];case 1:if(r[a]&&r[a].hasOwnProperty(u)){if(g=r[a][u]||[],!h(g))throw new yu('The "'+u+'" field does not seem to be a valid media property.');return[2,Promise.all(g.map(function(r){return f(A,void 0,void 0,function(){var n,a,o,u,f;return l(this,function(l){switch(l.label){case 0:return n=Iu(i.fields),a=Ru(t,p,i.populate),[4,Promise.all([c.getFile(s({},i,{fileId:r})),c.getURL(s({},i,{fileId:r}))])];case 1:return o=l.sent(),u=o[0],f=o[1],[4,e(pu(r),a,n,hu(r))(s({},u,{url:f}))];case 2:return[2,l.sent()]}})})}))]}return[2,null];case 2:return r[a]&&r[a].hasOwnProperty(u)?(_=r[a][u],_=Me(_),[2,Promise.all(_.map(function(t){return f(A,void 0,void 0,function(){return l(this,function(e){return[2,o.get(s({},i,{schemaKey:p,entryId:t}))]})})}))]):[2,null];case 3:if(r[a]&&r[a].hasOwnProperty(u)){if(b=r[a][u]||[],!h(b))throw new yu('The "'+u+'" field does not seem to be a valid repeater field.');return m=n&&n.find(function(t){return t.key===u}),[2,Promise.all(b.map(function(t,e){return f(A,void 0,void 0,function(){var r,n;return l(this,function(i){switch(i.label){case 0:return r=e.toString(),[4,d(hu(r,t),m.options||[],Pu(v),r)];case 1:return n=i.sent(),[2,pu(r,n)]}})})}))]}return[2,null];case 4:if(!r[a]||!r[a].hasOwnProperty(u))return[3,6];if(w=r[a][u],!Ro(w))throw new yu('The "'+u+'" field does not seem to be a valid fieldset field.');return j=n&&n.find(function(t){return t.key===u}),[4,Promise.all(Ue(w).map(function(t,e){return f(A,void 0,void 0,function(){var r,n,i;return l(this,function(a){switch(a.label){case 0:return r=e.toString(),[4,d(hu(r,(i={},i[t]=w[t],i)),j.options||[],Pu(v),r)];case 1:return n=a.sent(),[2,pu(r,n)]}})})}))];case 5:return[2,S.sent().reduce(function(t,e){return Object.assign(t,e)},{})];case 6:return[2,null];case 7:return[2,r[a][u]]}})})}))]:[2,r];case 1:return v=y.sent(),[2,u.reduce(function(t,e,r){var n=e.field;return t[a]&&t[a].hasOwnProperty(n)&&(t[a][n]=v[r]),t},Oo(r))]}})})}),[4,u.getFields({schemaKey:r})];case 1:return v=_.sent(),!0!==n?[3,3]:[4,xu(u,v)];case 2:n=_.sent(),_.label=3;case 3:return p=Pu(n),[4,Promise.all(a.map(d(i,v,p)))];case 4:return y=_.sent(),[2,a.reduce(function(t,e,r){var n;return Object.assign(t,((n={})[e]=y[r][e],n))},{})]}})})}),ku=(Un(function(t,e,r,n){return f(void 0,void 0,void 0,function(){var i=this;return l(this,function(a){return Array.isArray(n)?[2,Promise.all(n.map(function(n){return f(i,void 0,void 0,function(){return l(this,function(i){return[2,Ru(t,e,r,n)]})})}))]:[2,[]]})})}),function(){return(ku=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)});function zu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function Uu(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function u(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(o,u)}c((n=n.apply(t,e||[])).next())})}function Mu(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var Lu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Cu(t,e){return t(e={exports:{}},e.exports),e.exports}var Bu="object"==typeof Lu&&Lu&&Lu.Object===Object&&Lu,Wu="object"==typeof self&&self&&self.Object===Object&&self,Nu=Bu||Wu||Function("return this")(),Gu=Nu.Symbol,Hu=Object.prototype,Vu=Hu.hasOwnProperty,$u=Hu.toString,qu=Gu?Gu.toStringTag:void 0;var Ku=function(t){var e=Vu.call(t,qu),r=t[qu];try{t[qu]=void 0;var n=!0}catch(t){}var i=$u.call(t);return n&&(e?t[qu]=r:delete t[qu]),i},Zu=Object.prototype.toString;var Ju=function(t){return Zu.call(t)},Xu="[object Null]",Yu="[object Undefined]",Qu=Gu?Gu.toStringTag:void 0;var tc=function(t){return null==t?void 0===t?Yu:Xu:Qu&&Qu in Object(t)?Ku(t):Ju(t)};var ec=function(t,e){return function(r){return t(e(r))}},rc=ec(Object.getPrototypeOf,Object);var nc=function(t){return null!=t&&"object"==typeof t},ic="[object Object]",ac=Function.prototype,oc=Object.prototype,uc=ac.toString,cc=oc.hasOwnProperty,sc=uc.call(Object);var fc=function(t){if(!nc(t)||tc(t)!=ic)return!1;var e=rc(t);if(null===e)return!0;var r=cc.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&uc.call(r)==sc};var lc=function(){this.__data__=[],this.size=0};var dc=function(t,e){return t===e||t!=t&&e!=e};var vc=function(t,e){for(var r=t.length;r--;)if(dc(t[r][0],e))return r;return-1},hc=Array.prototype.splice;var pc=function(t){var e=this.__data__,r=vc(e,t);return!(r<0||(r==e.length-1?e.pop():hc.call(e,r,1),--this.size,0))};var yc=function(t){var e=this.__data__,r=vc(e,t);return r<0?void 0:e[r][1]};var gc=function(t){return vc(this.__data__,t)>-1};var _c=function(t,e){var r=this.__data__,n=vc(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function bc(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}bc.prototype.clear=lc,bc.prototype.delete=pc,bc.prototype.get=yc,bc.prototype.has=gc,bc.prototype.set=_c;var mc=bc;var wc=function(){this.__data__=new mc,this.size=0};var jc=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Ac=function(t){return this.__data__.get(t)};var Sc=function(t){return this.__data__.has(t)};var Ic=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Oc="[object AsyncFunction]",Ec="[object Function]",Fc="[object GeneratorFunction]",Pc="[object Proxy]";var Dc=function(t){if(!Ic(t))return!1;var e=tc(t);return e==Ec||e==Fc||e==Oc||e==Pc},Tc=Nu["__core-js_shared__"],xc=function(){var t=/[^.]+$/.exec(Tc&&Tc.keys&&Tc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var Rc=function(t){return!!xc&&xc in t},kc=Function.prototype.toString;var zc=function(t){if(null!=t){try{return kc.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Uc=/^\[object .+?Constructor\]$/,Mc=Function.prototype,Lc=Object.prototype,Cc=Mc.toString,Bc=Lc.hasOwnProperty,Wc=RegExp("^"+Cc.call(Bc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Nc=function(t){return!(!Ic(t)||Rc(t))&&(Dc(t)?Wc:Uc).test(zc(t))};var Gc=function(t,e){return null==t?void 0:t[e]};var Hc=function(t,e){var r=Gc(t,e);return Nc(r)?r:void 0},Vc=Hc(Nu,"Map"),$c=Hc(Object,"create");var qc=function(){this.__data__=$c?$c(null):{},this.size=0};var Kc=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Zc="__lodash_hash_undefined__",Jc=Object.prototype.hasOwnProperty;var Xc=function(t){var e=this.__data__;if($c){var r=e[t];return r===Zc?void 0:r}return Jc.call(e,t)?e[t]:void 0},Yc=Object.prototype.hasOwnProperty;var Qc=function(t){var e=this.__data__;return $c?void 0!==e[t]:Yc.call(e,t)},ts="__lodash_hash_undefined__";var es=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=$c&&void 0===e?ts:e,this};function rs(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rs.prototype.clear=qc,rs.prototype.delete=Kc,rs.prototype.get=Xc,rs.prototype.has=Qc,rs.prototype.set=es;var ns=rs;var is=function(){this.size=0,this.__data__={hash:new ns,map:new(Vc||mc),string:new ns}};var as=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var os=function(t,e){var r=t.__data__;return as(e)?r["string"==typeof e?"string":"hash"]:r.map};var us=function(t){var e=os(this,t).delete(t);return this.size-=e?1:0,e};var cs=function(t){return os(this,t).get(t)};var ss=function(t){return os(this,t).has(t)};var fs=function(t,e){var r=os(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ls(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ls.prototype.clear=is,ls.prototype.delete=us,ls.prototype.get=cs,ls.prototype.has=ss,ls.prototype.set=fs;var ds=ls,vs=200;var hs=function(t,e){var r=this.__data__;if(r instanceof mc){var n=r.__data__;if(!Vc||n.length<vs-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ds(n)}return r.set(t,e),this.size=r.size,this};function ps(t){var e=this.__data__=new mc(t);this.size=e.size}ps.prototype.clear=wc,ps.prototype.delete=jc,ps.prototype.get=Ac,ps.prototype.has=Sc,ps.prototype.set=hs;var ys=ps,gs="__lodash_hash_undefined__";var _s=function(t){return this.__data__.set(t,gs),this};var bs=function(t){return this.__data__.has(t)};function ms(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ds;++e<r;)this.add(t[e])}ms.prototype.add=ms.prototype.push=_s,ms.prototype.has=bs;var ws=ms;var js=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var As=function(t,e){return t.has(e)},Ss=1,Is=2;var Os=function(t,e,r,n,i,a){var o=r&Ss,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;var s=a.get(t);if(s&&a.get(e))return s==e;var f=-1,l=!0,d=r&Is?new ws:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],h=e[f];if(n)var p=o?n(h,v,f,e,t,a):n(v,h,f,t,e,a);if(void 0!==p){if(p)continue;l=!1;break}if(d){if(!js(e,function(t,e){if(!As(d,e)&&(v===t||i(v,t,r,n,a)))return d.push(e)})){l=!1;break}}else if(v!==h&&!i(v,h,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l},Es=Nu.Uint8Array;var Fs=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r};var Ps=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r},Ds=1,Ts=2,xs="[object Boolean]",Rs="[object Date]",ks="[object Error]",zs="[object Map]",Us="[object Number]",Ms="[object RegExp]",Ls="[object Set]",Cs="[object String]",Bs="[object Symbol]",Ws="[object ArrayBuffer]",Ns="[object DataView]",Gs=Gu?Gu.prototype:void 0,Hs=Gs?Gs.valueOf:void 0;var Vs=function(t,e,r,n,i,a,o){switch(r){case Ns:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ws:return!(t.byteLength!=e.byteLength||!a(new Es(t),new Es(e)));case xs:case Rs:case Us:return dc(+t,+e);case ks:return t.name==e.name&&t.message==e.message;case Ms:case Cs:return t==e+"";case zs:var u=Fs;case Ls:var c=n&Ds;if(u||(u=Ps),t.size!=e.size&&!c)return!1;var s=o.get(t);if(s)return s==e;n|=Ts,o.set(t,e);var f=Os(u(t),u(e),n,i,a,o);return o.delete(t),f;case Bs:if(Hs)return Hs.call(t)==Hs.call(e)}return!1};var $s=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},qs=Array.isArray;var Ks=function(t,e,r){var n=e(t);return qs(t)?n:$s(n,r(t))};var Zs=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a};var Js=function(){return[]},Xs=Object.prototype.propertyIsEnumerable,Ys=Object.getOwnPropertySymbols,Qs=Ys?function(t){return null==t?[]:(t=Object(t),Zs(Ys(t),function(e){return Xs.call(t,e)}))}:Js;var tf=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},ef="[object Arguments]";var rf=function(t){return nc(t)&&tc(t)==ef},nf=Object.prototype,af=nf.hasOwnProperty,of=nf.propertyIsEnumerable,uf=rf(function(){return arguments}())?rf:function(t){return nc(t)&&af.call(t,"callee")&&!of.call(t,"callee")};var cf=function(){return!1},sf=Cu(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?Nu.Buffer:void 0,a=(i?i.isBuffer:void 0)||cf;t.exports=a}),ff=9007199254740991,lf=/^(?:0|[1-9]\d*)$/;var df=function(t,e){var r=typeof t;return!!(e=null==e?ff:e)&&("number"==r||"symbol"!=r&&lf.test(t))&&t>-1&&t%1==0&&t<e},vf=9007199254740991;var hf=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=vf},pf={};pf["[object Float32Array]"]=pf["[object Float64Array]"]=pf["[object Int8Array]"]=pf["[object Int16Array]"]=pf["[object Int32Array]"]=pf["[object Uint8Array]"]=pf["[object Uint8ClampedArray]"]=pf["[object Uint16Array]"]=pf["[object Uint32Array]"]=!0,pf["[object Arguments]"]=pf["[object Array]"]=pf["[object ArrayBuffer]"]=pf["[object Boolean]"]=pf["[object DataView]"]=pf["[object Date]"]=pf["[object Error]"]=pf["[object Function]"]=pf["[object Map]"]=pf["[object Number]"]=pf["[object Object]"]=pf["[object RegExp]"]=pf["[object Set]"]=pf["[object String]"]=pf["[object WeakMap]"]=!1;var yf=function(t){return nc(t)&&hf(t.length)&&!!pf[tc(t)]};var gf=function(t){return function(e){return t(e)}},_f=Cu(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&Bu.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}),bf=_f&&_f.isTypedArray,mf=bf?gf(bf):yf,wf=Object.prototype.hasOwnProperty;var jf=function(t,e){var r=qs(t),n=!r&&uf(t),i=!r&&!n&&sf(t),a=!r&&!n&&!i&&mf(t),o=r||n||i||a,u=o?tf(t.length,String):[],c=u.length;for(var s in t)!e&&!wf.call(t,s)||o&&("length"==s||i&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||df(s,c))||u.push(s);return u},Af=Object.prototype;var Sf=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Af)},If=ec(Object.keys,Object),Of=Object.prototype.hasOwnProperty;var Ef=function(t){if(!Sf(t))return If(t);var e=[];for(var r in Object(t))Of.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Ff=function(t){return null!=t&&hf(t.length)&&!Dc(t)};var Pf=function(t){return Ff(t)?jf(t):Ef(t)};var Df=function(t){return Ks(t,Pf,Qs)},Tf=1,xf=Object.prototype.hasOwnProperty;var Rf=function(t,e,r,n,i,a){var o=r&Tf,u=Df(t),c=u.length;if(c!=Df(e).length&&!o)return!1;for(var s=c;s--;){var f=u[s];if(!(o?f in e:xf.call(e,f)))return!1}var l=a.get(t);if(l&&a.get(e))return l==e;var d=!0;a.set(t,e),a.set(e,t);for(var v=o;++s<c;){var h=t[f=u[s]],p=e[f];if(n)var y=o?n(p,h,f,e,t,a):n(h,p,f,t,e,a);if(!(void 0===y?h===p||i(h,p,r,n,a):y)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var g=t.constructor,_=e.constructor;g!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d},kf=Hc(Nu,"DataView"),zf=Hc(Nu,"Promise"),Uf=Hc(Nu,"Set"),Mf=Hc(Nu,"WeakMap"),Lf=zc(kf),Cf=zc(Vc),Bf=zc(zf),Wf=zc(Uf),Nf=zc(Mf),Gf=tc;(kf&&"[object DataView]"!=Gf(new kf(new ArrayBuffer(1)))||Vc&&"[object Map]"!=Gf(new Vc)||zf&&"[object Promise]"!=Gf(zf.resolve())||Uf&&"[object Set]"!=Gf(new Uf)||Mf&&"[object WeakMap]"!=Gf(new Mf))&&(Gf=function(t){var e=tc(t),r="[object Object]"==e?t.constructor:void 0,n=r?zc(r):"";if(n)switch(n){case Lf:return"[object DataView]";case Cf:return"[object Map]";case Bf:return"[object Promise]";case Wf:return"[object Set]";case Nf:return"[object WeakMap]"}return e});var Hf=Gf,Vf=1,$f="[object Arguments]",qf="[object Array]",Kf="[object Object]",Zf=Object.prototype.hasOwnProperty;var Jf=function(t,e,r,n,i,a){var o=qs(t),u=qs(e),c=o?qf:Hf(t),s=u?qf:Hf(e),f=(c=c==$f?Kf:c)==Kf,l=(s=s==$f?Kf:s)==Kf,d=c==s;if(d&&sf(t)){if(!sf(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new ys),o||mf(t)?Os(t,e,r,n,i,a):Vs(t,e,c,r,n,i,a);if(!(r&Vf)){var v=f&&Zf.call(t,"__wrapped__"),h=l&&Zf.call(e,"__wrapped__");if(v||h){var p=v?t.value():t,y=h?e.value():e;return a||(a=new ys),i(p,y,r,n,a)}}return!!d&&(a||(a=new ys),Rf(t,e,r,n,i,a))};var Xf=function t(e,r,n,i,a){return e===r||(null==e||null==r||!nc(e)&&!nc(r)?e!=e&&r!=r:Jf(e,r,n,i,t,a))},Yf=1,Qf=2;var tl=function(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var u=r[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=r[i])[0],s=t[c],f=u[1];if(o&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new ys;if(n)var d=n(s,f,c,t,e,l);if(!(void 0===d?Xf(f,s,Yf|Qf,n,l):d))return!1}}return!0};var el=function(t){return t==t&&!Ic(t)};var rl=function(t){for(var e=Pf(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,el(i)]}return e};var nl=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}};var il=function(t){var e=rl(t);return 1==e.length&&e[0][2]?nl(e[0][0],e[0][1]):function(r){return r===t||tl(r,t,e)}},al="[object Symbol]";var ol=function(t){return"symbol"==typeof t||nc(t)&&tc(t)==al},ul=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cl=/^\w*$/;var sl=function(t,e){if(qs(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ol(t))||cl.test(t)||!ul.test(t)||null!=e&&t in Object(e)},fl="Expected a function";function ll(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(fl);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(ll.Cache||ds),r}ll.Cache=ds;var dl=ll,vl=500;var hl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pl=/\\(\\)?/g,yl=function(t){var e=dl(t,function(t){return r.size===vl&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(hl,function(t,r,n,i){e.push(n?i.replace(pl,"$1"):r||t)}),e});var gl=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},_l=1/0,bl=Gu?Gu.prototype:void 0,ml=bl?bl.toString:void 0;var wl=function t(e){if("string"==typeof e)return e;if(qs(e))return gl(e,t)+"";if(ol(e))return ml?ml.call(e):"";var r=e+"";return"0"==r&&1/e==-_l?"-0":r};var jl=function(t){return null==t?"":wl(t)};var Al=function(t,e){return qs(t)?t:sl(t,e)?[t]:yl(jl(t))},Sl=1/0;var Il=function(t){if("string"==typeof t||ol(t))return t;var e=t+"";return"0"==e&&1/t==-Sl?"-0":e};var Ol=function(t,e){for(var r=0,n=(e=Al(e,t)).length;null!=t&&r<n;)t=t[Il(e[r++])];return r&&r==n?t:void 0};var El=function(t,e,r){var n=null==t?void 0:Ol(t,e);return void 0===n?r:n};var Fl=function(t,e){return null!=t&&e in Object(t)};var Pl=function(t,e,r){for(var n=-1,i=(e=Al(e,t)).length,a=!1;++n<i;){var o=Il(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&hf(i)&&df(o,i)&&(qs(t)||uf(t))};var Dl=function(t,e){return null!=t&&Pl(t,e,Fl)},Tl=1,xl=2;var Rl=function(t,e){return sl(t)&&el(e)?nl(Il(t),e):function(r){var n=El(r,t);return void 0===n&&n===e?Dl(r,t):Xf(e,n,Tl|xl)}};var kl=function(t){return t};var zl=function(t){return function(e){return null==e?void 0:e[t]}};var Ul=function(t){return function(e){return Ol(e,t)}};var Ml=function(t){return sl(t)?zl(Il(t)):Ul(t)};var Ll=function(t){return"function"==typeof t?t:null==t?kl:"object"==typeof t?qs(t)?Rl(t[0],t[1]):il(t):Ml(t)};var Cl=function(t){return function(e,r,n){var i=Object(e);if(!Ff(e)){var a=Ll(r);e=Pf(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}};var Bl=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1},Wl=NaN,Nl=/^\s+|\s+$/g,Gl=/^[-+]0x[0-9a-f]+$/i,Hl=/^0b[01]+$/i,Vl=/^0o[0-7]+$/i,$l=parseInt;var ql=function(t){if("number"==typeof t)return t;if(ol(t))return Wl;if(Ic(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ic(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Nl,"");var r=Hl.test(t);return r||Vl.test(t)?$l(t.slice(2),r?2:8):Gl.test(t)?Wl:+t},Kl=1/0,Zl=17976931348623157e292;var Jl=function(t){return t?(t=ql(t))===Kl||t===-Kl?(t<0?-1:1)*Zl:t==t?t:0:0===t?t:0};var Xl=function(t){var e=Jl(t),r=e%1;return e==e?r?e-r:e:0},Yl=Math.max;var Ql=Cl(function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Xl(r);return i<0&&(i=Yl(n+i,0)),Bl(t,Ll(e),i)}),td=function(){try{var t=Hc(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var ed=function(t,e,r){"__proto__"==e&&td?td(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},rd=Object.prototype.hasOwnProperty;var nd=function(t,e,r){var n=t[e];rd.call(t,e)&&dc(n,r)&&(void 0!==r||e in t)||ed(t,e,r)};var id=function(t,e,r,n){if(!Ic(t))return t;for(var i=-1,a=(e=Al(e,t)).length,o=a-1,u=t;null!=u&&++i<a;){var c=Il(e[i]),s=r;if(i!=o){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=Ic(f)?f:df(e[i+1])?[]:{})}nd(u,c,s),u=u[c]}return t};var ad=function(t,e,r){return null==t?t:id(t,e,r)};var od=function(t,e){return gl(e,function(e){return t[e]})};var ud=function(t){return null==t?[]:od(t,Pf(t))},cd=Mf&&new Mf,sd=cd?function(t,e){return cd.set(t,e),t}:kl,fd=Object.create,ld=function(){function t(){}return function(e){if(!Ic(e))return{};if(fd)return fd(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var dd=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=ld(t.prototype),n=t.apply(r,e);return Ic(n)?n:r}},vd=1;var hd=function(t,e,r){var n=e&vd,i=dd(t);return function e(){return(this&&this!==Nu&&this instanceof e?i:t).apply(n?r:this,arguments)}};var pd=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},yd=Math.max;var gd=function(t,e,r,n){for(var i=-1,a=t.length,o=r.length,u=-1,c=e.length,s=yd(a-o,0),f=Array(c+s),l=!n;++u<c;)f[u]=e[u];for(;++i<o;)(l||i<a)&&(f[r[i]]=t[i]);for(;s--;)f[u++]=t[i++];return f},_d=Math.max;var bd=function(t,e,r,n){for(var i=-1,a=t.length,o=-1,u=r.length,c=-1,s=e.length,f=_d(a-u,0),l=Array(f+s),d=!n;++i<f;)l[i]=t[i];for(var v=i;++c<s;)l[v+c]=e[c];for(;++o<u;)(d||i<a)&&(l[v+r[o]]=t[i++]);return l};var md=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n};var wd=function(){},jd=4294967295;function Ad(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jd,this.__views__=[]}Ad.prototype=ld(wd.prototype),Ad.prototype.constructor=Ad;var Sd=Ad;var Id=cd?function(t){return cd.get(t)}:function(){},Od={},Ed=Object.prototype.hasOwnProperty;var Fd=function(t){for(var e=t.name+"",r=Od[e],n=Ed.call(Od,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e};function Pd(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Pd.prototype=ld(wd.prototype),Pd.prototype.constructor=Pd;var Dd=Pd;var Td=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var xd=function(t){if(t instanceof Sd)return t.clone();var e=new Dd(t.__wrapped__,t.__chain__);return e.__actions__=Td(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},Rd=Object.prototype.hasOwnProperty;function kd(t){if(nc(t)&&!qs(t)&&!(t instanceof Sd)){if(t instanceof Dd)return t;if(Rd.call(t,"__wrapped__"))return xd(t)}return new Dd(t)}kd.prototype=wd.prototype,kd.prototype.constructor=kd;var zd=kd;var Ud=function(t){var e=Fd(t),r=zd[e];if("function"!=typeof r||!(e in Sd.prototype))return!1;if(t===r)return!0;var n=Id(r);return!!n&&t===n[0]},Md=800,Ld=16,Cd=Date.now;var Bd=function(t){var e=0,r=0;return function(){var n=Cd(),i=Ld-(n-r);if(r=n,i>0){if(++e>=Md)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Wd=Bd(sd),Nd=/\{\n\/\* \[wrapped with (.+)\] \*/,Gd=/,? & /;var Hd=function(t){var e=t.match(Nd);return e?e[1].split(Gd):[]},Vd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var $d=function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Vd,"{\n/* [wrapped with "+e+"] */\n")};var qd=function(t){return function(){return t}},Kd=Bd(td?function(t,e){return td(t,"toString",{configurable:!0,enumerable:!1,value:qd(e),writable:!0})}:kl);var Zd=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var Jd=function(t){return t!=t};var Xd=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1};var Yd=function(t,e,r){return e==e?Xd(t,e,r):Bl(t,Jd,r)};var Qd=function(t,e){return!(null==t||!t.length)&&Yd(t,e,0)>-1},tv=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var ev=function(t,e){return Zd(tv,function(r){var n="_."+r[0];e&r[1]&&!Qd(t,n)&&t.push(n)}),t.sort()};var rv=function(t,e,r){var n=e+"";return Kd(t,$d(n,ev(Hd(n),r)))},nv=1,iv=2,av=4,ov=8,uv=32,cv=64;var sv=function(t,e,r,n,i,a,o,u,c,s){var f=e&ov;e|=f?uv:cv,(e&=~(f?cv:uv))&av||(e&=~(nv|iv));var l=[t,e,i,f?a:void 0,f?o:void 0,f?void 0:a,f?void 0:o,u,c,s],d=r.apply(void 0,l);return Ud(t)&&Wd(d,l),d.placeholder=n,rv(d,t,e)};var fv=function(t){return t.placeholder},lv=Math.min;var dv=function(t,e){for(var r=t.length,n=lv(e.length,r),i=Td(t);n--;){var a=e[n];t[n]=df(a,r)?i[a]:void 0}return t},vv="__lodash_placeholder__";var hv=function(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==vv||(t[r]=vv,a[i++]=r)}return a},pv=1,yv=2,gv=8,_v=16,bv=128,mv=512;var wv=function t(e,r,n,i,a,o,u,c,s,f){var l=r&bv,d=r&pv,v=r&yv,h=r&(gv|_v),p=r&mv,y=v?void 0:dd(e);return function g(){for(var _=arguments.length,b=Array(_),m=_;m--;)b[m]=arguments[m];if(h)var w=fv(g),j=md(b,w);if(i&&(b=gd(b,i,a,h)),o&&(b=bd(b,o,u,h)),_-=j,h&&_<f){var A=hv(b,w);return sv(e,r,t,g.placeholder,n,b,A,c,s,f-_)}var S=d?n:this,I=v?S[e]:e;return _=b.length,c?b=dv(b,c):p&&_>1&&b.reverse(),l&&s<_&&(b.length=s),this&&this!==Nu&&this instanceof g&&(I=y||dd(I)),I.apply(S,b)}};var jv=function(t,e,r){var n=dd(t);return function i(){for(var a=arguments.length,o=Array(a),u=a,c=fv(i);u--;)o[u]=arguments[u];var s=a<3&&o[0]!==c&&o[a-1]!==c?[]:hv(o,c);return(a-=s.length)<r?sv(t,e,wv,i.placeholder,void 0,o,s,void 0,void 0,r-a):pd(this&&this!==Nu&&this instanceof i?n:t,this,o)}},Av=1;var Sv=function(t,e,r,n){var i=e&Av,a=dd(t);return function e(){for(var o=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==Nu&&this instanceof e?a:t;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++o];return pd(l,i?r:this,f)}},Iv="__lodash_placeholder__",Ov=1,Ev=2,Fv=4,Pv=8,Dv=128,Tv=256,xv=Math.min;var Rv=function(t,e){var r=t[1],n=e[1],i=r|n,a=i<(Ov|Ev|Dv),o=n==Dv&&r==Pv||n==Dv&&r==Tv&&t[7].length<=e[8]||n==(Dv|Tv)&&e[7].length<=e[8]&&r==Pv;if(!a&&!o)return t;n&Ov&&(t[2]=e[2],i|=r&Ov?0:Fv);var u=e[3];if(u){var c=t[3];t[3]=c?gd(c,u,e[4]):u,t[4]=c?hv(t[3],Iv):e[4]}return(u=e[5])&&(c=t[5],t[5]=c?bd(c,u,e[6]):u,t[6]=c?hv(t[5],Iv):e[6]),(u=e[7])&&(t[7]=u),n&Dv&&(t[8]=null==t[8]?e[8]:xv(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},kv="Expected a function",zv=1,Uv=2,Mv=8,Lv=16,Cv=32,Bv=64,Wv=Math.max;var Nv=function(t,e,r,n,i,a,o,u){var c=e&Uv;if(!c&&"function"!=typeof t)throw new TypeError(kv);var s=n?n.length:0;if(s||(e&=~(Cv|Bv),n=i=void 0),o=void 0===o?o:Wv(Xl(o),0),u=void 0===u?u:Xl(u),s-=i?i.length:0,e&Bv){var f=n,l=i;n=i=void 0}var d=c?void 0:Id(t),v=[t,e,r,n,i,f,l,a,o,u];if(d&&Rv(v,d),t=v[0],e=v[1],r=v[2],n=v[3],i=v[4],!(u=v[9]=void 0===v[9]?c?0:t.length:Wv(v[9]-s,0))&&e&(Mv|Lv)&&(e&=~(Mv|Lv)),e&&e!=zv)h=e==Mv||e==Lv?jv(t,e,u):e!=Cv&&e!=(zv|Cv)||i.length?wv.apply(void 0,v):Sv(t,e,r,n);else var h=hd(t,e,r);return rv((d?sd:Wd)(h,v),t,e)},Gv=8;function Hv(t,e,r){var n=Nv(t,Gv,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return n.placeholder=Hv.placeholder,n}Hv.placeholder={};var Vv=Hv;var $v=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r};var qv=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),u=o.length;u--;){var c=o[t?u:++i];if(!1===r(a[c],c,a))break}return e}}();var Kv=function(t,e){return function(r,n){if(null==r)return r;if(!Ff(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}(function(t,e){return t&&qv(t,e,Pf)});var Zv=function(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r};var Jv=function(t,e,r){var n=qs(t)?$v:Zv,i=arguments.length<3;return n(t,Ll(e),r,i,Kv)},Xv="[object String]";var Yv=function(t){return"string"==typeof t||!qs(t)&&nc(t)&&tc(t)==Xv},Qv=Vv(function(t,e){return t?Jv(e,function(e,r,n){var i,a=El(r,"folderId.path",El(r,"folderId.id")),o=Yv(a)?a.split("/").pop():r.folderId;return String(o)===String(t)?Object.assign(e,((i={})[n]=r,i)):e},{}):e}),th=function(t,e){var r=void 0===e?{}:e,n=r.width,i=r.path;return i?"/flamelink/media/sized/"+i+"/"+t:"/flamelink/media/"+(n?"sized/"+n+"/":"")+t},eh=function(t,e,r){var n=e.map(function(t){return Object.assign({},t,{width:parseInt(t.width||t.maxWidth,10)})},[]).sort(function(t,e){return t.width-e.width}).find(function(t){return t.width>=r});n?t.options=Object.assign(t.options,n):vu("The provided size ("+r+") has been ignored because it did not match any of the given file's available sizes.\nAvailable sizes: "+e.map(function(t){return t.width}).join(", "))},rh=["id","parentId","children","order"],nh=function(r){var n={_getFolderId:function(t){var e=t.folderName;return Uu(this,void 0,void 0,function(){var t,r,i;return Mu(this,function(a){switch(a.label){case 0:return e?[4,n.folderRef().where("name","==",e).get()]:[2,null];case 1:return t=a.sent(),r=[],t.forEach(function(t){return r.push(t.data())}),(i=Ql(r,{name:e}))?[2,i.id]:[2,null]}})})},_getFolderIdFromOptions:function(t){var e=void 0===t?{folderId:"",folderName:""}:t,r=e.folderId,i=e.folderName;return Uu(this,void 0,void 0,function(){return Mu(this,function(t){return r?[2,r]:[2,n._getFolderId({folderName:i})]})})},_setFile:function(t){return Uu(this,void 0,void 0,function(){var e;return Mu(this,function(i){return e=ku({},t,{_fl_meta_:{createdBy:mu(r),createdDate:bu(r),docId:t.id}}),[2,n.fileRef(t.id).set(e)]})})},_createSizedImage:function(t,e,i){var a=this;return void 0===i&&(i={}),new gu(function(u,c,s){return Uu(a,void 0,void 0,function(){var a,f,l,d,v,h,p;return Mu(this,function(y){switch(y.label){case 0:return i&&(i.path||i.width||i.maxWidth)?(a=_u(r),s.emit(n.UploadEvents.RESIZE_IMAGE_STARTED,e,i),[4,o(t,i)]):[3,3];case 1:return f=y.sent(),s.emit(n.UploadEvents.RESIZE_IMAGE_FINISHED,e,i),l=n.ref(e,{path:i.path,width:i.width||i.maxWidth}),s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_STARTED,e,i),d=r.usesAdminApp?"upload":"put",v=l[d](f),h=void 0,El(a,"TaskEvent")&&(h=v.on(a.TaskEvent.STATE_CHANGED,function(t){s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_STATE_CHANGED,t,i)})),[4,v];case 2:return p=y.sent(),"function"==typeof h&&h(),s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_FINISHED,e,i),[2,u(p)];case 3:return c(new yu("Invalid size object supplied - please refer to https://flamelink.github.io/flamelink-js-sdk/#/storage?id=upload for more details on upload options.\nImage upload for supplied size skipped for file: "+e)),[2]}})})})},ref:function(e,n){void 0===n&&(n={});var i=zu(n,[]);if(r.isNodeEnvironment&&!r.usesAdminApp)throw new yu("\nThe Firebase client-side SDK cannot access the Storage Bucket server-side.\nPlease use the admin SDK instead - https://www.npmjs.com/package/firebase-admin\n\nInstructions here: https://flamelink.github.io/flamelink-js-sdk/#/getting-started?id=usage","service-unavailable");var a=t._ensureService("storage",r);if(/:\/\//.test(e)){if(r.usesAdminApp)throw new yu("Retrieving files from URL is not supported for the admin SDK","service-unavailable");return a.refFromURL(e)}return r.usesAdminApp?a.bucket().file(th(e,i)):a.ref(th(e,i))},folderRef:function(e){var n=t._ensureService("firestore",r);return e?n.collection("fl_folders").doc(e):n.collection("fl_folders")},fileRef:function(e){var n=t._ensureService("firestore",r);return e?n.collection("fl_files").doc(e):n.collection("fl_files")},getFoldersRaw:function(t){var e=zu(t,[]);return Uu(this,void 0,void 0,function(){return Mu(this,function(t){return[2,Fu(n.folderRef(),e).get({source:e.source||"default"})]})})},getFolders:function(t){var i=t.fields,a=t.structure,o=zu(t,["fields","structure"]);return Uu(this,void 0,void 0,function(){var t,u,c,s,f,l,d,v,h=this;return Mu(this,function(p){switch(p.label){case 0:return t=Array.isArray(i)?Array.from(new Set(rh.concat(i))):i,u=Iu(t),[4,n.getFoldersRaw(o)];case 1:return(c=p.sent()).empty?[2,null]:"nested"===a||"tree"===a?[3,3]:(s=[],c.forEach(function(t){return s.push(t.data())}),[4,s.reduce(function(t,e){return t.then(function(t){return Uu(h,void 0,void 0,function(){var r;return Mu(this,function(n){return[2,Object.assign(t,u((r={},r[e.id]=e,r)))]})})})},Promise.resolve({}))]);case 2:return[2,p.sent()];case 3:return f=Tu(r,o),l=Eu(a,{idProperty:"id",parentProperty:"parentId.id"}),d=[],c.forEach(function(t){return Uu(h,void 0,void 0,function(){return Mu(this,function(e){return[2,d.push(f(t.data()))]})})}),[4,d.reduce(function(t,e){return t.then(function(t){return Uu(h,void 0,void 0,function(){var r,n;return Mu(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),[2,Object.assign(t,u((n={},n[r.id]=r,n)))]}})})})},Promise.resolve({}))];case 4:return v=p.sent(),[2,e(l,ud)(v)]}})})},getFileRaw:function(t){var e=t.fileId,r=zu(t,["fileId"]);return Uu(this,void 0,void 0,function(){return Mu(this,function(t){if(!e)throw new yu('"storage.getFileRaw()" should be called with at least the file ID',"incorrect-arguments");return[2,Fu(n.fileRef(e),r).get({source:r.source||"default"})]})})},getFile:function(t){var e=t.fileId,i=zu(t,["fileId"]);return Uu(this,void 0,void 0,function(){var t,a,o,u,c,s;return Mu(this,function(f){switch(f.label){case 0:if(!e)throw new yu('"storage.getFile()" should be called with at least the file ID',"incorrect-arguments");return t=Iu(i.fields),a=Tu(r,i),[4,n.getFileRaw(ku({fileId:e},i))];case 1:return o=f.sent(),u=t,s={},c=e,[4,a(o.data())];case 2:return[4,u.apply(void 0,[(s[c]=f.sent(),s)])];case 3:return[2,f.sent()[e]]}})})},getFilesRaw:function(t){void 0===t&&(t={});var e=zu(t,[]);return Uu(this,void 0,void 0,function(){return Mu(this,function(t){return[2,Fu(n.fileRef(),e).get({source:e.source||"default"})]})})},getFiles:function(t){void 0===t&&(t={});var i=zu(t,[]);return Uu(this,void 0,void 0,function(){var t,a,o,u,c,s,f,l,d,v=this;return Mu(this,function(h){switch(h.label){case 0:return t={},a=Object.assign(t,i,i.mediaType?{orderByChild:"type",equalTo:i.mediaType}:{}),[4,n._getFolderIdFromOptions(a)];case 1:return o=h.sent(),u=Qv(o),c=Iu(a.fields),s=Tu(r,i),[4,n.getFilesRaw(a)];case 2:return(f=h.sent()).empty?[2,null]:(l=[],f.forEach(function(t){return Uu(v,void 0,void 0,function(){return Mu(this,function(e){return[2,l.push(s(t.data()))]})})}),[4,l.reduce(function(t,e){return t.then(function(t){return Uu(v,void 0,void 0,function(){var r,n;return Mu(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),[2,Object.assign(t,(n={},n[r.id]=r,n))]}})})})},Promise.resolve({}))]);case 3:return d=h.sent(),[2,e(c,u)(d)]}})})},getURL:function(t){var e=t.fileId,i=zu(t,["fileId"]);return Uu(this,void 0,void 0,function(){var t,a,o,u,c,s,f,l,d,v,h,p;return Mu(this,function(y){switch(y.label){case 0:if(!e)throw new yu('"storage.getURL()" should be called with at least the file ID',"incorrect-arguments");return t=i.size,[4,n.getFile(ku({fileId:e},i))];case 1:return(a=y.sent())?(o=a.file,u=a.sizes,c={filename:o,options:{}},fc(t)?(f=(s=t).width,l=s.height,d=s.quality,f&&l&&d&&(t.path=f+"_"+l+"_"+Math.round(100*parseFloat(d.toString()))),t.path&&El(u,"[0].path")?u.find(function(e){return e.path===t.path})?c.options=Object.assign(c.options,{path:t.path}):vu("The provided path ("+t.path+") has been ignored because it did not match any of the given file's available paths.\nAvailable paths: "+u.map(function(t){return t.path}).join(", ")):f&&u&&u.length&&eh(c,u,parseInt(f.toString(),10))):"string"==typeof t&&u&&u.length&&(v="device"===t?function(){if("undefined"==typeof window)throw new yu("The device's screen resolution can only be retrieved from a browser environment.","incompatibility");var t="devicePixelRatio"in window?window.devicePixelRatio:1;return Math.max(window.screen.width,window.screen.height)*t}():t,eh(c,u,Number(v))),[4,n.ref(c.filename,c.options)]):[2,a];case 2:return h=y.sent(),r.usesAdminApp?[4,h.getSignedUrl({action:"read",expires:"01-01-2500"})]:[3,4];case 3:return p=y.sent(),[2,El(p,"[0]","")];case 4:return[2,h.getDownloadURL()]}})})},getMetadata:function(t){var e=t.fileId,r=zu(t,["fileId"]);return Uu(this,void 0,void 0,function(){var t,i;return Mu(this,function(a){switch(a.label){case 0:if(!e)throw new yu('"storage.getMetadata()" should be called with at least the file ID');return[4,n.getFile(ku({fileId:e},r))];case 1:if(!(t=a.sent()))throw new yu('There is no file for File ID: "'+e+'"');return i=t.file,[2,n.ref(i).getMetadata()]}})})},updateMetadata:function(t){var e=t.fileId,r=t.data;return Uu(this,void 0,void 0,function(){var t,i;return Mu(this,function(a){switch(a.label){case 0:if(!e||!r)throw new yu('"storage.updateMetadata()" should be called with the "fileID" and the "data" object');return[4,n.getFile({fileId:e})];case 1:if(!(t=a.sent()))throw new yu('There is no file for File ID: "'+e+'"');return i=t.file,[2,n.ref(i).updateMetadata(r)]}})})},deleteFile:function(t){var e=t.fileId,i=zu(t,["fileId"]);return Uu(this,void 0,void 0,function(){var t,a,o,u=this;return Mu(this,function(c){switch(c.label){case 0:if(r.usesAdminApp)throw new yu('"storage.deleteFile()" is not currently supported for server-side use.');if(!e)throw new yu('"storage.deleteFile()" should be called with at least the file ID');return[4,n.getFile(ku({fileId:e},i))];case 1:return(t=c.sent())?(a=t.file,o=t.sizes,[4,n.ref(a).delete()]):[2,t];case 2:return c.sent(),Array.isArray(o)?[4,Promise.all(o.map(function(t){return Uu(u,void 0,void 0,function(){var e,r;return Mu(this,function(i){return e=t.width||t.maxWidth,r=t.path,e||r?[2,n.ref(a,{width:e,path:r}).delete()]:[2,Promise.resolve()]})})}))]:[3,4];case 3:c.sent(),c.label=4;case 4:return[2,n.fileRef(e).delete()]}})})},upload:function(t,e){var i=this;return void 0===e&&(e={}),new gu(function(a,o,u){return Uu(i,void 0,void 0,function(){var i,c,s,f,l,d,v,h,p,y,g,_,b,m,w,j,A,S=this;return Mu(this,function(I){switch(I.label){case 0:return I.trys.push([0,7,,8]),i=_u(r),u.emit(n.UploadEvents.START),c=e.sizes,s=e.overwriteSizes,[4,El(r,"modules.settings",{getImageSizes:function(){}}).getImageSizes()];case 1:return(f=I.sent())&&(c||s?c&&c.length&&!s&&ad(e,"sizes",f.concat(c)||[]):ad(e,"sizes",f||[])),(!e.sizes||e.sizes&&0===e.sizes.length||Array.isArray(e.sizes)&&0===e.sizes.filter(function(t){return!(240!==t.width&&240!==t.maxWidth||t.height||t.quality)}).length)&&(Array.isArray(e.sizes)?e.sizes.push({width:240}):ad(e,"sizes",[{width:240}])),l=n.fileRef().doc().id,d=El(e,"metadata",{}),v="object"==typeof t&&t.name||"string"==typeof d.name?l+"_"+(d.name||t.name):l,h=n.ref(v,e),p=r.usesAdminApp?"upload":"string"==typeof t?"putString":"put",y=[t],[4,n._getFolderIdFromOptions(e)];case 2:return"number"==typeof(g=I.sent())&&(g=g.toString()),ad(e,"metadata.customMetadata.flamelinkFileId",l),ad(e,"metadata.customMetadata.flamelinkFolderId",g),y.push(e.metadata),"putString"===p&&e.stringEncoding&&y.splice(1,0,e.stringEncoding),_=h[p].apply(h,y),u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_STARTED),b=void 0,El(i,"TaskEvent")&&(b=_.on(i.TaskEvent.STATE_CHANGED,function(t){u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_STATE_CHANGED,t)})),[4,_];case 3:return m=I.sent(),"function"==typeof b&&b(),u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_FINISHED),w=/^image\//.test(El(m,"metadata.contentType"))?"images":"files",j={id:l,file:El(m,"metadata.name",""),folderId:n.folderRef(g||"root"),type:w,contentType:El(m,"metadata.contentType","")},"images"===w&&"put"===p&&Array.isArray(e.sizes)?(u.emit(n.UploadEvents.SIZED_FILES_UPLOAD_STARTED),j.sizes=e.sizes.map(function(t){var e=t.width,r=t.height,n=t.quality;return e&&r&&n?Object.assign({},t,{path:e+"_"+r+"_"+Math.round(100*parseFloat(n.toString()))}):t}),[4,Promise.all(j.sizes.map(function(e){return Uu(S,void 0,void 0,function(){var r,i;return Mu(this,function(a){switch(a.label){case 0:return r=n._createSizedImage(t,v,e),i=r.on("*",function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.emit.apply(u,[t].concat(e))}),[4,r];case 1:return a.sent(),i(),[2]}})})}))]):[3,5];case 4:I.sent(),u.emit(n.UploadEvents.SIZED_FILES_UPLOAD_FINISHED),I.label=5;case 5:return u.emit(n.UploadEvents.DB_PERSIST_STARTED),[4,n._setFile(j)];case 6:return I.sent(),u.emit(n.UploadEvents.DB_PERSIST_FINISHED),u.emit(n.UploadEvents.SUCCESS,j),[2,a(j)];case 7:return A=I.sent(),u.emit(n.UploadEvents.FAILURE,A),o(A),[3,8];case 8:return[2]}})})})},get UploadEvents(){return t=_u(r),ku({ALL:"*",START:"upload_start",SUCCESS:"upload_success",FAILURE:"upload_failure",DB_PERSIST_STARTED:"file_db_persist_started",DB_PERSIST_FINISHED:"file_db_persist_finished",MAIN_FILE_UPLOAD_STARTED:"main_file_upload_started",MAIN_FILE_UPLOAD_FINISHED:"main_file_upload_finished",SIZED_FILES_UPLOAD_STARTED:"sized_files_upload_started",SIZED_FILES_UPLOAD_FINISHED:"sized_files_upload_finished",SIZED_FILE_UPLOAD_STARTED:"sized_file_upload_started",SIZED_FILE_UPLOAD_FINISHED:"sized_file_upload_finished",RESIZE_IMAGE_STARTED:"resize_image_start",RESIZE_IMAGE_FINISHED:"resize_image_finished"},El(t,"TaskEvent.STATE_CHANGED")?{MAIN_FILE_UPLOAD_STATE_CHANGED:"main_file_upload_"+t.TaskEvent.STATE_CHANGED,SIZED_FILE_UPLOAD_STATE_CHANGED:"sized_file_upload_"+t.TaskEvent.STATE_CHANGED}:{});var t}};return n};t._registerModule("storage",function(t){return"cf"===t.dbType?nh(t):null});var ih=function(){return(ih=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ah(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function oh(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function u(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(o,u)}c((n=n.apply(t,e||[])).next())})}function uh(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var ch=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i};var sh=function(t,e){return ch(e,function(e){return t[e]})};var fh=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},lh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function dh(t,e){return t(e={exports:{}},e.exports),e.exports}var vh="object"==typeof lh&&lh&&lh.Object===Object&&lh,hh="object"==typeof self&&self&&self.Object===Object&&self,ph=vh||hh||Function("return this")(),yh=ph.Symbol,gh=Object.prototype,_h=gh.hasOwnProperty,bh=gh.toString,mh=yh?yh.toStringTag:void 0;var wh=function(t){var e=_h.call(t,mh),r=t[mh];try{t[mh]=void 0;var n=!0}catch(t){}var i=bh.call(t);return n&&(e?t[mh]=r:delete t[mh]),i},jh=Object.prototype.toString;var Ah=function(t){return jh.call(t)},Sh="[object Null]",Ih="[object Undefined]",Oh=yh?yh.toStringTag:void 0;var Eh=function(t){return null==t?void 0===t?Ih:Sh:Oh&&Oh in Object(t)?wh(t):Ah(t)};var Fh=function(t){return null!=t&&"object"==typeof t},Ph="[object Arguments]";var Dh=function(t){return Fh(t)&&Eh(t)==Ph},Th=Object.prototype,xh=Th.hasOwnProperty,Rh=Th.propertyIsEnumerable,kh=Dh(function(){return arguments}())?Dh:function(t){return Fh(t)&&xh.call(t,"callee")&&!Rh.call(t,"callee")},zh=Array.isArray;var Uh=function(){return!1},Mh=dh(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?ph.Buffer:void 0,a=(i?i.isBuffer:void 0)||Uh;t.exports=a}),Lh=9007199254740991,Ch=/^(?:0|[1-9]\d*)$/;var Bh=function(t,e){var r=typeof t;return!!(e=null==e?Lh:e)&&("number"==r||"symbol"!=r&&Ch.test(t))&&t>-1&&t%1==0&&t<e},Wh=9007199254740991;var Nh=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Wh},Gh={};Gh["[object Float32Array]"]=Gh["[object Float64Array]"]=Gh["[object Int8Array]"]=Gh["[object Int16Array]"]=Gh["[object Int32Array]"]=Gh["[object Uint8Array]"]=Gh["[object Uint8ClampedArray]"]=Gh["[object Uint16Array]"]=Gh["[object Uint32Array]"]=!0,Gh["[object Arguments]"]=Gh["[object Array]"]=Gh["[object ArrayBuffer]"]=Gh["[object Boolean]"]=Gh["[object DataView]"]=Gh["[object Date]"]=Gh["[object Error]"]=Gh["[object Function]"]=Gh["[object Map]"]=Gh["[object Number]"]=Gh["[object Object]"]=Gh["[object RegExp]"]=Gh["[object Set]"]=Gh["[object String]"]=Gh["[object WeakMap]"]=!1;var Hh=function(t){return Fh(t)&&Nh(t.length)&&!!Gh[Eh(t)]};var Vh=function(t){return function(e){return t(e)}},$h=dh(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&vh.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}),qh=$h&&$h.isTypedArray,Kh=qh?Vh(qh):Hh,Zh=Object.prototype.hasOwnProperty;var Jh=function(t,e){var r=zh(t),n=!r&&kh(t),i=!r&&!n&&Mh(t),a=!r&&!n&&!i&&Kh(t),o=r||n||i||a,u=o?fh(t.length,String):[],c=u.length;for(var s in t)!e&&!Zh.call(t,s)||o&&("length"==s||i&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Bh(s,c))||u.push(s);return u},Xh=Object.prototype;var Yh=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Xh)};var Qh=function(t,e){return function(r){return t(e(r))}},tp=Qh(Object.keys,Object),ep=Object.prototype.hasOwnProperty;var rp=function(t){if(!Yh(t))return tp(t);var e=[];for(var r in Object(t))ep.call(t,r)&&"constructor"!=r&&e.push(r);return e};var np=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},ip="[object AsyncFunction]",ap="[object Function]",op="[object GeneratorFunction]",up="[object Proxy]";var cp=function(t){if(!np(t))return!1;var e=Eh(t);return e==ap||e==op||e==ip||e==up};var sp=function(t){return null!=t&&Nh(t.length)&&!cp(t)};var fp=function(t){return sp(t)?Jh(t):rp(t)};var lp=function(t){return null==t?[]:sh(t,fp(t))},dp=Qh(Object.getPrototypeOf,Object),vp="[object Object]",hp=Function.prototype,pp=Object.prototype,yp=hp.toString,gp=pp.hasOwnProperty,_p=yp.call(Object);var bp=function(t){if(!Fh(t)||Eh(t)!=vp)return!1;var e=dp(t);if(null===e)return!0;var r=gp.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&yp.call(r)==_p};var mp=function(){this.__data__=[],this.size=0};var wp=function(t,e){return t===e||t!=t&&e!=e};var jp=function(t,e){for(var r=t.length;r--;)if(wp(t[r][0],e))return r;return-1},Ap=Array.prototype.splice;var Sp=function(t){var e=this.__data__,r=jp(e,t);return!(r<0||(r==e.length-1?e.pop():Ap.call(e,r,1),--this.size,0))};var Ip=function(t){var e=this.__data__,r=jp(e,t);return r<0?void 0:e[r][1]};var Op=function(t){return jp(this.__data__,t)>-1};var Ep=function(t,e){var r=this.__data__,n=jp(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Fp(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Fp.prototype.clear=mp,Fp.prototype.delete=Sp,Fp.prototype.get=Ip,Fp.prototype.has=Op,Fp.prototype.set=Ep;var Pp=Fp;var Dp=function(){this.__data__=new Pp,this.size=0};var Tp=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var xp=function(t){return this.__data__.get(t)};var Rp=function(t){return this.__data__.has(t)},kp=ph["__core-js_shared__"],zp=function(){var t=/[^.]+$/.exec(kp&&kp.keys&&kp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var Up=function(t){return!!zp&&zp in t},Mp=Function.prototype.toString;var Lp=function(t){if(null!=t){try{return Mp.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Cp=/^\[object .+?Constructor\]$/,Bp=Function.prototype,Wp=Object.prototype,Np=Bp.toString,Gp=Wp.hasOwnProperty,Hp=RegExp("^"+Np.call(Gp).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Vp=function(t){return!(!np(t)||Up(t))&&(cp(t)?Hp:Cp).test(Lp(t))};var $p=function(t,e){return null==t?void 0:t[e]};var qp=function(t,e){var r=$p(t,e);return Vp(r)?r:void 0},Kp=qp(ph,"Map"),Zp=qp(Object,"create");var Jp=function(){this.__data__=Zp?Zp(null):{},this.size=0};var Xp=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Yp="__lodash_hash_undefined__",Qp=Object.prototype.hasOwnProperty;var ty=function(t){var e=this.__data__;if(Zp){var r=e[t];return r===Yp?void 0:r}return Qp.call(e,t)?e[t]:void 0},ey=Object.prototype.hasOwnProperty;var ry=function(t){var e=this.__data__;return Zp?void 0!==e[t]:ey.call(e,t)},ny="__lodash_hash_undefined__";var iy=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Zp&&void 0===e?ny:e,this};function ay(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ay.prototype.clear=Jp,ay.prototype.delete=Xp,ay.prototype.get=ty,ay.prototype.has=ry,ay.prototype.set=iy;var oy=ay;var uy=function(){this.size=0,this.__data__={hash:new oy,map:new(Kp||Pp),string:new oy}};var cy=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var sy=function(t,e){var r=t.__data__;return cy(e)?r["string"==typeof e?"string":"hash"]:r.map};var fy=function(t){var e=sy(this,t).delete(t);return this.size-=e?1:0,e};var ly=function(t){return sy(this,t).get(t)};var dy=function(t){return sy(this,t).has(t)};var vy=function(t,e){var r=sy(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function hy(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}hy.prototype.clear=uy,hy.prototype.delete=fy,hy.prototype.get=ly,hy.prototype.has=dy,hy.prototype.set=vy;var py=hy,yy=200;var gy=function(t,e){var r=this.__data__;if(r instanceof Pp){var n=r.__data__;if(!Kp||n.length<yy-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new py(n)}return r.set(t,e),this.size=r.size,this};function _y(t){var e=this.__data__=new Pp(t);this.size=e.size}_y.prototype.clear=Dp,_y.prototype.delete=Tp,_y.prototype.get=xp,_y.prototype.has=Rp,_y.prototype.set=gy;var by=_y,my="__lodash_hash_undefined__";var wy=function(t){return this.__data__.set(t,my),this};var jy=function(t){return this.__data__.has(t)};function Ay(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new py;++e<r;)this.add(t[e])}Ay.prototype.add=Ay.prototype.push=wy,Ay.prototype.has=jy;var Sy=Ay;var Iy=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var Oy=function(t,e){return t.has(e)},Ey=1,Fy=2;var Py=function(t,e,r,n,i,a){var o=r&Ey,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;var s=a.get(t);if(s&&a.get(e))return s==e;var f=-1,l=!0,d=r&Fy?new Sy:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],h=e[f];if(n)var p=o?n(h,v,f,e,t,a):n(v,h,f,t,e,a);if(void 0!==p){if(p)continue;l=!1;break}if(d){if(!Iy(e,function(t,e){if(!Oy(d,e)&&(v===t||i(v,t,r,n,a)))return d.push(e)})){l=!1;break}}else if(v!==h&&!i(v,h,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l},Dy=ph.Uint8Array;var Ty=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r};var xy=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r},Ry=1,ky=2,zy="[object Boolean]",Uy="[object Date]",My="[object Error]",Ly="[object Map]",Cy="[object Number]",By="[object RegExp]",Wy="[object Set]",Ny="[object String]",Gy="[object Symbol]",Hy="[object ArrayBuffer]",Vy="[object DataView]",$y=yh?yh.prototype:void 0,qy=$y?$y.valueOf:void 0;var Ky=function(t,e,r,n,i,a,o){switch(r){case Vy:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Hy:return!(t.byteLength!=e.byteLength||!a(new Dy(t),new Dy(e)));case zy:case Uy:case Cy:return wp(+t,+e);case My:return t.name==e.name&&t.message==e.message;case By:case Ny:return t==e+"";case Ly:var u=Ty;case Wy:var c=n&Ry;if(u||(u=xy),t.size!=e.size&&!c)return!1;var s=o.get(t);if(s)return s==e;n|=ky,o.set(t,e);var f=Py(u(t),u(e),n,i,a,o);return o.delete(t),f;case Gy:if(qy)return qy.call(t)==qy.call(e)}return!1};var Zy=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t};var Jy=function(t,e,r){var n=e(t);return zh(t)?n:Zy(n,r(t))};var Xy=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a};var Yy=function(){return[]},Qy=Object.prototype.propertyIsEnumerable,tg=Object.getOwnPropertySymbols,eg=tg?function(t){return null==t?[]:(t=Object(t),Xy(tg(t),function(e){return Qy.call(t,e)}))}:Yy;var rg=function(t){return Jy(t,fp,eg)},ng=1,ig=Object.prototype.hasOwnProperty;var ag=function(t,e,r,n,i,a){var o=r&ng,u=rg(t),c=u.length;if(c!=rg(e).length&&!o)return!1;for(var s=c;s--;){var f=u[s];if(!(o?f in e:ig.call(e,f)))return!1}var l=a.get(t);if(l&&a.get(e))return l==e;var d=!0;a.set(t,e),a.set(e,t);for(var v=o;++s<c;){var h=t[f=u[s]],p=e[f];if(n)var y=o?n(p,h,f,e,t,a):n(h,p,f,t,e,a);if(!(void 0===y?h===p||i(h,p,r,n,a):y)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var g=t.constructor,_=e.constructor;g!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d},og=qp(ph,"DataView"),ug=qp(ph,"Promise"),cg=qp(ph,"Set"),sg=qp(ph,"WeakMap"),fg=Lp(og),lg=Lp(Kp),dg=Lp(ug),vg=Lp(cg),hg=Lp(sg),pg=Eh;(og&&"[object DataView]"!=pg(new og(new ArrayBuffer(1)))||Kp&&"[object Map]"!=pg(new Kp)||ug&&"[object Promise]"!=pg(ug.resolve())||cg&&"[object Set]"!=pg(new cg)||sg&&"[object WeakMap]"!=pg(new sg))&&(pg=function(t){var e=Eh(t),r="[object Object]"==e?t.constructor:void 0,n=r?Lp(r):"";if(n)switch(n){case fg:return"[object DataView]";case lg:return"[object Map]";case dg:return"[object Promise]";case vg:return"[object Set]";case hg:return"[object WeakMap]"}return e});var yg=pg,gg=1,_g="[object Arguments]",bg="[object Array]",mg="[object Object]",wg=Object.prototype.hasOwnProperty;var jg=function(t,e,r,n,i,a){var o=zh(t),u=zh(e),c=o?bg:yg(t),s=u?bg:yg(e),f=(c=c==_g?mg:c)==mg,l=(s=s==_g?mg:s)==mg,d=c==s;if(d&&Mh(t)){if(!Mh(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new by),o||Kh(t)?Py(t,e,r,n,i,a):Ky(t,e,c,r,n,i,a);if(!(r&gg)){var v=f&&wg.call(t,"__wrapped__"),h=l&&wg.call(e,"__wrapped__");if(v||h){var p=v?t.value():t,y=h?e.value():e;return a||(a=new by),i(p,y,r,n,a)}}return!!d&&(a||(a=new by),ag(t,e,r,n,i,a))};var Ag=function t(e,r,n,i,a){return e===r||(null==e||null==r||!Fh(e)&&!Fh(r)?e!=e&&r!=r:jg(e,r,n,i,t,a))},Sg=1,Ig=2;var Og=function(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var u=r[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var c=(u=r[i])[0],s=t[c],f=u[1];if(o&&u[2]){if(void 0===s&&!(c in t))return!1}else{var l=new by;if(n)var d=n(s,f,c,t,e,l);if(!(void 0===d?Ag(f,s,Sg|Ig,n,l):d))return!1}}return!0};var Eg=function(t){return t==t&&!np(t)};var Fg=function(t){for(var e=fp(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Eg(i)]}return e};var Pg=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}};var Dg=function(t){var e=Fg(t);return 1==e.length&&e[0][2]?Pg(e[0][0],e[0][1]):function(r){return r===t||Og(r,t,e)}},Tg="[object Symbol]";var xg=function(t){return"symbol"==typeof t||Fh(t)&&Eh(t)==Tg},Rg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kg=/^\w*$/;var zg=function(t,e){if(zh(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!xg(t))||kg.test(t)||!Rg.test(t)||null!=e&&t in Object(e)},Ug="Expected a function";function Mg(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Ug);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Mg.Cache||py),r}Mg.Cache=py;var Lg=Mg,Cg=500;var Bg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wg=/\\(\\)?/g,Ng=function(t){var e=Lg(t,function(t){return r.size===Cg&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Bg,function(t,r,n,i){e.push(n?i.replace(Wg,"$1"):r||t)}),e}),Gg=1/0,Hg=yh?yh.prototype:void 0,Vg=Hg?Hg.toString:void 0;var $g=function t(e){if("string"==typeof e)return e;if(zh(e))return ch(e,t)+"";if(xg(e))return Vg?Vg.call(e):"";var r=e+"";return"0"==r&&1/e==-Gg?"-0":r};var qg=function(t){return null==t?"":$g(t)};var Kg=function(t,e){return zh(t)?t:zg(t,e)?[t]:Ng(qg(t))},Zg=1/0;var Jg=function(t){if("string"==typeof t||xg(t))return t;var e=t+"";return"0"==e&&1/t==-Zg?"-0":e};var Xg=function(t,e){for(var r=0,n=(e=Kg(e,t)).length;null!=t&&r<n;)t=t[Jg(e[r++])];return r&&r==n?t:void 0};var Yg=function(t,e,r){var n=null==t?void 0:Xg(t,e);return void 0===n?r:n};var Qg=function(t,e){return null!=t&&e in Object(t)};var t_=function(t,e,r){for(var n=-1,i=(e=Kg(e,t)).length,a=!1;++n<i;){var o=Jg(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&Nh(i)&&Bh(o,i)&&(zh(t)||kh(t))};var e_=function(t,e){return null!=t&&t_(t,e,Qg)},r_=1,n_=2;var i_=function(t,e){return zg(t)&&Eg(e)?Pg(Jg(t),e):function(r){var n=Yg(r,t);return void 0===n&&n===e?e_(r,t):Ag(e,n,r_|n_)}};var a_=function(t){return t};var o_=function(t){return function(e){return null==e?void 0:e[t]}};var u_=function(t){return function(e){return Xg(e,t)}};var c_=function(t){return zg(t)?o_(Jg(t)):u_(t)};var s_=function(t){return"function"==typeof t?t:null==t?a_:"object"==typeof t?zh(t)?i_(t[0],t[1]):Dg(t):c_(t)};var f_=function(t){return function(e,r,n){var i=Object(e);if(!sp(e)){var a=s_(r);e=fp(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}};var l_=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1},d_=NaN,v_=/^\s+|\s+$/g,h_=/^[-+]0x[0-9a-f]+$/i,p_=/^0b[01]+$/i,y_=/^0o[0-7]+$/i,g_=parseInt;var __=function(t){if("number"==typeof t)return t;if(xg(t))return d_;if(np(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=np(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v_,"");var r=p_.test(t);return r||y_.test(t)?g_(t.slice(2),r?2:8):h_.test(t)?d_:+t},b_=1/0,m_=17976931348623157e292;var w_=function(t){return t?(t=__(t))===b_||t===-b_?(t<0?-1:1)*m_:t==t?t:0:0===t?t:0};var j_=function(t){var e=w_(t),r=e%1;return e==e?r?e-r:e:0},A_=Math.max;var S_=f_(function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:j_(r);return i<0&&(i=A_(n+i,0)),l_(t,s_(e),i)}),I_=function(){try{var t=qp(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var O_=function(t,e,r){"__proto__"==e&&I_?I_(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},E_=Object.prototype.hasOwnProperty;var F_=function(t,e,r){var n=t[e];E_.call(t,e)&&wp(n,r)&&(void 0!==r||e in t)||O_(t,e,r)};var P_=function(t,e,r,n){if(!np(t))return t;for(var i=-1,a=(e=Kg(e,t)).length,o=a-1,u=t;null!=u&&++i<a;){var c=Jg(e[i]),s=r;if(i!=o){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=np(f)?f:Bh(e[i+1])?[]:{})}F_(u,c,s),u=u[c]}return t};var D_=function(t,e,r){return null==t?t:P_(t,e,r)},T_=sg&&new sg,x_=T_?function(t,e){return T_.set(t,e),t}:a_,R_=Object.create,k_=function(){function t(){}return function(e){if(!np(e))return{};if(R_)return R_(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var z_=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=k_(t.prototype),n=t.apply(r,e);return np(n)?n:r}},U_=1;var M_=function(t,e,r){var n=e&U_,i=z_(t);return function e(){return(this&&this!==ph&&this instanceof e?i:t).apply(n?r:this,arguments)}};var L_=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},C_=Math.max;var B_=function(t,e,r,n){for(var i=-1,a=t.length,o=r.length,u=-1,c=e.length,s=C_(a-o,0),f=Array(c+s),l=!n;++u<c;)f[u]=e[u];for(;++i<o;)(l||i<a)&&(f[r[i]]=t[i]);for(;s--;)f[u++]=t[i++];return f},W_=Math.max;var N_=function(t,e,r,n){for(var i=-1,a=t.length,o=-1,u=r.length,c=-1,s=e.length,f=W_(a-u,0),l=Array(f+s),d=!n;++i<f;)l[i]=t[i];for(var v=i;++c<s;)l[v+c]=e[c];for(;++o<u;)(d||i<a)&&(l[v+r[o]]=t[i++]);return l};var G_=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n};var H_=function(){},V_=4294967295;function $_(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V_,this.__views__=[]}$_.prototype=k_(H_.prototype),$_.prototype.constructor=$_;var q_=$_;var K_=T_?function(t){return T_.get(t)}:function(){},Z_={},J_=Object.prototype.hasOwnProperty;var X_=function(t){for(var e=t.name+"",r=Z_[e],n=J_.call(Z_,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e};function Y_(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Y_.prototype=k_(H_.prototype),Y_.prototype.constructor=Y_;var Q_=Y_;var tb=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var eb=function(t){if(t instanceof q_)return t.clone();var e=new Q_(t.__wrapped__,t.__chain__);return e.__actions__=tb(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},rb=Object.prototype.hasOwnProperty;function nb(t){if(Fh(t)&&!zh(t)&&!(t instanceof q_)){if(t instanceof Q_)return t;if(rb.call(t,"__wrapped__"))return eb(t)}return new Q_(t)}nb.prototype=H_.prototype,nb.prototype.constructor=nb;var ib=nb;var ab=function(t){var e=X_(t),r=ib[e];if("function"!=typeof r||!(e in q_.prototype))return!1;if(t===r)return!0;var n=K_(r);return!!n&&t===n[0]},ob=800,ub=16,cb=Date.now;var sb=function(t){var e=0,r=0;return function(){var n=cb(),i=ub-(n-r);if(r=n,i>0){if(++e>=ob)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},fb=sb(x_),lb=/\{\n\/\* \[wrapped with (.+)\] \*/,db=/,? & /;var vb=function(t){var e=t.match(lb);return e?e[1].split(db):[]},hb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var pb=function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(hb,"{\n/* [wrapped with "+e+"] */\n")};var yb=function(t){return function(){return t}},gb=sb(I_?function(t,e){return I_(t,"toString",{configurable:!0,enumerable:!1,value:yb(e),writable:!0})}:a_);var _b=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var bb=function(t){return t!=t};var mb=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1};var wb=function(t,e,r){return e==e?mb(t,e,r):l_(t,bb,r)};var jb=function(t,e){return!(null==t||!t.length)&&wb(t,e,0)>-1},Ab=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Sb=function(t,e){return _b(Ab,function(r){var n="_."+r[0];e&r[1]&&!jb(t,n)&&t.push(n)}),t.sort()};var Ib=function(t,e,r){var n=e+"";return gb(t,pb(n,Sb(vb(n),r)))},Ob=1,Eb=2,Fb=4,Pb=8,Db=32,Tb=64;var xb=function(t,e,r,n,i,a,o,u,c,s){var f=e&Pb;e|=f?Db:Tb,(e&=~(f?Tb:Db))&Fb||(e&=~(Ob|Eb));var l=[t,e,i,f?a:void 0,f?o:void 0,f?void 0:a,f?void 0:o,u,c,s],d=r.apply(void 0,l);return ab(t)&&fb(d,l),d.placeholder=n,Ib(d,t,e)};var Rb=function(t){return t.placeholder},kb=Math.min;var zb=function(t,e){for(var r=t.length,n=kb(e.length,r),i=tb(t);n--;){var a=e[n];t[n]=Bh(a,r)?i[a]:void 0}return t},Ub="__lodash_placeholder__";var Mb=function(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==Ub||(t[r]=Ub,a[i++]=r)}return a},Lb=1,Cb=2,Bb=8,Wb=16,Nb=128,Gb=512;var Hb=function t(e,r,n,i,a,o,u,c,s,f){var l=r&Nb,d=r&Lb,v=r&Cb,h=r&(Bb|Wb),p=r&Gb,y=v?void 0:z_(e);return function g(){for(var _=arguments.length,b=Array(_),m=_;m--;)b[m]=arguments[m];if(h)var w=Rb(g),j=G_(b,w);if(i&&(b=B_(b,i,a,h)),o&&(b=N_(b,o,u,h)),_-=j,h&&_<f){var A=Mb(b,w);return xb(e,r,t,g.placeholder,n,b,A,c,s,f-_)}var S=d?n:this,I=v?S[e]:e;return _=b.length,c?b=zb(b,c):p&&_>1&&b.reverse(),l&&s<_&&(b.length=s),this&&this!==ph&&this instanceof g&&(I=y||z_(I)),I.apply(S,b)}};var Vb=function(t,e,r){var n=z_(t);return function i(){for(var a=arguments.length,o=Array(a),u=a,c=Rb(i);u--;)o[u]=arguments[u];var s=a<3&&o[0]!==c&&o[a-1]!==c?[]:Mb(o,c);return(a-=s.length)<r?xb(t,e,Hb,i.placeholder,void 0,o,s,void 0,void 0,r-a):L_(this&&this!==ph&&this instanceof i?n:t,this,o)}},$b=1;var qb=function(t,e,r,n){var i=e&$b,a=z_(t);return function e(){for(var o=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==ph&&this instanceof e?a:t;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++o];return L_(l,i?r:this,f)}},Kb="__lodash_placeholder__",Zb=1,Jb=2,Xb=4,Yb=8,Qb=128,tm=256,em=Math.min;var rm=function(t,e){var r=t[1],n=e[1],i=r|n,a=i<(Zb|Jb|Qb),o=n==Qb&&r==Yb||n==Qb&&r==tm&&t[7].length<=e[8]||n==(Qb|tm)&&e[7].length<=e[8]&&r==Yb;if(!a&&!o)return t;n&Zb&&(t[2]=e[2],i|=r&Zb?0:Xb);var u=e[3];if(u){var c=t[3];t[3]=c?B_(c,u,e[4]):u,t[4]=c?Mb(t[3],Kb):e[4]}return(u=e[5])&&(c=t[5],t[5]=c?N_(c,u,e[6]):u,t[6]=c?Mb(t[5],Kb):e[6]),(u=e[7])&&(t[7]=u),n&Qb&&(t[8]=null==t[8]?e[8]:em(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},nm="Expected a function",im=1,am=2,om=8,um=16,cm=32,sm=64,fm=Math.max;var lm=function(t,e,r,n,i,a,o,u){var c=e&am;if(!c&&"function"!=typeof t)throw new TypeError(nm);var s=n?n.length:0;if(s||(e&=~(cm|sm),n=i=void 0),o=void 0===o?o:fm(j_(o),0),u=void 0===u?u:j_(u),s-=i?i.length:0,e&sm){var f=n,l=i;n=i=void 0}var d=c?void 0:K_(t),v=[t,e,r,n,i,f,l,a,o,u];if(d&&rm(v,d),t=v[0],e=v[1],r=v[2],n=v[3],i=v[4],!(u=v[9]=void 0===v[9]?c?0:t.length:fm(v[9]-s,0))&&e&(om|um)&&(e&=~(om|um)),e&&e!=im)h=e==om||e==um?Vb(t,e,u):e!=cm&&e!=(im|cm)||i.length?Hb.apply(void 0,v):qb(t,e,r,n);else var h=M_(t,e,r);return Ib((d?x_:fb)(h,v),t,e)},dm=8;function vm(t,e,r){var n=lm(t,dm,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return n.placeholder=vm.placeholder,n}vm.placeholder={};var hm=vm;var pm=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r};var ym=function(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),u=o.length;u--;){var c=o[t?u:++i];if(!1===r(a[c],c,a))break}return e}}();var gm=function(t,e){return function(r,n){if(null==r)return r;if(!sp(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}(function(t,e){return t&&ym(t,e,fp)});var _m=function(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r};var bm=function(t,e,r){var n=zh(t)?pm:_m,i=arguments.length<3;return n(t,s_(e),r,i,gm)},mm="[object String]";var wm=function(t){return"string"==typeof t||!zh(t)&&Fh(t)&&Eh(t)==mm},jm=function(t){return"/flamelink/media/folders/"+(t||"")},Am=hm(function(t,e){return t?bm(e,function(e,r,n){var i,a=Yg(r,"folderId.path",Yg(r,"folderId.id")),o=wm(a)?a.split("/").pop():r.folderId;return String(o)===String(t)?Object.assign(e,((i={})[n]=r,i)):e},{}):e}),Sm=function(t,e){var r=void 0===e?{}:e,n=r.width,i=r.path;return i?"/flamelink/media/sized/"+i+"/"+t:"/flamelink/media/"+(n?"sized/"+n+"/":"")+t},Im=function(t,e,r){var n=e.map(function(t){return Object.assign({},t,{width:parseInt(t.width||t.maxWidth,10)})},[]).sort(function(t,e){return t.width-e.width}).find(function(t){return t.width>=r});n?t.options=Object.assign(t.options,n):vu("The provided size ("+r+") has been ignored because it did not match any of the given file's available sizes.\nAvailable sizes: "+e.map(function(t){return t.width}).join(", "))},Om=["id","parentId","children","order"],Em=function(r){var n={_getFolderId:function(e){var n=e.folderName,i=void 0===n?"Root":n;return oh(this,void 0,void 0,function(){var e,n,a;return uh(this,function(o){switch(o.label){case 0:return i?[4,t._ensureService("database",r).ref(jm()).once("value")]:[2,null];case 1:return e=o.sent(),n=e.val(),(a=S_(n,{name:i}))?[2,a.id]:[2,a]}})})},_getFolderIdFromOptions:function(t){var e=void 0===t?{folderId:"",folderName:""}:t,r=e.folderId,i=e.folderName;return oh(this,void 0,void 0,function(){return uh(this,function(t){return r?[2,r]:[2,n._getFolderId({folderName:i})]})})},_setFile:function(t){return oh(this,void 0,void 0,function(){var e;return uh(this,function(i){return e=Object.assign({},t,{__meta__:{createdBy:mu(r),createdDate:bu(r)}}),[2,n.fileRef(t.id).set(e)]})})},_createSizedImage:function(t,e,i){var a=this;return void 0===i&&(i={}),new gu(function(u,c,s){return oh(a,void 0,void 0,function(){var a,f,l,d,v,h,p;return uh(this,function(y){switch(y.label){case 0:return i&&(i.path||i.width||i.maxWidth)?(a=_u(r),s.emit(n.UploadEvents.RESIZE_IMAGE_STARTED,e,i),[4,o(t,i)]):[3,3];case 1:return f=y.sent(),s.emit(n.UploadEvents.RESIZE_IMAGE_FINISHED,e,i),l=n.ref(e,{path:i.path,width:i.width||i.maxWidth}),s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_STARTED,e,i),d=r.usesAdminApp?"upload":"put",v=l[d](f),h=void 0,Yg(a,"TaskEvent")&&(h=v.on(a.TaskEvent.STATE_CHANGED,function(t){s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_STATE_CHANGED,t,i)})),[4,v];case 2:return p=y.sent(),"function"==typeof h&&h(),s.emit(n.UploadEvents.SIZED_FILE_UPLOAD_FINISHED,e,i),[2,u(p)];case 3:return c(new yu("Invalid size object supplied - please refer to https://flamelink.github.io/flamelink-js-sdk/#/storage?id=upload for more details on upload options.\nImage upload for supplied size skipped for file: "+e)),[2]}})})})},ref:function(e,n){var i=ah(n,[]);if(r.isNodeEnvironment&&!r.usesAdminApp)throw new yu("\nThe Firebase client-side SDK cannot access the Storage Bucket server-side.\nPlease use the admin SDK instead - https://www.npmjs.com/package/firebase-admin\n\nInstructions here: https://flamelink.github.io/flamelink-js-sdk/#/getting-started?id=usage\n        ","service-unavailable",!1);var a=t._ensureService("storage",r);if(/:\/\//.test(e)){if(r.usesAdminApp)throw new yu("Retrieving files from URL is not supported for the admin SDK","service-unavailable",!1);return a.refFromURL(e)}return r.usesAdminApp?a.bucket().file(Sm(e,i)):a.ref(Sm(e,i))},folderRef:function(e){return t._ensureService("database",r).ref(jm(e))},fileRef:function(e){return t._ensureService("database",r).ref("/flamelink/media/files/"+(e||""))},getFoldersRaw:function(t){var e=ah(t,[]);return oh(this,void 0,void 0,function(){return uh(this,function(t){return[2,Au(n.folderRef(),e).once(e.event||"value")]})})},getFolders:function(t){var r=t.fields,i=t.structure,a=ah(t,["fields","structure"]);return oh(this,void 0,void 0,function(){var t,o,u,c;return uh(this,function(s){switch(s.label){case 0:return t=Array.isArray(r)?Array.from(new Set(Om.concat(r))):r,o=Iu(t),u=Eu(i,{idProperty:"id",parentProperty:"parentId"}),[4,n.getFoldersRaw(a)];case 1:return c=s.sent(),"nested"===i||"tree"===i?[2,e(o,u,lp)(c.val())]:[2,o(c.val())]}})})},getFileRaw:function(t){var e=t.fileId,r=ah(t,["fileId"]);return oh(this,void 0,void 0,function(){return uh(this,function(t){if(!e)throw new yu('"storage.getFileRaw()" should be called with at least the file ID');return[2,Au(n.fileRef(e),r).once(r.event||"value")]})})},getFile:function(t){var r=t.fileId,i=ah(t,["fileId"]);return oh(this,void 0,void 0,function(){var t,a;return uh(this,function(o){switch(o.label){case 0:if(!r)throw new yu('"storage.getFile()" should be called with at least the file ID');return t=Iu(i.fields),[4,n.getFileRaw(ih({fileId:r},i))];case 1:return a=o.sent(),[4,e(pu(r),t,hu(r))(a.val())];case 2:return[2,o.sent()]}})})},getFilesRaw:function(t){var e=ah(t,[]);return oh(this,void 0,void 0,function(){return uh(this,function(t){return[2,Au(n.fileRef(),e).once(e.event||"value")]})})},getFiles:function(t){var r=ah(t,[]);return oh(this,void 0,void 0,function(){var t,i,a,o,u,c;return uh(this,function(s){switch(s.label){case 0:return t={},i=Object.assign(t,r,r.mediaType?{orderByChild:"type",equalTo:r.mediaType}:{}),[4,n._getFolderIdFromOptions(i)];case 1:return a=s.sent(),o=Am(a),u=Iu(i.fields),[4,n.getFilesRaw(i)];case 2:return c=s.sent(),[2,e(u,o)(c.val())]}})})},getURL:function(t){var e=t.fileId,i=ah(t,["fileId"]);return oh(this,void 0,void 0,function(){var t,a,o,u,c,s,f,l,d,v,h,p;return uh(this,function(y){switch(y.label){case 0:if(!e)throw new yu('"storage.getURL()" should be called with at least the file ID');return t=i.size,[4,n.getFile(ih({fileId:e},i))];case 1:return(a=y.sent())?(o=a.file,u=a.sizes,c={filename:o,options:{}},bp(t)?(f=(s=t).width,l=s.height,d=s.quality,f&&l&&d&&(t.path=f+"_"+l+"_"+Math.round(100*parseFloat(d.toString()))),t.path&&Yg(u,"[0].path")?u.find(function(e){return e.path===t.path})?c.options=Object.assign(c.options,{path:t.path}):vu("The provided path ("+t.path+") has been ignored because it did not match any of the given file's available paths.\nAvailable paths: "+u.map(function(t){return t.path}).join(", ")):f&&u&&u.length&&Im(c,u,parseInt(f.toString(),10))):"string"==typeof t&&u&&u.length&&(v="device"===t?function(){if("undefined"==typeof window)throw new yu("The device's screen resolution can only be retrieved from a browser environment.","incompatibility");var t="devicePixelRatio"in window?window.devicePixelRatio:1;return Math.max(window.screen.width,window.screen.height)*t}():t,Im(c,u,Number(v))),[4,n.ref(c.filename,c.options)]):[2,a];case 2:return h=y.sent(),r.usesAdminApp?[4,h.getSignedUrl({action:"read",expires:"01-01-2500"})]:[3,4];case 3:return p=y.sent(),[2,Yg(p,"[0]","")];case 4:return[2,h.getDownloadURL()]}})})},getMetadata:function(t){var e=t.fileId,r=ah(t,["fileId"]);return oh(this,void 0,void 0,function(){var t,i;return uh(this,function(a){switch(a.label){case 0:if(!e)throw new yu('"storage.getMetadata()" should be called with at least the file ID');return[4,n.getFile(ih({fileId:e},r))];case 1:if(!(t=a.sent()))throw new yu('There is no file for File ID: "'+e+'"');return i=t.file,[2,n.ref(i).getMetadata()]}})})},updateMetadata:function(t){var e=t.fileId,r=t.data;return oh(this,void 0,void 0,function(){var t,i;return uh(this,function(a){switch(a.label){case 0:if(!e||!r)throw new yu('"storage.updateMetadata()" should be called with the "fileID" and the "data" object');return[4,n.getFile({fileId:e})];case 1:if(!(t=a.sent()))throw new yu('There is no file for File ID: "'+e+'"');return i=t.file,[2,n.ref(i).updateMetadata(r)]}})})},deleteFile:function(t){var e=t.fileId,i=ah(t,["fileId"]);return oh(this,void 0,void 0,function(){var t,a,o,u=this;return uh(this,function(c){switch(c.label){case 0:if(r.usesAdminApp)throw new yu('"storage.deleteFile()" is not currently supported for server-side use.');if(!e)throw new yu('"storage.deleteFile()" should be called with at least the file ID');return[4,n.getFile(ih({fileId:e},i))];case 1:return(t=c.sent())?(a=t.file,o=t.sizes,[4,n.ref(a).delete()]):[2,t];case 2:return c.sent(),Array.isArray(o)?[4,Promise.all(o.map(function(t){return oh(u,void 0,void 0,function(){var e,r;return uh(this,function(i){return e=t.width||t.maxWidth,r=t.path,e||r?[2,n.ref(a,{width:e,path:r}).delete()]:[2,Promise.resolve()]})})}))]:[3,4];case 3:c.sent(),c.label=4;case 4:return[2,n.fileRef(e).remove()]}})})},upload:function(t,e){var i=this;return void 0===e&&(e={}),new gu(function(a,o,u){return oh(i,void 0,void 0,function(){var i,c,s,f,l,d,v,h,p,y,g,_,b,m,w,j,A,S=this;return uh(this,function(I){switch(I.label){case 0:return I.trys.push([0,7,,8]),i=_u(r),u.emit(n.UploadEvents.START),c=e.sizes,s=e.overwriteSizes,[4,Yg(r,"modules.settings",{getImageSizes:function(){}}).getImageSizes()];case 1:return(f=I.sent())&&(c||s?c&&c.length&&!s&&D_(e,"sizes",f.concat(c)||[]):D_(e,"sizes",f||[])),(!e.sizes||e.sizes&&0===e.sizes.length||Array.isArray(e.sizes)&&0===e.sizes.filter(function(t){return!(240!==t.width&&240!==t.maxWidth||t.height||t.quality)}).length)&&(Array.isArray(e.sizes)?e.sizes.push({width:240}):D_(e,"sizes",[{width:240}])),l=Date.now().toString(),d=Yg(e,"metadata",{}),v="object"==typeof t&&t.name||"string"==typeof d.name?l+"_"+(d.name||t.name):l,h=n.ref(v,e),p=r.usesAdminApp?"upload":"string"==typeof t?"putString":"put",y=[t],[4,n._getFolderIdFromOptions(e)];case 2:return"number"==typeof(g=I.sent())&&(g=g.toString()),D_(e,"metadata.customMetadata.flamelinkFileId",l),D_(e,"metadata.customMetadata.flamelinkFolderId",g),y.push(e.metadata),"putString"===p&&e.stringEncoding&&y.splice(1,0,e.stringEncoding),_=h[p].apply(h,y),u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_STARTED),b=void 0,Yg(i,"TaskEvent")&&(b=_.on(i.TaskEvent.STATE_CHANGED,function(t){u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_STATE_CHANGED,t)})),[4,_];case 3:return m=I.sent(),"function"==typeof b&&b(),u.emit(n.UploadEvents.MAIN_FILE_UPLOAD_FINISHED),w=/^image\//.test(Yg(m,"metadata.contentType"))?"images":"files",j={id:l,file:Yg(m,"metadata.name",""),folderId:n.folderRef(g),type:w,contentType:Yg(m,"metadata.contentType","")},"images"===w&&"put"===p&&Array.isArray(e.sizes)?(u.emit(n.UploadEvents.SIZED_FILES_UPLOAD_STARTED),j.sizes=e.sizes.map(function(t){var e=t.width,r=t.height,n=t.quality;return e&&r&&n?Object.assign({},t,{path:e+"_"+r+"_"+Math.round(100*parseFloat(n.toString()))}):t}),[4,Promise.all(j.sizes.map(function(e){return oh(S,void 0,void 0,function(){var r,i;return uh(this,function(a){switch(a.label){case 0:return r=n._createSizedImage(t,v,e),i=r.on("*",function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.emit.apply(u,[t].concat(e))}),[4,r];case 1:return a.sent(),i(),[2]}})})}))]):[3,5];case 4:I.sent(),u.emit(n.UploadEvents.SIZED_FILES_UPLOAD_FINISHED),I.label=5;case 5:return u.emit(n.UploadEvents.DB_PERSIST_STARTED),[4,n._setFile(j)];case 6:return I.sent(),u.emit(n.UploadEvents.DB_PERSIST_FINISHED),u.emit(n.UploadEvents.SUCCESS,j),[2,a(j)];case 7:return A=I.sent(),u.emit(n.UploadEvents.FAILURE,A),o(A),[3,8];case 8:return[2]}})})})},get UploadEvents(){return t=_u(r),ih({ALL:"*",START:"upload_start",SUCCESS:"upload_success",FAILURE:"upload_failure",DB_PERSIST_STARTED:"file_db_persist_started",DB_PERSIST_FINISHED:"file_db_persist_finished",MAIN_FILE_UPLOAD_STARTED:"main_file_upload_started",MAIN_FILE_UPLOAD_FINISHED:"main_file_upload_finished",SIZED_FILES_UPLOAD_STARTED:"sized_files_upload_started",SIZED_FILES_UPLOAD_FINISHED:"sized_files_upload_finished",SIZED_FILE_UPLOAD_STARTED:"sized_file_upload_started",SIZED_FILE_UPLOAD_FINISHED:"sized_file_upload_finished",RESIZE_IMAGE_STARTED:"resize_image_start",RESIZE_IMAGE_FINISHED:"resize_image_finished"},Yg(t,"TaskEvent.STATE_CHANGED")?{MAIN_FILE_UPLOAD_STATE_CHANGED:"main_file_upload_"+t.TaskEvent.STATE_CHANGED,SIZED_FILE_UPLOAD_STATE_CHANGED:"sized_file_upload_"+t.TaskEvent.STATE_CHANGED}:{});var t}};return n};t._registerModule("storage",function(t){return"rtdb"===t.dbType?Em(t):null})}).apply(this,arguments)}catch(t){throw console.error(t),new Error('Cannot instantiate "flamelink-storage.js" - be sure to load flamelink-app.js first.')}});
//# sourceMappingURL=flamelink-storage.js.map
